/*
 jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license  tooltipster v4.2.5  KineticJS v5.1.1 2014-06-06 http://www.kineticjs.com by Eric Rowell @ericdrowell - MIT License https://github.com/ericdrowell/KineticJS/wiki/License*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,e,c){d!=Array.prototype&&d!=Object.prototype&&(d[e]=c.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,e,c,a){if(e){c=$jscomp.global;d=d.split(".");for(a=0;a<d.length-1;a++){var f=d[a];f in c||(c[f]={});c=c[f]}d=d[d.length-1];a=c[d];e=e(a);e!=a&&null!=e&&$jscomp.defineProperty(c,d,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.from",function(d){return d?d:function(d,c,a){c=null!=c?c:function(a){return a};var f=[],e="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];if("function"==typeof e){d=e.call(d);for(var h=0;!(e=d.next()).done;)f.push(c.call(a,e.value,h++))}else for(e=d.length,h=0;h<e;h++)f.push(c.call(a,d[h],h));return f}},"es6","es3");
$jscomp.findInternal=function(d,e,c){d instanceof String&&(d=String(d));for(var a=d.length,f=0;f<a;f++){var g=d[f];if(e.call(c,g,f,d))return{i:f,v:g}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(d,c){return $jscomp.findInternal(this,d,c).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(d){return d?d:function(d,c,a){var f=this.length||0;0>c&&(c=Math.max(0,f+c));if(null==a||a>f)a=f;a=Number(a);0>a&&(a=Math.max(0,f+a));for(c=Number(c||0);c<a;c++)this[c]=d;return this}},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var d={},e=Object.create(new $jscomp.global.Proxy(d,{get:function(c,a,f){return c==d&&"q"==a&&f==e}}));return!0===e.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;
$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.arrayIteratorImpl=function(d){var e=0;return function(){return e<d.length?{done:!1,value:d[e++]}:{done:!0}}};$jscomp.arrayIterator=function(d){return{next:$jscomp.arrayIteratorImpl(d)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var d=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+d++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.asyncIterator;d||(d=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};
$jscomp.makeIterator=function(d){var e="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];return e?e.call(d):$jscomp.arrayIterator(d)};$jscomp.owns=function(d,e){return Object.prototype.hasOwnProperty.call(d,e)};
$jscomp.polyfill("WeakMap",function(d){function e(){if(!d||!Object.seal)return!1;try{var a=Object.seal({}),c=Object.seal({}),f=new d([[a,2],[c,3]]);if(2!=f.get(a)||3!=f.get(c))return!1;f.delete(a);f.set(c,4);return!f.has(a)&&4==f.get(c)}catch(r){return!1}}function c(){}function a(a){if(!$jscomp.owns(a,g)){var d=new c;$jscomp.defineProperty(a,g,{value:d})}}function f(d){var f=Object[d];f&&(Object[d]=function(d){if(d instanceof c)return d;a(d);return f(d)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(d&&
$jscomp.ES6_CONFORMANCE)return d}else if(e())return d;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0,l=function(a){this.id_=(h+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};l.prototype.set=function(c,d){a(c);if(!$jscomp.owns(c,g))throw Error("WeakMap key fail: "+c);c[g][this.id_]=d;return this};l.prototype.get=function(a){return $jscomp.owns(a,g)?a[g][this.id_]:void 0};l.prototype.has=
function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)};l.prototype.delete=function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)?delete a[g][this.id_]:!1};return l},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(d){function e(){if($jscomp.ASSUME_NO_NATIVE_MAP||!d||"function"!=typeof d||!d.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new d($jscomp.makeIterator([[a,"s"]]));if("s"!=c.get(a)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var f=c.entries(),e=f.next();if(e.done||e.value[0]!=a||"s"!=e.value[1])return!1;e=f.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!f.next().done?!1:!0}catch(t){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(d&&$jscomp.ES6_CONFORMANCE)return d}else if(e())return d;$jscomp.initSymbolIterator();var c=new WeakMap,a=function(a){this.data_={};this.head_=h();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};a.prototype.set=function(a,c){a=0===a?0:a;var d=f(this,a);d.list||(d.list=this.data_[d.id]=[]);d.entry?d.entry.value=c:(d.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:c},d.list.push(d.entry),this.head_.previous.next=d.entry,this.head_.previous=d.entry,this.size++);return this};a.prototype.delete=function(a){a=f(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=h();this.size=0};a.prototype.has=function(a){return!!f(this,a).entry};
a.prototype.get=function(a){return(a=f(this,a).entry)&&a.value};a.prototype.entries=function(){return g(this,function(a){return[a.key,a.value]})};a.prototype.keys=function(){return g(this,function(a){return a.key})};a.prototype.values=function(){return g(this,function(a){return a.value})};a.prototype.forEach=function(a,c){for(var d=this.entries(),f;!(f=d.next()).done;)f=f.value,a.call(c,f[1],f[0],this)};a.prototype[Symbol.iterator]=a.prototype.entries;var f=function(a,d){var f=d&&typeof d;"object"==
f||"function"==f?c.has(d)?f=c.get(d):(f=""+ ++l,c.set(d,f)):f="p_"+d;var e=a.data_[f];if(e&&$jscomp.owns(a.data_,f))for(a=0;a<e.length;a++){var g=e[a];if(d!==d&&g.key!==g.key||d===g.key)return{id:f,list:e,index:a,entry:g}}return{id:f,list:e,index:-1,entry:void 0}},g=function(a,c){var d=a.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=a.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:c(d)};d=null}return{done:!0,value:void 0}})},h=function(){var a={};return a.previous=
a.next=a.head=a},l=0;return a},"es6","es3");$jscomp.polyfill("Object.values",function(d){return d?d:function(d){var c=[],a;for(a in d)$jscomp.owns(d,a)&&c.push(d[a]);return c}},"es8","es3");$jscomp.iteratorFromArray=function(d,e){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var c=0,a={next:function(){if(c<d.length){var f=c++;return{value:e(f,d[f]),done:!1}}a.next=function(){return{done:!0,value:void 0}};return a.next()}};a[Symbol.iterator]=function(){return a};return a};
$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");$jscomp.polyfill("Object.is",function(d){return d?d:function(d,c){return d===c?0!==d||1/d===1/c:d!==d&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(d){return d?d:function(d,c){var a=this;a instanceof String&&(a=String(a));var f=a.length;c=c||0;for(0>c&&(c=Math.max(c+f,0));c<f;c++){var e=a[c];if(e===d||Object.is(e,d))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(d,e,c){if(null==d)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return d+""};$jscomp.polyfill("String.prototype.includes",function(d){return d?d:function(d,c){return-1!==$jscomp.checkStringArgs(this,d,"includes").indexOf(d,c||0)}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(d){return d?d:function(d,c){var a=$jscomp.checkStringArgs(this,d,"startsWith");d+="";var f=a.length,e=d.length;c=Math.max(0,Math.min(c|0,a.length));for(var h=0;h<e&&c<f;)if(a[c++]!=d[h++])return!1;return h>=e}},"es6","es3");$jscomp.polyfill("Number.isNaN",function(d){return d?d:function(d){return"number"===typeof d&&isNaN(d)}},"es6","es3");
$jscomp.polyfill("Array.prototype.findIndex",function(d){return d?d:function(d,c){return $jscomp.findInternal(this,d,c).i}},"es6","es3");function _slicedToArray(d,e){return _arrayWithHoles(d)||_iterableToArrayLimit(d,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}
function _iterableToArrayLimit(d,e){var c=[],a=!0,f=!1,g=void 0;try{for(var h=d[Symbol.iterator](),l;!(a=(l=h.next()).done)&&(c.push(l.value),!e||c.length!==e);a=!0);}catch(m){f=!0,g=m}finally{try{if(!a&&null!=h["return"])h["return"]()}finally{if(f)throw g;}}return c}function _arrayWithHoles(d){if(Array.isArray(d))return d}function _toConsumableArray(d){return _arrayWithoutHoles(d)||_iterableToArray(d)||_nonIterableSpread()}
function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance");}function _iterableToArray(d){if(Symbol.iterator in Object(d)||"[object Arguments]"===Object.prototype.toString.call(d))return Array.from(d)}function _arrayWithoutHoles(d){if(Array.isArray(d)){for(var e=0,c=Array(d.length);e<d.length;e++)c[e]=d[e];return c}}
function _typeof(d){_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"===typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d};return _typeof(d)}
!function(d,e){"object"==("undefined"===typeof module?"undefined":_typeof(module))&&"object"==_typeof(module.exports)?module.exports=d.document?e(d,!0):function(c){if(!c.document)throw Error("jQuery requires a window with a document");return e(c)}:e(d)}("undefined"!=typeof window?window:void 0,function(d,e){function c(a,c,d){var f,e=(c=c||P).createElement("script");if(e.text=a,d)for(f in Ma)d[f]&&(e[f]=d[f]);c.head.appendChild(e).parentNode.removeChild(e)}function a(a){return null==a?a+"":"object"==
_typeof(a)||"function"==typeof a?Ka[Va.call(a)]||"object":_typeof(a)}function f(c){var d=!!c&&"length"in c&&c.length,f=a(c);return!M(c)&&!ya(c)&&("array"===f||0===d||"number"==typeof d&&0<d&&d-1 in c)}function g(a,c){return a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()}function h(a,c,d){return M(c)?n.grep(a,function(a,f){return!!c.call(a,f,a)!==d}):c.nodeType?n.grep(a,function(a){return a===c!==d}):"string"!=typeof c?n.grep(a,function(a){return-1<Ca.call(c,a)!==d}):n.filter(c,a,d)}function l(a,
c){for(;(a=a[c])&&1!==a.nodeType;);return a}function m(a){var c={};return n.each(a.match(ra)||[],function(a,d){c[d]=!0}),c}function q(a){return a}function p(a){throw a;}function r(a,c,d,f){var e;try{a&&M(e=a.promise)?e.call(a).done(c).fail(d):a&&M(e=a.then)?e.call(a,c,d):c.apply(void 0,[a].slice(f))}catch(qa){d.apply(void 0,[qa])}}function t(){P.removeEventListener("DOMContentLoaded",t);d.removeEventListener("load",t);n.ready()}function v(a,c){return c.toUpperCase()}function k(a){return a.replace(eb,
"ms-").replace(Na,v)}function x(){this.expando=n.expando+x.uid++}function y(a,c,d){var f;if(void 0===d&&1===a.nodeType)if(f="data-"+c.replace(Pb,"-$&").toLowerCase(),"string"==typeof(d=a.getAttribute(f))){try{f=d,d="true"===f||"false"!==f&&("null"===f?null:f===+f+""?+f:za.test(f)?JSON.parse(f):f)}catch(ia){}na.set(a,c,d)}else d=void 0;return d}function C(a,c,d,f){var e,g,A=20,h=f?function(){return f.cur()}:function(){return n.css(a,c,"")},m=h(),k=d&&d[3]||(n.cssNumber[c]?"":"px"),p=(n.cssNumber[c]||
"px"!==k&&+m)&&Z.exec(n.css(a,c));if(p&&p[3]!==k){m/=2;k=k||p[3];for(p=+m||1;A--;)n.style(a,c,p+k),0>=(1-g)*(1-(g=h()/m||.5))&&(A=0),p/=g;p*=2;n.style(a,c,p+k);d=d||[]}return d&&(p=+p||+m||0,e=d[1]?p+(d[1]+1)*d[2]:+d[2],f&&(f.unit=k,f.start=p,f.end=e)),e}function E(a,c){for(var d,f,e=[],g=0,h=a.length;g<h;g++)if((f=a[g]).style)if(d=f.style.display,c){if("none"===d&&(e[g]=F.get(f,"display")||null,e[g]||(f.style.display="")),""===f.style.display&&lb(f)){d=g;var m=void 0;var k=f.ownerDocument;var p=
f.nodeName;k=(f=Ab[p])||(m=k.body.appendChild(k.createElement(p)),f=n.css(m,"display"),m.parentNode.removeChild(m),"none"===f&&(f="block"),Ab[p]=f,f);e[d]=k}}else"none"!==d&&(e[g]="none",F.set(f,"display",d));for(g=0;g<h;g++)null!=e[g]&&(a[g].style.display=e[g]);return a}function B(a,c){var d;return d="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(c||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(c||"*"):[],void 0===c||c&&g(a,c)?n.merge([a],d):d}function I(a,c){for(var d=
0,f=a.length;d<f;d++)F.set(a[d],"globalEval",!c||F.get(c[d],"globalEval"))}function D(c,d,f,e,g){for(var A,h,m,k,p=d.createDocumentFragment(),q=[],l=0,J=c.length;l<J;l++)if((A=c[l])||0===A)if("object"===a(A))n.merge(q,A.nodeType?[A]:A);else if(Qb.test(A)){h=h||p.appendChild(d.createElement("div"));m=(La.exec(A)||["",""])[1].toLowerCase();m=fa[m]||fa._default;h.innerHTML=m[1]+n.htmlPrefilter(A)+m[2];for(m=m[0];m--;)h=h.lastChild;n.merge(q,h.childNodes);(h=p.firstChild).textContent=""}else q.push(d.createTextNode(A));
p.textContent="";for(l=0;A=q[l++];)if(e&&-1<n.inArray(A,e))g&&g.push(A);else if(k=n.contains(A.ownerDocument,A),h=B(p.appendChild(A),"script"),k&&I(h),f)for(m=0;A=h[m++];)Da.test(A.type||"")&&f.push(A);return p}function N(){return!0}function H(){return!1}function X(){try{return P.activeElement}catch(nc){}}function Q(a,c,d,f,e,g){var A,h;if("object"==_typeof(c)){"string"!=typeof d&&(f=f||d,d=void 0);for(h in c)Q(a,h,d,f,c[h],g);return a}if(null==f&&null==e?(e=d,f=d=void 0):null==e&&("string"==typeof d?
(e=f,f=void 0):(e=f,f=d,d=void 0)),!1===e)e=H;else if(!e)return a;return 1===g&&(A=e,(e=function(a){return n().off(a),A.apply(this,arguments)}).guid=A.guid||(A.guid=n.guid++)),a.each(function(){n.event.add(this,c,e,f,d)})}function z(a,c){return g(a,"table")&&g(11!==c.nodeType?c:c.firstChild,"tr")?n(a).children("tbody")[0]||a:a}function S(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function L(a){return"true/"===(a.type||"").slice(0,5)?a.type=a.type.slice(5):a.removeAttribute("type"),
a}function sa(a,c){var d,f,e,g,h,m;if(1===c.nodeType){if(F.hasData(a)&&(d=F.access(a),f=F.set(c,d),m=d.events))for(e in delete f.handle,f.events={},m)for(d=0,f=m[e].length;d<f;d++)n.event.add(c,e,m[e][d]);na.hasData(a)&&(g=na.access(a),h=n.extend({},g),na.set(c,h))}}function K(a,d,f,e){d=Ea.apply([],d);var g,A,h,m=0,k=a.length,p=k-1,q=d[0],l=M(q);if(l||1<k&&"string"==typeof q&&!O.checkClone&&Oa.test(q))return a.each(function(c){var g=a.eq(c);l&&(d[0]=q.call(this,c,g.html()));K(g,d,f,e)});if(k&&(g=
D(d,a[0].ownerDocument,!1,a,e),A=g.firstChild,1===g.childNodes.length&&(g=A),A||e)){for(h=(A=n.map(B(g,"script"),S)).length;m<k;m++){var J=g;m!==p&&(J=n.clone(J,!0,!0),h&&n.merge(A,B(J,"script")));f.call(a[m],J,m)}if(h)for(g=A[A.length-1].ownerDocument,n.map(A,L),m=0;m<h;m++)J=A[m],Da.test(J.type||"")&&!F.access(J,"globalEval")&&n.contains(g,J)&&(J.src&&"module"!==(J.type||"").toLowerCase()?n._evalUrl&&n._evalUrl(J.src):c(J.textContent.replace(Fa,""),g,J))}return a}function ca(a,c,d){for(var f=c?
n.filter(c,a):a,e=0;null!=(c=f[e]);e++)d||1!==c.nodeType||n.cleanData(B(c)),c.parentNode&&(d&&n.contains(c.ownerDocument,c)&&I(B(c,"script")),c.parentNode.removeChild(c));return a}function T(a,c,d){var f,e,g,A,h=a.style;return(d=d||mb(a))&&(""!==(A=d.getPropertyValue(c)||d[c])||n.contains(a.ownerDocument,a)||(A=n.style(a,c)),!O.pixelBoxStyles()&&fb.test(A)&&Sb.test(c)&&(f=h.width,e=h.minWidth,g=h.maxWidth,h.minWidth=h.maxWidth=h.width=A,A=d.width,h.width=f,h.minWidth=e,h.maxWidth=g)),void 0!==A?A+
"":A}function ha(a,c){return{get:function(){if(!a())return(this.get=c).apply(this,arguments);delete this.get}}}function pa(a){var c=n.cssProps[a];if(!c){c=n.cssProps;a:{var d=a;if(!(d in Bb)){for(var f=d[0].toUpperCase()+d.slice(1),e=Cb.length;e--;)if((d=Cb[e]+f)in Bb)break a;d=void 0}}c=c[a]=d||a}return c}function da(a,c,d){return(a=Z.exec(c))?Math.max(0,a[2]-(d||0))+(a[3]||"px"):c}function oa(a,c,d,f,e,g){var h="width"===c?1:0,A=0,m=0;if(d===(f?"border":"content"))return 0;for(;4>h;h+=2)"margin"===
d&&(m+=n.css(a,d+Aa[h],!0,e)),f?("content"===d&&(m-=n.css(a,"padding"+Aa[h],!0,e)),"margin"!==d&&(m-=n.css(a,"border"+Aa[h]+"Width",!0,e))):(m+=n.css(a,"padding"+Aa[h],!0,e),"padding"!==d?m+=n.css(a,"border"+Aa[h]+"Width",!0,e):A+=n.css(a,"border"+Aa[h]+"Width",!0,e));return!f&&0<=g&&(m+=Math.max(0,Math.ceil(a["offset"+c[0].toUpperCase()+c.slice(1)]-g-m-A-.5))),m}function aa(a,c,d){var f=mb(a),e=T(a,c,f),g="border-box"===n.css(a,"boxSizing",!1,f),h=g;if(fb.test(e)){if(!d)return e;e="auto"}return h=
h&&(O.boxSizingReliable()||e===a.style[c]),("auto"===e||!parseFloat(e)&&"inline"===n.css(a,"display",!1,f))&&(e=a["offset"+c[0].toUpperCase()+c.slice(1)],h=!0),(e=parseFloat(e)||0)+oa(a,c,d||(g?"border":"content"),h,f,e)+"px"}function G(a,c,d,f,e){return new G.prototype.init(a,c,d,f,e)}function Pa(){nb&&(!1===P.hidden&&d.requestAnimationFrame?d.requestAnimationFrame(Pa):d.setTimeout(Pa,n.fx.interval),n.fx.tick())}function bb(){return d.setTimeout(function(){cb=void 0}),cb=Date.now()}function Qa(a,
c){var d,f=0,e={height:a};for(c=c?1:0;4>f;f+=2-c)e["margin"+(d=Aa[f])]=e["padding"+d]=a;return c&&(e.opacity=e.width=a),e}function Wa(a,c,d){for(var f,e=(u.tweeners[c]||[]).concat(u.tweeners["*"]),g=0,h=e.length;g<h;g++)if(f=e[g].call(d,c,a))return f}function w(a,c){var d,f,e,g,h;for(d in a)if(f=k(d),e=c[f],g=a[d],Array.isArray(g)&&(e=g[1],g=a[d]=g[0]),d!==f&&(a[f]=g,delete a[d]),(h=n.cssHooks[f])&&"expand"in h)for(d in g=h.expand(g),delete a[f],g)d in a||(a[d]=g[d],c[d]=e);else c[f]=e}function u(a,
c,d){var f,e=0,g=u.prefilters.length,h=n.Deferred().always(function(){delete A.elem}),A=function(){if(f)return!1;var c=cb||bb();c=Math.max(0,m.startTime+m.duration-c);for(var d=1-(c/m.duration||0),e=0,g=m.tweens.length;e<g;e++)m.tweens[e].run(d);return h.notifyWith(a,[m,d,c]),1>d&&g?c:(g||h.notifyWith(a,[m,1,0]),h.resolveWith(a,[m]),!1)},m=h.promise({elem:a,props:n.extend({},c),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},d),originalProperties:c,originalOptions:d,startTime:cb||bb(),
duration:d.duration,tweens:[],createTween:function(c,d){c=n.Tween(a,m.opts,c,d,m.opts.specialEasing[c]||m.opts.easing);return m.tweens.push(c),c},stop:function(c){var d=0,e=c?m.tweens.length:0;if(f)return this;for(f=!0;d<e;d++)m.tweens[d].run(1);return c?(h.notifyWith(a,[m,1,0]),h.resolveWith(a,[m,c])):h.rejectWith(a,[m,c]),this}});d=m.props;for(w(d,m.opts.specialEasing);e<g;e++)if(c=u.prefilters[e].call(m,a,d,m.opts))return M(c.stop)&&(n._queueHooks(m.elem,m.opts.queue).stop=c.stop.bind(c)),c;return n.map(d,
Wa,m),M(m.opts.start)&&m.opts.start.call(a,m),m.progress(m.opts.progress).done(m.opts.done,m.opts.complete).fail(m.opts.fail).always(m.opts.always),n.fx.timer(n.extend(A,{elem:a,anim:m,queue:m.opts.queue})),m}function ja(a){return(a.match(ra)||[]).join(" ")}function Ba(a){return a.getAttribute&&a.getAttribute("class")||""}function Xa(a){return Array.isArray(a)?a:"string"==typeof a?a.match(ra)||[]:[]}function db(c,d,f,e){var g;if(Array.isArray(d))n.each(d,function(a,d){f||Tb.test(c)?e(c,d):db(c+"["+
("object"==_typeof(d)&&null!=d?a:"")+"]",d,f,e)});else if(f||"object"!==a(d))e(c,d);else for(g in d)db(c+"["+g+"]",d[g],f,e)}function Ga(a){return function(c,d){"string"!=typeof c&&(d=c,c="*");var f=0,e=c.toLowerCase().match(ra)||[];if(M(d))for(;c=e[f++];)"+"===c[0]?(c=c.slice(1)||"*",(a[c]=a[c]||[]).unshift(d)):(a[c]=a[c]||[]).push(d)}}function gb(a,c,d,f){function e(m){var A;return g[m]=!0,n.each(a[m]||[],function(a,m){a=m(c,d,f);return"string"!=typeof a||h||g[a]?h?!(A=a):void 0:(c.dataTypes.unshift(a),
e(a),!1)}),A}var g={},h=a===tb;return e(c.dataTypes[0])||!g["*"]&&e("*")}function Ya(a,c){var d,f,e=n.ajaxSettings.flatOptions||{};for(d in c)void 0!==c[d]&&((e[d]?a:f||(f={}))[d]=c[d]);return f&&n.extend(!0,a,f),a}var Ha=[],P=d.document,Ra=Object.getPrototypeOf,ta=Ha.slice,Ea=Ha.concat,Sa=Ha.push,Ca=Ha.indexOf,Ka={},Va=Ka.toString,ua=Ka.hasOwnProperty,Ia=ua.toString,ob=Ia.call(Object),O={},M=function(a){return"function"==typeof a&&"number"!=typeof a.nodeType},ya=function(a){return null!=a&&a===a.window},
Ma={type:!0,src:!0,noModule:!0},n=function J(a,c){return new J.fn.init(a,c)},la=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;n.fn=n.prototype={jquery:"3.3.1",constructor:n,length:0,toArray:function(){return ta.call(this)},get:function(a){return null==a?ta.call(this):0>a?this[a+this.length]:this[a]},pushStack:function(a){a=n.merge(this.constructor(),a);return a.prevObject=this,a},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(c,d){return a.call(c,d,c)}))},
slice:function(){return this.pushStack(ta.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var c=this.length;a=+a+(0>a?c:0);return this.pushStack(0<=a&&a<c?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:Sa,sort:Ha.sort,splice:Ha.splice};n.extend=n.fn.extend=function(){var a,c,d,f,e,g=arguments[0]||{},h=1,m=arguments.length,k=!1;"boolean"==typeof g&&(k=g,g=arguments[h]||{},h++);"object"==_typeof(g)||M(g)||
(g={});for(h===m&&(g=this,h--);h<m;h++)if(null!=(a=arguments[h]))for(c in a){var p=g[c];g!==(d=a[c])&&(k&&d&&(n.isPlainObject(d)||(f=Array.isArray(d)))?(f?(f=!1,e=p&&Array.isArray(p)?p:[]):e=p&&n.isPlainObject(p)?p:{},g[c]=n.extend(k,e,d)):void 0!==d&&(g[c]=d))}return g};n.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isPlainObject:function(a){var c,d;return!(!a||"[object Object]"!==Va.call(a))&&(!(c=Ra(a))||"function"==
typeof(d=ua.call(c,"constructor")&&c.constructor)&&Ia.call(d)===ob)},isEmptyObject:function(a){for(var c in a)return!1;return!0},globalEval:function(a){c(a)},each:function(a,c){var d,e=0;if(f(a))for(d=a.length;e<d&&!1!==c.call(a[e],e,a[e]);e++);else for(e in a)if(!1===c.call(a[e],e,a[e]))break;return a},trim:function(a){return null==a?"":(a+"").replace(la,"")},makeArray:function(a,c){c=c||[];return null!=a&&(f(Object(a))?n.merge(c,"string"==typeof a?[a]:a):Sa.call(c,a)),c},inArray:function(a,c,d){return null==
c?-1:Ca.call(c,a,d)},merge:function(a,c){for(var d=+c.length,f=0,e=a.length;f<d;f++)a[e++]=c[f];return a.length=e,a},grep:function(a,c,d){var f=[],e=0,g=a.length;for(d=!d;e<g;e++)!c(a[e],e)!==d&&f.push(a[e]);return f},map:function(a,c,d){var e,g,h=0,m=[];if(f(a))for(e=a.length;h<e;h++)null!=(g=c(a[h],h,d))&&m.push(g);else for(h in a)null!=(g=c(a[h],h,d))&&m.push(g);return Ea.apply([],m)},guid:1,support:O});"function"==typeof Symbol&&(n.fn[Symbol.iterator]=Ha[Symbol.iterator]);n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
function(a,c){Ka["[object "+c+"]"]=c.toLowerCase()});var Ja=function(a){function c(a,c,d,f){var e,g,h,m,k=c&&c.ownerDocument,p=c?c.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==p&&9!==p&&11!==p)return d;if(!f&&((c?c.ownerDocument||c:X)!==V&&fa(c),c=c||V,Q)){if(11!==p&&(m=fb.exec(a)))if(e=m[1])if(9===p){if(!(g=c.getElementById(e)))return d;if(g.id===e)return d.push(g),d}else{if(k&&(g=k.getElementById(e))&&T(c,g)&&g.id===e)return d.push(g),d}else{if(m[2])return Fa.apply(d,c.getElementsByTagName(a)),
d;if((e=m[3])&&ea.getElementsByClassName&&c.getElementsByClassName)return Fa.apply(d,c.getElementsByClassName(e)),d}if(!(!ea.qsa||ha[a+" "]||z&&z.test(a))){if(1!==p){k=c;var A=a}else if("object"!==c.nodeName.toLowerCase()){(h=c.getAttribute("id"))?h=h.replace(sa,oa):c.setAttribute("id",h=U);for(e=(g=Na(a)).length;e--;)g[e]="#"+h+" "+n(g[e]);A=g.join(",");k=eb.test(a)&&l(c.parentNode)||c}if(A)try{return Fa.apply(d,k.querySelectorAll(A)),d}catch(sc){}finally{h===U&&c.removeAttribute("id")}}}return C(a.replace(O,
"$1"),c,d,f)}function d(){function a(d,f){return c.push(d+" ")>u.cacheLength&&delete a[c.shift()],a[d+" "]=f}var c=[];return a}function f(a){return a[U]=!0,a}function e(a){var c=V.createElement("fieldset");try{return!!a(c)}catch(qc){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}}function g(a,c){a=a.split("|");for(var d=a.length;d--;)u.attrHandle[a[d]]=c}function h(a,c){var d=c&&a,f=d&&1===a.nodeType&&1===c.nodeType&&a.sourceIndex-c.sourceIndex;if(f)return f;if(d)for(;d=d.nextSibling;)if(d===
c)return-1;return a?1:-1}function m(a){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===a}}function k(a){return function(c){var d=c.nodeName.toLowerCase();return("input"===d||"button"===d)&&c.type===a}}function p(a){return function(c){return"form"in c?c.parentNode&&!1===c.disabled?"label"in c?"label"in c.parentNode?c.parentNode.disabled===a:c.disabled===a:c.isDisabled===a||c.isDisabled!==!a&&Aa(c)===a:c.disabled===a:"label"in c&&c.disabled===a}}function q(a){return f(function(c){return c=
+c,f(function(d,f){for(var e,g=a([],d.length,c),h=g.length;h--;)d[e=g[h]]&&(d[e]=!(f[e]=d[e]))})})}function l(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function r(){}function n(a){for(var c=0,d=a.length,f="";c<d;c++)f+=a[c].value;return f}function t(a,c,d){var f=c.dir,e=c.next,g=e||f,h=d&&"parentNode"===g,m=S++;return c.first?function(c,d,e){for(;c=c[f];)if(1===c.nodeType||h)return a(c,d,e);return!1}:function(c,d,k){var p,A,q,l=[F,m];if(k)for(;c=c[f];){if((1===c.nodeType||h)&&a(c,
d,k))return!0}else for(;c=c[f];)if(1===c.nodeType||h)if(q=c[U]||(c[U]={}),A=q[c.uniqueID]||(q[c.uniqueID]={}),e&&e===c.nodeName.toLowerCase())c=c[f]||c;else{if((p=A[g])&&p[0]===F&&p[1]===m)return l[2]=p[2];if(A[g]=l,l[2]=a(c,d,k))return!0}return!1}}function v(a){return 1<a.length?function(c,d,f){for(var e=a.length;e--;)if(!a[e](c,d,f))return!1;return!0}:a[0]}function x(a,c,d,f,e){for(var g,h=[],m=0,k=a.length,p=null!=c;m<k;m++)(g=a[m])&&(d&&!d(g,f,e)||(h.push(g),p&&c.push(m)));return h}function y(a,
d,e,g,h,m){return g&&!g[U]&&(g=y(g)),h&&!h[U]&&(h=y(h,m)),f(function(f,m,k,p){var A,q=[],l=[],J=m.length,r;if(!(r=f)){r=d||"*";for(var n=k.nodeType?[k]:k,ia=[],t=0,v=n.length;t<v;t++)c(r,n[t],ia);r=ia}r=!a||!f&&d?r:x(r,q,a,k,p);n=e?h||(f?a:J||g)?[]:m:r;if(e&&e(r,n,k,p),g){var qa=x(n,l);g(qa,[],k,p);for(k=qa.length;k--;)(A=qa[k])&&(n[l[k]]=!(r[l[k]]=A))}if(f){if(h||a){if(h){qa=[];for(k=n.length;k--;)(A=n[k])&&qa.push(r[k]=A);h(null,n=[],qa,p)}for(k=n.length;k--;)(A=n[k])&&-1<(qa=h?ca(f,A):q[k])&&(f[qa]=
!(m[qa]=A))}}else n=x(n===m?n.splice(J,n.length):n),h?h(null,m,n,p):Fa.apply(m,n)})}function ka(a){var c,d,f=a.length,e=u.relative[a[0].type];var g=e||u.relative[" "];for(var h=e?1:0,m=t(function(a){return a===c},g,!0),k=t(function(a){return-1<ca(c,a)},g,!0),p=[function(a,d,f){a=!e&&(f||d!==ma)||((c=d).nodeType?m(a,d,f):k(a,d,f));return c=null,a}];h<f;h++)if(g=u.relative[a[h].type])p=[t(v(p),g)];else{if((g=u.filter[a[h].type].apply(null,a[h].matches))[U]){for(d=++h;d<f&&!u.relative[a[d].type];d++);
return y(1<h&&v(p),1<h&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(O,"$1"),g,h<d&&ka(a.slice(h,d)),d<f&&ka(a=a.slice(d)),d<f&&n(a))}p.push(g)}return v(p)}function D(a,d){var e=0<d.length,g=0<a.length,h=function(f,h,m,k,p){var A,q,l=0,J="0",r=f&&[],n=[],ia=ma,t=f||g&&u.find.TAG("*",p),qa=F+=null==ia?1:Math.random()||.1,v=t.length;for(p&&(ma=h===V||h||p);J!==v&&null!=(A=t[J]);J++){if(g&&A){var rb=0;for(h||A.ownerDocument===V||(fa(A),m=!Q);q=a[rb++];)if(q(A,h||V,m)){k.push(A);
break}p&&(F=qa)}e&&((A=!q&&A)&&l--,f&&r.push(A))}if(l+=J,e&&J!==l){for(rb=0;q=d[rb++];)q(r,n,h,m);if(f){if(0<l)for(;J--;)r[J]||n[J]||(n[J]=hb.call(k));n=x(n)}Fa.apply(k,n);p&&!f&&0<n.length&&1<l+d.length&&c.uniqueSort(k)}return p&&(F=qa,ma=ia),r};return e?f(h):h}var I,u,E,C,ma,B,w,V,W,Q,z,N,H,T,U="sizzle"+1*new Date,X=a.document,F=0,S=0,K=d(),ra=d(),ha=d(),G=function(a,c){return a===c&&(w=!0),0},M={}.hasOwnProperty,L=[],hb=L.pop,wa=L.push,Fa=L.push,Oa=L.slice,ca=function(a,c){for(var d=0,f=a.length;d<
f;d++)if(a[d]===c)return d;return-1},P=/[\x20\t\r\n\f]+/g,O=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,R=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,na=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,vb=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,qb=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
Y=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,da={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ba=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,aa=
/^[^{]+\{\s*\[native \w/,fb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,eb=/[+~]/,za=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,Z=function(a,c,d){a="0x"+c-65536;return a!==a||d?c:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320)},sa=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oa=function(a,c){return c?"\x00"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},ja=function(){fa()},Aa=t(function(a){return!0===a.disabled&&("form"in
a||"label"in a)},{dir:"parentNode",next:"legend"});try{Fa.apply(L=Oa.call(X.childNodes),X.childNodes),L[X.childNodes.length].nodeType}catch(pc){Fa={apply:L.length?function(a,c){wa.apply(a,Oa.call(c))}:function(a,c){for(var d=a.length,f=0;a[d++]=c[f++];);a.length=d-1}}}var ea=c.support={};var wb=c.isXML=function(a){a=a&&(a.ownerDocument||a).documentElement;return!!a&&"HTML"!==a.nodeName};var fa=c.setDocument=function(a){var c,d;a=a?a.ownerDocument||a:X;return a!==V&&9===a.nodeType&&a.documentElement?
(V=a,W=V.documentElement,Q=!wb(V),X!==V&&(d=V.defaultView)&&d.top!==d&&(d.addEventListener?d.addEventListener("unload",ja,!1):d.attachEvent&&d.attachEvent("onunload",ja)),ea.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),ea.getElementsByTagName=e(function(a){return a.appendChild(V.createComment("")),!a.getElementsByTagName("*").length}),ea.getElementsByClassName=aa.test(V.getElementsByClassName),ea.getById=e(function(a){return W.appendChild(a).id=U,!V.getElementsByName||
!V.getElementsByName(U).length}),ea.getById?(u.filter.ID=function(a){var c=a.replace(za,Z);return function(a){return a.getAttribute("id")===c}},u.find.ID=function(a,c){if("undefined"!=typeof c.getElementById&&Q)return(a=c.getElementById(a))?[a]:[]}):(u.filter.ID=function(a){var c=a.replace(za,Z);return function(a){return(a="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===c}},u.find.ID=function(a,c){if("undefined"!=typeof c.getElementById&&Q){var d,f=c.getElementById(a);
if(f){if((d=f.getAttributeNode("id"))&&d.value===a)return[f];var e=c.getElementsByName(a);for(c=0;f=e[c++];)if((d=f.getAttributeNode("id"))&&d.value===a)return[f]}return[]}}),u.find.TAG=ea.getElementsByTagName?function(a,c){return"undefined"!=typeof c.getElementsByTagName?c.getElementsByTagName(a):ea.qsa?c.querySelectorAll(a):void 0}:function(a,c){var d=[],f=0;c=c.getElementsByTagName(a);if("*"===a){for(;a=c[f++];)1===a.nodeType&&d.push(a);return d}return c},u.find.CLASS=ea.getElementsByClassName&&
function(a,c){if("undefined"!=typeof c.getElementsByClassName&&Q)return c.getElementsByClassName(a)},N=[],z=[],(ea.qsa=aa.test(V.querySelectorAll))&&(e(function(a){W.appendChild(a).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\r\\' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&z.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||z.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
a.querySelectorAll("[id~="+U+"-]").length||z.push("~=");a.querySelectorAll(":checked").length||z.push(":checked");a.querySelectorAll("a#"+U+"+*").length||z.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var c=V.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&z.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==a.querySelectorAll(":enabled").length&&
z.push(":enabled",":disabled");W.appendChild(a).disabled=!0;2!==a.querySelectorAll(":disabled").length&&z.push(":enabled",":disabled");a.querySelectorAll("*,:x");z.push(",.*:")})),(ea.matchesSelector=aa.test(H=W.matches||W.webkitMatchesSelector||W.mozMatchesSelector||W.oMatchesSelector||W.msMatchesSelector))&&e(function(a){ea.disconnectedMatch=H.call(a,"*");H.call(a,"[s!='']:x");N.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
z=z.length&&new RegExp(z.join("|")),N=N.length&&new RegExp(N.join("|")),c=aa.test(W.compareDocumentPosition),T=c||aa.test(W.contains)?function(a,c){var d=9===a.nodeType?a.documentElement:a;c=c&&c.parentNode;return a===c||!(!c||1!==c.nodeType||!(d.contains?d.contains(c):a.compareDocumentPosition&&16&a.compareDocumentPosition(c)))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1},G=c?function(a,c){if(a===c)return w=!0,0;var d=!a.compareDocumentPosition-!c.compareDocumentPosition;
return d||(1&(d=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1)||!ea.sortDetached&&c.compareDocumentPosition(a)===d?a===V||a.ownerDocument===X&&T(X,a)?-1:c===V||c.ownerDocument===X&&T(X,c)?1:B?ca(B,a)-ca(B,c):0:4&d?-1:1)}:function(a,c){if(a===c)return w=!0,0;var d=0,f=a.parentNode,e=c.parentNode,g=[a],m=[c];if(!f||!e)return a===V?-1:c===V?1:f?-1:e?1:B?ca(B,a)-ca(B,c):0;if(f===e)return h(a,c);for(;a=a.parentNode;)g.unshift(a);for(a=c;a=a.parentNode;)m.unshift(a);for(;g[d]===
m[d];)d++;return d?h(g[d],m[d]):g[d]===X?-1:m[d]===X?1:0},V):V};c.matches=function(a,d){return c(a,null,null,d)};c.matchesSelector=function(a,d){if((a.ownerDocument||a)!==V&&fa(a),d=d.replace(vb,"='$1']"),!(!ea.matchesSelector||!Q||ha[d+" "]||N&&N.test(d)||z&&z.test(d)))try{var f=H.call(a,d);if(f||ea.disconnectedMatch||a.document&&11!==a.document.nodeType)return f}catch(rc){}return 0<c(d,V,null,[a]).length};c.contains=function(a,c){return(a.ownerDocument||a)!==V&&fa(a),T(a,c)};c.attr=function(a,c){(a.ownerDocument||
a)!==V&&fa(a);var d=u.attrHandle[c.toLowerCase()];d=d&&M.call(u.attrHandle,c.toLowerCase())?d(a,c,!Q):void 0;return void 0!==d?d:ea.attributes||!Q?a.getAttribute(c):(d=a.getAttributeNode(c))&&d.specified?d.value:null};c.escape=function(a){return(a+"").replace(sa,oa)};c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};c.uniqueSort=function(a){var c,d=[],f=0,e=0;if(w=!ea.detectDuplicates,B=!ea.sortStable&&a.slice(0),a.sort(G),w){for(;c=a[e++];)c===a[e]&&(f=d.push(e));for(;f--;)a.splice(d[f],
1)}return B=null,a};var la=c.getText=function(a){var c,d="",f=0;if(c=a.nodeType)if(1===c||9===c||11===c){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)d+=la(a)}else{if(3===c||4===c)return a.nodeValue}else for(;c=a[f++];)d+=la(c);return d};(u=c.selectors={cacheLength:50,createPseudo:f,match:da,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=
a[1].replace(za,Z),a[3]=(a[3]||a[4]||a[5]||"").replace(za,Z),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[6]&&a[2];return da.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":d&&qb.test(d)&&(c=Na(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,
c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var c=a.replace(za,Z).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===c}},CLASS:function(a){var c=K[a+" "];return c||(c=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),K(a,function(a){return c.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,d,f){return function(e){e=c.attr(e,a);
return null==e?"!="===d:!d||(e+="","="===d?e===f:"!="===d?e!==f:"^="===d?f&&0===e.indexOf(f):"*="===d?f&&-1<e.indexOf(f):"$="===d?f&&e.slice(-f.length)===f:"~="===d?-1<(" "+e.replace(P," ")+" ").indexOf(f):"|="===d&&(e===f||e.slice(0,f.length+1)===f+"-"))}},CHILD:function(a,c,d,f,e){var g="nth"!==a.slice(0,3),h="last"!==a.slice(-4),m="of-type"===c;return 1===f&&0===e?function(a){return!!a.parentNode}:function(c,d,k){var p,A,q,l;d=g!==h?"nextSibling":"previousSibling";var J=c.parentNode,r=m&&c.nodeName.toLowerCase(),
n=!k&&!m,ia=!1;if(J){if(g){for(;d;){for(q=c;q=q[d];)if(m?q.nodeName.toLowerCase()===r:1===q.nodeType)return!1;var t=d="only"===a&&!t&&"nextSibling"}return!0}if(t=[h?J.firstChild:J.lastChild],h&&n)for(ia=(l=(p=(k=(A=(q=J)[U]||(q[U]={}))[q.uniqueID]||(A[q.uniqueID]={}))[a]||[])[0]===F&&p[1])&&p[2],q=l&&J.childNodes[l];q=++l&&q&&q[d]||(ia=l=0)||t.pop();){if(1===q.nodeType&&++ia&&q===c){k[a]=[F,l,ia];break}}else if(n&&(ia=l=(p=((A=(q=c)[U]||(q[U]={}))[q.uniqueID]||(A[q.uniqueID]={}))[a]||[])[0]===F&&
p[1]),!1===ia)for(;(q=++l&&q&&q[d]||(ia=l=0)||t.pop())&&((m?q.nodeName.toLowerCase()!==r:1!==q.nodeType)||!++ia||(n&&((k=(A=q[U]||(q[U]={}))[q.uniqueID]||(A[q.uniqueID]={}))[a]=[F,ia]),q!==c)););return(ia-=e)===f||0==ia%f&&0<=ia/f}}},PSEUDO:function(a,d){var e,g=u.pseudos[a]||u.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return g[U]?g(d):1<g.length?(e=[a,a,"",d],u.setFilters.hasOwnProperty(a.toLowerCase())?f(function(a,c){for(var f,e=g(a,d),h=e.length;h--;)a[f=ca(a,e[h])]=!(c[f]=
e[h])}):function(a){return g(a,0,e)}):g}},pseudos:{not:f(function(a){var c=[],d=[],e=E(a.replace(O,"$1"));return e[U]?f(function(a,c,d,f){var g;d=e(a,null,f,[]);for(f=a.length;f--;)(g=d[f])&&(a[f]=!(c[f]=g))}):function(a,f,g){return c[0]=a,e(c,null,g,d),c[0]=null,!d.pop()}}),has:f(function(a){return function(d){return 0<c(a,d).length}}),contains:f(function(a){return a=a.replace(za,Z),function(c){return-1<(c.textContent||c.innerText||la(c)).indexOf(a)}}),lang:f(function(a){return Y.test(a||"")||c.error("unsupported lang: "+
a),a=a.replace(za,Z).toLowerCase(),function(c){var d;do if(d=Q?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return(d=d.toLowerCase())===a||0===d.indexOf(a+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(c){var d=a.location&&a.location.hash;return d&&d.slice(1)===c.id},root:function(a){return a===W},focus:function(a){return a===V.activeElement&&(!V.hasFocus||V.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:p(!1),disabled:p(!0),checked:function(a){var c=
a.nodeName.toLowerCase();return"input"===c&&!!a.checked||"option"===c&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!u.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return ba.test(a.nodeName)},button:function(a){var c=a.nodeName.toLowerCase();return"input"===c&&"button"===a.type||"button"===c},
text:function(a){var c;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(c=a.getAttribute("type"))||"text"===c.toLowerCase())},first:q(function(){return[0]}),last:q(function(a,c){return[c-1]}),eq:q(function(a,c,d){return[0>d?d+c:d]}),even:q(function(a,c){for(var d=0;d<c;d+=2)a.push(d);return a}),odd:q(function(a,c){for(var d=1;d<c;d+=2)a.push(d);return a}),lt:q(function(a,c,d){for(c=0>d?d+c:d;0<=--c;)a.push(c);return a}),gt:q(function(a,c,d){for(d=0>d?d+c:d;++d<c;)a.push(d);return a})}}).pseudos.nth=
u.pseudos.eq;for(I in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})u.pseudos[I]=m(I);for(I in{submit:!0,reset:!0})u.pseudos[I]=k(I);r.prototype=u.filters=u.pseudos;u.setFilters=new r;var Na=c.tokenize=function(a,d){var f,e,g,h,m;if(h=ra[a+" "])return d?0:h.slice(0);h=a;var k=[];for(m=u.preFilter;h;){p&&!(f=R.exec(h))||(f&&(h=h.slice(f[0].length)||h),k.push(e=[]));var p=!1;(f=na.exec(h))&&(p=f.shift(),e.push({value:p,type:f[0].replace(O," ")}),h=h.slice(p.length));for(g in u.filter)!(f=da[g].exec(h))||
m[g]&&!(f=m[g](f))||(p=f.shift(),e.push({value:p,type:g,matches:f}),h=h.slice(p.length));if(!p)break}return d?h.length:h?c.error(a):ra(a,k).slice(0)};return E=c.compile=function(a,c){var d,f=[],e=[],g=ha[a+" "];if(!g){c||(c=Na(a));for(d=c.length;d--;)(g=ka(c[d]))[U]?f.push(g):e.push(g);(g=ha(a,D(e,f))).selector=a}return g},C=c.select=function(a,c,d,f){var e,g,h,m,k,p="function"==typeof a&&a,A=!f&&Na(a=p.selector||a);if(d=d||[],1===A.length){if(2<(g=A[0]=A[0].slice(0)).length&&"ID"===(h=g[0]).type&&
9===c.nodeType&&Q&&u.relative[g[1].type]){if(!(c=(u.find.ID(h.matches[0].replace(za,Z),c)||[])[0]))return d;p&&(c=c.parentNode);a=a.slice(g.shift().value.length)}for(e=da.needsContext.test(a)?0:g.length;e--&&(h=g[e],!u.relative[m=h.type]);)if((k=u.find[m])&&(f=k(h.matches[0].replace(za,Z),eb.test(g[0].type)&&l(c.parentNode)||c))){if(g.splice(e,1),!(a=f.length&&n(g)))return Fa.apply(d,f),d;break}}return(p||E(a,A))(f,c,!Q,d,!c||eb.test(a)&&l(c.parentNode)||c),d},ea.sortStable=U.split("").sort(G).join("")===
U,ea.detectDuplicates=!!w,fa(),ea.sortDetached=e(function(a){return 1&a.compareDocumentPosition(V.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,c,d){if(!d)return a.getAttribute(c,"type"===c.toLowerCase()?1:2)}),ea.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||g("value",function(a,c,d){if(!d&&"input"===
a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||g("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,c,d){var f;if(!d)return!0===a[c]?c.toLowerCase():(f=a.getAttributeNode(c))&&f.specified?f.value:null}),c}(d);n.find=Ja;n.expr=Ja.selectors;n.expr[":"]=n.expr.pseudos;n.uniqueSort=n.unique=Ja.uniqueSort;n.text=Ja.getText;n.isXMLDoc=Ja.isXML;n.contains=Ja.contains;
n.escapeSelector=Ja.escape;var va=function(a,c,d){for(var f=[],e=void 0!==d;(a=a[c])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&n(a).is(d))break;f.push(a)}return f},Za=function(a,c){for(var d=[];a;a=a.nextSibling)1===a.nodeType&&a!==c&&d.push(a);return d},ab=n.expr.match.needsContext,Ta=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;n.filter=function(a,c,d){var f=c[0];return d&&(a=":not("+a+")"),1===c.length&&1===f.nodeType?n.find.matchesSelector(f,a)?[f]:[]:n.find.matches(a,n.grep(c,
function(a){return 1===a.nodeType}))};n.fn.extend({find:function(a){var c,d=this.length,f=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(c=0;c<d;c++)if(n.contains(f[c],this))return!0}));var e=this.pushStack([]);for(c=0;c<d;c++)n.find(a,f[c],e);return 1<d?n.uniqueSort(e):e},filter:function(a){return this.pushStack(h(this,a||[],!1))},not:function(a){return this.pushStack(h(this,a||[],!0))},is:function(a){return!!h(this,"string"==typeof a&&ab.test(a)?n(a):a||[],!1).length}});
var ka=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(n.fn.init=function(a,c,d){var f,e;if(!a)return this;if(d=d||W,"string"==typeof a){if(!(f="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:ka.exec(a))||!f[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(f[1]){if(c=c instanceof n?c[0]:c,n.merge(this,n.parseHTML(f[1],c&&c.nodeType?c.ownerDocument||c:P,!0)),Ta.test(f[1])&&n.isPlainObject(c))for(f in c)M(this[f])?this[f](c[f]):this.attr(f,c[f]);return this}return(e=P.getElementById(f[2]))&&
(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):M(a)?void 0!==d.ready?d.ready(a):a(n):n.makeArray(a,this)}).prototype=n.fn;var W=n(P);var ma=/^(?:parents|prev(?:Until|All))/,U={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var c=n(a,this),d=c.length;return this.filter(function(){for(var a=0;a<d;a++)if(n.contains(this,c[a]))return!0})},closest:function(a,c){var d,f=0,e=this.length,g=[],h="string"!=typeof a&&n(a);if(!ab.test(a))for(;f<e;f++)for(d=
this[f];d&&d!==c;d=d.parentNode)if(11>d.nodeType&&(h?-1<h.index(d):1===d.nodeType&&n.find.matchesSelector(d,a))){g.push(d);break}return this.pushStack(1<g.length?n.uniqueSort(g):g)},index:function(a){return a?"string"==typeof a?Ca.call(n(a),this[0]):Ca.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,c){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,c))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});
n.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return va(a,"parentNode")},parentsUntil:function(a,c,d){return va(a,"parentNode",d)},next:function(a){return l(a,"nextSibling")},prev:function(a){return l(a,"previousSibling")},nextAll:function(a){return va(a,"nextSibling")},prevAll:function(a){return va(a,"previousSibling")},nextUntil:function(a,c,d){return va(a,"nextSibling",d)},prevUntil:function(a,c,d){return va(a,"previousSibling",d)},siblings:function(a){return Za((a.parentNode||
{}).firstChild,a)},children:function(a){return Za(a.firstChild)},contents:function(a){return g(a,"iframe")?a.contentDocument:(g(a,"template")&&(a=a.content||a),n.merge([],a.childNodes))}},function(a,c){n.fn[a]=function(d,f){var e=n.map(this,c,d);return"Until"!==a.slice(-5)&&(f=d),f&&"string"==typeof f&&(e=n.filter(f,e)),1<this.length&&(U[a]||n.uniqueSort(e),ma.test(a)&&e.reverse()),this.pushStack(e)}});var ra=/[^\x20\t\r\n\f]+/g;n.Callbacks=function(c){c="string"==typeof c?m(c):n.extend({},c);var d,
f,e,g,h=[],k=[],p=-1,q=function(){g=g||c.once;for(e=d=!0;k.length;p=-1)for(f=k.shift();++p<h.length;)!1===h[p].apply(f[0],f[1])&&c.stopOnFalse&&(p=h.length,f=!1);c.memory||(f=!1);d=!1;g&&(h=f?[]:"")},l={add:function(){return h&&(f&&!d&&(p=h.length-1,k.push(f)),function Rb(d){n.each(d,function(d,f){M(f)?c.unique&&l.has(f)||h.push(f):f&&f.length&&"string"!==a(f)&&Rb(f)})}(arguments),f&&!d&&q()),this},remove:function(){return n.each(arguments,function(a,c){for(var d;-1<(d=n.inArray(c,h,d));)h.splice(d,
1),d<=p&&p--}),this},has:function(a){return a?-1<n.inArray(a,h):0<h.length},empty:function(){return h&&(h=[]),this},disable:function(){return g=k=[],h=f="",this},disabled:function(){return!h},lock:function(){return g=k=[],f||d||(h=f=""),this},locked:function(){return!!g},fireWith:function(a,c){return g||(c=[a,(c=c||[]).slice?c.slice():c],k.push(c),d||q()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!e}};return l};n.extend({Deferred:function(a){var c=[["notify",
"progress",n.Callbacks("memory"),n.Callbacks("memory"),2],["resolve","done",n.Callbacks("once memory"),n.Callbacks("once memory"),0,"resolved"],["reject","fail",n.Callbacks("once memory"),n.Callbacks("once memory"),1,"rejected"]],f="pending",e={state:function(){return f},always:function(){return g.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return n.Deferred(function(d){n.each(c,function(c,f){var e=M(a[f[4]])&&a[f[4]];g[f[1]](function(){var a=
e&&e.apply(this,arguments);a&&M(a.promise)?a.promise().progress(d.notify).done(d.resolve).fail(d.reject):d[f[0]+"With"](this,e?[a]:arguments)})});a=null}).promise()},then:function(a,f,e){function g(a,c,f,e){return function(){var m=this,k=arguments,A=function(){var d;if(!(a<h)){if((d=f.apply(m,k))===c.promise())throw new TypeError("Thenable self-resolution");var A=d&&("object"==_typeof(d)||"function"==typeof d)&&d.then;M(A)?e?A.call(d,g(h,c,q,e),g(h,c,p,e)):(h++,A.call(d,g(h,c,q,e),g(h,c,p,e),g(h,
c,q,c.notifyWith))):(f!==q&&(m=void 0,k=[d]),(e||c.resolveWith)(m,k))}},l=e?A:function(){try{A()}catch(Db){n.Deferred.exceptionHook&&n.Deferred.exceptionHook(Db,l.stackTrace),a+1>=h&&(f!==p&&(m=void 0,k=[Db]),c.rejectWith(m,k))}};a?l():(n.Deferred.getStackHook&&(l.stackTrace=n.Deferred.getStackHook()),d.setTimeout(l))}}var h=0;return n.Deferred(function(d){c[0][3].add(g(0,d,M(e)?e:q,d.notifyWith));c[1][3].add(g(0,d,M(a)?a:q));c[2][3].add(g(0,d,M(f)?f:p))}).promise()},promise:function(a){return null!=
a?n.extend(a,e):e}},g={};return n.each(c,function(a,d){var h=d[2],m=d[5];e[d[1]]=h.add;m&&h.add(function(){f=m},c[3-a][2].disable,c[3-a][3].disable,c[0][2].lock,c[0][3].lock);h.add(d[3].fire);g[d[0]]=function(){return g[d[0]+"With"](this===g?void 0:this,arguments),this};g[d[0]+"With"]=h.fireWith}),e.promise(g),a&&a.call(g,g),g},when:function(a){var c=arguments.length,d=c,f=Array(d),e=ta.call(arguments),g=n.Deferred(),h=function(a){return function(d){f[a]=this;e[a]=1<arguments.length?ta.call(arguments):
d;--c||g.resolveWith(f,e)}};if(1>=c&&(r(a,g.done(h(d)).resolve,g.reject,!c),"pending"===g.state()||M(e[d]&&e[d].then)))return g.then();for(;d--;)r(e[d],h(d),g.reject);return g.promise()}});var vb=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;n.Deferred.exceptionHook=function(a,c){d.console&&d.console.warn&&a&&vb.test(a.name)&&d.console.warn("jQuery.Deferred exception: "+a.message,a.stack,c)};n.readyException=function(a){d.setTimeout(function(){throw a;})};var hb=n.Deferred();n.fn.ready=
function(a){return hb.then(a)["catch"](function(a){n.readyException(a)}),this};n.extend({isReady:!1,readyWait:1,ready:function(a){(!0===a?--n.readyWait:n.isReady)||(n.isReady=!0,!0!==a&&0<--n.readyWait||hb.resolveWith(P,[n]))}});n.ready.then=hb.then;"complete"===P.readyState||"loading"!==P.readyState&&!P.documentElement.doScroll?d.setTimeout(n.ready):(P.addEventListener("DOMContentLoaded",t),d.addEventListener("load",t));var wa=function sb(c,d,f,e,g,h,m){var k=0,p=c.length,q=null==f;if("object"===
a(f))for(k in g=!0,f)sb(c,d,k,f[k],!0,h,m);else if(void 0!==e&&(g=!0,M(e)||(m=!0),q&&(m?(d.call(c,e),d=null):(q=d,d=function(a,c,d){return q.call(n(a),d)})),d))for(;k<p;k++)d(c[k],f,m?e:e.call(c[k],k,d(c[k],f)));return g?c:q?d.call(c):p?d(c[0],f):h},eb=/^-ms-/,Na=/-([a-z])/g,pb=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};x.uid=1;x.prototype={cache:function(a){var c=a[this.expando];return c||(c={},pb(a)&&(a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,
configurable:!0}))),c},set:function(a,c,d){var f;a=this.cache(a);if("string"==typeof c)a[k(c)]=d;else for(f in c)a[k(f)]=c[f];return a},get:function(a,c){return void 0===c?this.cache(a):a[this.expando]&&a[this.expando][k(c)]},access:function(a,c,d){return void 0===c||c&&"string"==typeof c&&void 0===d?this.get(a,c):(this.set(a,c,d),void 0!==d?d:c)},remove:function(a,c){var d=a[this.expando];if(void 0!==d){if(void 0!==c){var f=(c=Array.isArray(c)?c.map(k):(c=k(c))in d?[c]:c.match(ra)||[]).length;for(;f--;)delete d[c[f]]}(void 0===
c||n.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){a=a[this.expando];return void 0!==a&&!n.isEmptyObject(a)}};var F=new x,na=new x,za=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pb=/[A-Z]/g;n.extend({hasData:function(a){return na.hasData(a)||F.hasData(a)},data:function(a,c,d){return na.access(a,c,d)},removeData:function(a,c){na.remove(a,c)},_data:function(a,c,d){return F.access(a,c,d)},_removeData:function(a,c){F.remove(a,c)}});n.fn.extend({data:function(a,
c){var d,f,e,g=this[0],h=g&&g.attributes;if(void 0===a){if(this.length&&(e=na.get(g),1===g.nodeType&&!F.get(g,"hasDataAttrs"))){for(d=h.length;d--;)h[d]&&0===(f=h[d].name).indexOf("data-")&&(f=k(f.slice(5)),y(g,f,e[f]));F.set(g,"hasDataAttrs",!0)}return e}return"object"==_typeof(a)?this.each(function(){na.set(this,a)}):wa(this,function(c){var d;if(g&&void 0===c){if(void 0!==(d=na.get(g,a))||void 0!==(d=y(g,a)))return d}else this.each(function(){na.set(this,a,c)})},null,c,1<arguments.length,null,!0)},
removeData:function(a){return this.each(function(){na.remove(this,a)})}});n.extend({queue:function(a,c,d){var f;if(a)return c=(c||"fx")+"queue",f=F.get(a,c),d&&(!f||Array.isArray(d)?f=F.access(a,c,n.makeArray(d)):f.push(d)),f||[]},dequeue:function(a,c){c=c||"fx";var d=n.queue(a,c),f=d.length,e=d.shift(),g=n._queueHooks(a,c),h=function(){n.dequeue(a,c)};"inprogress"===e&&(e=d.shift(),f--);e&&("fx"===c&&d.unshift("inprogress"),delete g.stop,e.call(a,h,g));!f&&g&&g.empty.fire()},_queueHooks:function(a,
c){var d=c+"queueHooks";return F.get(a,d)||F.access(a,d,{empty:n.Callbacks("once memory").add(function(){F.remove(a,[c+"queue",d])})})}});n.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?n.queue(this[0],a):void 0===c?this:this.each(function(){var d=n.queue(this,a,c);n._queueHooks(this,a);"fx"===a&&"inprogress"!==d[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||
"fx",[])},promise:function(a,c){var d,f=1,e=n.Deferred(),g=this,h=this.length,m=function(){--f||e.resolveWith(g,[g])};"string"!=typeof a&&(c=a,a=void 0);for(a=a||"fx";h--;)(d=F.get(g[h],a+"queueHooks"))&&d.empty&&(f++,d.empty.add(m));return m(),e.promise(c)}});var qb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Z=new RegExp("^(?:([+-])=|)("+qb+")([a-z%]*)$","i"),Aa=["Top","Right","Bottom","Left"],lb=function(a,c){return"none"===(a=c||a).style.display||""===a.style.display&&n.contains(a.ownerDocument,
a)&&"none"===n.css(a,"display")},Eb=function(a,c,d,f){var e,g={};for(e in c)g[e]=a.style[e],a.style[e]=c[e];d=d.apply(a,f||[]);for(e in c)a.style[e]=g[e];return d},Ab={};n.fn.extend({show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){lb(this)?n(this).show():n(this).hide()})}});var Fb=/^(?:checkbox|radio)$/i,La=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Da=/^$|^module$|\/(?:java|ecma)script/i,fa={option:[1,
"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};fa.optgroup=fa.option;fa.tbody=fa.tfoot=fa.colgroup=fa.caption=fa.thead;fa.th=fa.td;var Qb=/<|&#?\w+;/;!function(){var a=P.createDocumentFragment().appendChild(P.createElement("div")),c=P.createElement("input");c.setAttribute("type","radio");c.setAttribute("checked",
"checked");c.setAttribute("name","t");a.appendChild(c);O.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";O.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue}();var Y=P.documentElement,Vb=/^key/,R=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ba=/^([^.]*)(?:\.(.+)|)/;n.event={global:{},add:function(a,c,d,f,e){var g,h,m,k,p,q,l,A,r;if(p=F.get(a))for(d.handler&&(d=(g=d).handler,e=g.selector),e&&n.find.matchesSelector(Y,e),d.guid||(d.guid=n.guid++),
(k=p.events)||(k=p.events={}),(h=p.handle)||(h=p.handle=function(c){return"undefined"!=typeof n&&n.event.triggered!==c.type?n.event.dispatch.apply(a,arguments):void 0}),p=(c=(c||"").match(ra)||[""]).length;p--;){var J=r=(m=ba.exec(c[p])||[])[1];m=(m[2]||"").split(".").sort();J&&(l=n.event.special[J]||{},J=(e?l.delegateType:l.bindType)||J,l=n.event.special[J]||{},q=n.extend({type:J,origType:r,data:f,handler:d,guid:d.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:m.join(".")},
g),(A=k[J])||((A=k[J]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(a,f,m,h)||a.addEventListener&&a.addEventListener(J,h)),l.add&&(l.add.call(a,q),q.handler.guid||(q.handler.guid=d.guid)),e?A.splice(A.delegateCount++,0,q):A.push(q),n.event.global[J]=!0)}},remove:function(a,c,d,f,e){var g,h,m,k,p,q,l,A,r=F.hasData(a)&&F.get(a);if(r&&(k=r.events)){for(p=(c=(c||"").match(ra)||[""]).length;p--;)if(m=ba.exec(c[p])||[],q=A=m[1],l=(m[2]||"").split(".").sort(),q){var J=n.event.special[q]||{};var t=k[q=(f?
J.delegateType:J.bindType)||q]||[];m=m[2]&&new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)");for(h=g=t.length;g--;){var v=t[g];!e&&A!==v.origType||d&&d.guid!==v.guid||m&&!m.test(v.namespace)||f&&f!==v.selector&&("**"!==f||!v.selector)||(t.splice(g,1),v.selector&&t.delegateCount--,J.remove&&J.remove.call(a,v))}h&&!t.length&&(J.teardown&&!1!==J.teardown.call(a,l,r.handle)||n.removeEvent(a,q,r.handle),delete k[q])}else for(q in k)n.event.remove(a,q+c[p],d,f,!0);n.isEmptyObject(k)&&F.remove(a,"handle events")}},
dispatch:function(a){var c=n.event.fix(a),d,f,e,g,h=Array(arguments.length);var m=(F.get(this,"events")||{})[c.type]||[];var k=n.event.special[c.type]||{};h[0]=c;for(d=1;d<arguments.length;d++)h[d]=arguments[d];if(c.delegateTarget=this,!k.preDispatch||!1!==k.preDispatch.call(this,c)){var p=n.event.handlers.call(this,c,m);for(d=0;(e=p[d++])&&!c.isPropagationStopped();)for(c.currentTarget=e.elem,m=0;(g=e.handlers[m++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!c.rnamespace.test(g.namespace)||
(c.handleObj=g,c.data=g.data,void 0!==(f=((n.event.special[g.origType]||{}).handle||g.handler).apply(e.elem,h))&&!1===(c.result=f)&&(c.preventDefault(),c.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,c),c.result}},handlers:function(a,c){var d,f,e,g=[],h=c.delegateCount,m=a.target;if(h&&m.nodeType&&!("click"===a.type&&1<=a.button))for(;m!==this;m=m.parentNode||this)if(1===m.nodeType&&("click"!==a.type||!0!==m.disabled)){var k=[];var p={};for(d=0;d<h;d++)void 0===p[e=(f=c[d]).selector+
" "]&&(p[e]=f.needsContext?-1<n(e,this).index(m):n.find(e,this,null,[m]).length),p[e]&&k.push(f);k.length&&g.push({elem:m,handlers:k})}return m=this,h<c.length&&g.push({elem:m,handlers:c.slice(h)}),g},addProp:function(a,c){Object.defineProperty(n.Event.prototype,a,{enumerable:!0,configurable:!0,get:M(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(c){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,
writable:!0,value:c})}})},fix:function(a){return a[n.expando]?a:new n.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==X()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===X()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&g(this,"input"))return this.click(),!1},_default:function(a){return g(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==
a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};n.removeEvent=function(a,c,d){a.removeEventListener&&a.removeEventListener(c,d)};n.Event=function(a,c){if(!(this instanceof n.Event))return new n.Event(a,c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?N:H,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):
this.type=a;c&&n.extend(this,c);this.timeStamp=a&&a.timeStamp||Date.now();this[n.expando]=!0};n.Event.prototype={constructor:n.Event,isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=N;a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=N;a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=
this.originalEvent;this.isImmediatePropagationStopped=N;a&&!this.isSimulated&&a.stopImmediatePropagation();this.stopPropagation()}};n.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var c=a.button;
return null==a.which&&Vb.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==c&&R.test(a.type)?1&c?1:2&c?3:4&c?2:0:a.which}},n.event.addProp);n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,c){n.event.special[a]={delegateType:c,bindType:c,handle:function(a){var d,f=a.relatedTarget,e=a.handleObj;return f&&(f===this||n.contains(this,f))||(a.type=e.origType,d=e.handler.apply(this,arguments),a.type=c),d}}});n.fn.extend({on:function(a,
c,d,f){return Q(this,a,c,d,f)},one:function(a,c,d,f){return Q(this,a,c,d,f,1)},off:function(a,c,d){var f,e;if(a&&a.preventDefault&&a.handleObj)return f=a.handleObj,n(a.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if("object"==_typeof(a)){for(e in a)this.off(e,c,a[e]);return this}return!1!==c&&"function"!=typeof c||(d=c,c=void 0),!1===d&&(d=H),this.each(function(){n.event.remove(this,a,d,c)})}});var xa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,
Ua=/<script|<style|<link/i,Oa=/checked\s*(?:[^=]|=\s*.checked.)/i,Fa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;n.extend({htmlPrefilter:function(a){return a.replace(xa,"<$1></$2>")},clone:function(a,c,d){var f,e,g=a.cloneNode(!0),h=n.contains(a.ownerDocument,a);if(!(O.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a))){var m=B(g);var k=0;for(f=(e=B(a)).length;k<f;k++){var p=e[k],q=m[k],l=q.nodeName.toLowerCase();"input"===l&&Fb.test(p.type)?q.checked=p.checked:"input"!==l&&"textarea"!==
l||(q.defaultValue=p.defaultValue)}}if(c)if(d)for(e=e||B(a),m=m||B(g),k=0,f=e.length;k<f;k++)sa(e[k],m[k]);else sa(a,g);return 0<(m=B(g,"script")).length&&I(m,!h&&B(a,"script")),g},cleanData:function(a){for(var c,d,f,e=n.event.special,g=0;void 0!==(d=a[g]);g++)if(pb(d)){if(c=d[F.expando]){if(c.events)for(f in c.events)e[f]?n.event.remove(d,f):n.removeEvent(d,f,c.handle);d[F.expando]=void 0}d[na.expando]&&(d[na.expando]=void 0)}}});n.fn.extend({detach:function(a){return ca(this,a,!0)},remove:function(a){return ca(this,
a)},text:function(a){return wa(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return K(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||z(this,a).appendChild(a)})},prepend:function(){return K(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=z(this,a);c.insertBefore(a,
c.firstChild)}})},before:function(){return K(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return K(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,c=0;null!=(a=this[c]);c++)1===a.nodeType&&(n.cleanData(B(a,!1)),a.textContent="");return this},clone:function(a,c){return a=null!=a&&a,c=null==c?a:c,this.map(function(){return n.clone(this,a,c)})},html:function(a){return wa(this,
function(a){var c=this[0]||{},d=0,f=this.length;if(void 0===a&&1===c.nodeType)return c.innerHTML;if("string"==typeof a&&!Ua.test(a)&&!fa[(La.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d<f;d++)1===(c=this[d]||{}).nodeType&&(n.cleanData(B(c,!1)),c.innerHTML=a);c=0}catch(oc){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return K(this,arguments,function(c){var d=this.parentNode;0>n.inArray(this,a)&&(n.cleanData(B(this)),d&&d.replaceChild(c,
this))},a)}});n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){n.fn[a]=function(a){for(var d=[],f=n(a),e=f.length-1,g=0;g<=e;g++)a=g===e?this:this.clone(!0),n(f[g])[c](a),Sa.apply(d,a.get());return this.pushStack(d)}});var fb=new RegExp("^("+qb+")(?!px)[a-z%]+$","i"),mb=function(a){var c=a.ownerDocument.defaultView;return c&&c.opener||(c=d),c.getComputedStyle(a)},Sb=new RegExp(Aa.join("|"),"i");!function(){function a(){if(k){m.style.cssText=
"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";k.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";Y.appendChild(m).appendChild(k);var a=d.getComputedStyle(k);c="1%"!==a.top;h=12===Math.round(parseFloat(a.marginLeft));k.style.right="60%";g=36===Math.round(parseFloat(a.right));f=36===Math.round(parseFloat(a.width));k.style.position="absolute";e=36===k.offsetWidth||"absolute";Y.removeChild(m);
k=null}}var c,f,e,g,h,m=P.createElement("div"),k=P.createElement("div");k.style&&(k.style.backgroundClip="content-box",k.cloneNode(!0).style.backgroundClip="",O.clearCloneStyle="content-box"===k.style.backgroundClip,n.extend(O,{boxSizingReliable:function(){return a(),f},pixelBoxStyles:function(){return a(),g},pixelPosition:function(){return a(),c},reliableMarginLeft:function(){return a(),h},scrollboxSize:function(){return a(),e}}))}();var Wb=/^(none|table(?!-c[ea]).+)/,Gb=/^--/,wb={position:"absolute",
visibility:"hidden",display:"block"},Hb={letterSpacing:"0",fontWeight:"400"},Cb=["Webkit","Moz","ms"],Bb=P.createElement("div").style;n.extend({cssHooks:{opacity:{get:function(a,c){if(c)return a=T(a,"opacity"),""===a?"1":a}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(a,c,d,f){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,g,h,
m=k(c),p=Gb.test(c),q=a.style;if(p||(c=pa(m)),h=n.cssHooks[c]||n.cssHooks[m],void 0===d)return h&&"get"in h&&void 0!==(e=h.get(a,!1,f))?e:q[c];"string"==(g=_typeof(d))&&(e=Z.exec(d))&&e[1]&&(d=C(a,c,e),g="number");null!=d&&d===d&&("number"===g&&(d+=e&&e[3]||(n.cssNumber[m]?"":"px")),O.clearCloneStyle||""!==d||0!==c.indexOf("background")||(q[c]="inherit"),h&&"set"in h&&void 0===(d=h.set(a,d,f))||(p?q.setProperty(c,d):q[c]=d))}},css:function(a,c,d,f){var e,g,h,m=k(c);return Gb.test(c)||(c=pa(m)),(h=
n.cssHooks[c]||n.cssHooks[m])&&"get"in h&&(e=h.get(a,!0,d)),void 0===e&&(e=T(a,c,f)),"normal"===e&&c in Hb&&(e=Hb[c]),""===d||d?(g=parseFloat(e),!0===d||isFinite(g)?g||0:e):e}});n.each(["height","width"],function(a,c){n.cssHooks[c]={get:function(a,d,f){if(d)return!Wb.test(n.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?aa(a,c,f):Eb(a,wb,function(){return aa(a,c,f)})},set:function(a,d,f){var e,g=mb(a),h="border-box"===n.css(a,"boxSizing",!1,g);f=f&&oa(a,c,f,h,g);return h&&
O.scrollboxSize()===g.position&&(f-=Math.ceil(a["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(g[c])-oa(a,c,"border",!1,g)-.5)),f&&(e=Z.exec(d))&&"px"!==(e[3]||"px")&&(a.style[c]=d,d=n.css(a,c)),da(a,d,f)}}});n.cssHooks.marginLeft=ha(O.reliableMarginLeft,function(a,c){if(c)return(parseFloat(T(a,"marginLeft"))||a.getBoundingClientRect().left-Eb(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"});n.each({margin:"",padding:"",border:"Width"},function(a,c){n.cssHooks[a+c]=
{expand:function(d){var f=0,e={};for(d="string"==typeof d?d.split(" "):[d];4>f;f++)e[a+Aa[f]+c]=d[f]||d[f-2]||d[0];return e}};"margin"!==a&&(n.cssHooks[a+c].set=da)});n.fn.extend({css:function(a,c){return wa(this,function(a,c,d){var f,e={},g=0;if(Array.isArray(c)){d=mb(a);for(f=c.length;g<f;g++)e[c[g]]=n.css(a,c[g],!1,d);return e}return void 0!==d?n.style(a,c,d):n.css(a,c)},a,c,1<arguments.length)}});n.Tween=G;G.prototype={constructor:G,init:function(a,c,d,f,e,g){this.elem=a;this.prop=d;this.easing=
e||n.easing._default;this.options=c;this.start=this.now=this.cur();this.end=f;this.unit=g||(n.cssNumber[d]?"":"px")},cur:function(){var a=G.propHooks[this.prop];return a&&a.get?a.get(this):G.propHooks._default.get(this)},run:function(a){var c,d=G.propHooks[this.prop];return this.options.duration?this.pos=c=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=c=a,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,
this),d&&d.set?d.set(this):G.propHooks._default.set(this),this}};G.prototype.init.prototype=G.prototype;G.propHooks={_default:{get:function(a){var c;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(c=n.css(a.elem,a.prop,""))&&"auto"!==c?c:0},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}};G.propHooks.scrollTop=
G.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"};n.fx=G.prototype.init;n.fx.step={};var cb,nb,Xb=/^(?:toggle|show|hide)$/,Yb=/queueHooks$/;n.Animation=n.extend(u,{tweeners:{"*":[function(a,c){var d=this.createTween(a,c);return C(d.elem,a,Z.exec(c),d),d}]},tweener:function(a,c){M(a)?(c=a,a=["*"]):a=a.match(ra);for(var d,f=0,e=a.length;f<e;f++)d=
a[f],u.tweeners[d]=u.tweeners[d]||[],u.tweeners[d].unshift(c)},prefilters:[function(a,c,d){var f,e,g,h,m,k,p,q="width"in c||"height"in c,l=this,r={},A=a.style,t=a.nodeType&&lb(a),v=F.get(a,"fxshow");d.queue||(null==(h=n._queueHooks(a,"fx")).unqueued&&(h.unqueued=0,m=h.empty.fire,h.empty.fire=function(){h.unqueued||m()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--;n.queue(a,"fx").length||h.empty.fire()})}));for(f in c)if(e=c[f],Xb.test(e)){if(delete c[f],g=g||"toggle"===e,e===
(t?"hide":"show")){if("show"!==e||!v||void 0===v[f])continue;t=!0}r[f]=v&&v[f]||n.style(a,f)}if((c=!n.isEmptyObject(c))||!n.isEmptyObject(r))for(f in q&&1===a.nodeType&&(d.overflow=[A.overflow,A.overflowX,A.overflowY],null==(k=v&&v.display)&&(k=F.get(a,"display")),"none"===(p=n.css(a,"display"))&&(k?p=k:(E([a],!0),k=a.style.display||k,p=n.css(a,"display"),E([a]))),("inline"===p||"inline-block"===p&&null!=k)&&"none"===n.css(a,"float")&&(c||(l.done(function(){A.display=k}),null==k&&(p=A.display,k="none"===
p?"":p)),A.display="inline-block")),d.overflow&&(A.overflow="hidden",l.always(function(){A.overflow=d.overflow[0];A.overflowX=d.overflow[1];A.overflowY=d.overflow[2]})),c=!1,r)c||(v?"hidden"in v&&(t=v.hidden):v=F.access(a,"fxshow",{display:k}),g&&(v.hidden=!t),t&&E([a],!0),l.done(function(){t||E([a]);F.remove(a,"fxshow");for(f in r)n.style(a,f,r[f])})),c=Wa(t?v[f]:0,f,l),f in v||(v[f]=c.start,t&&(c.end=c.start,c.start=0))}],prefilter:function(a,c){c?u.prefilters.unshift(a):u.prefilters.push(a)}});
n.speed=function(a,c,d){var f=a&&"object"==_typeof(a)?n.extend({},a):{complete:d||!d&&c||M(a)&&a,duration:a,easing:d&&c||c&&!M(c)&&c};return n.fx.off?f.duration=0:"number"!=typeof f.duration&&(f.duration in n.fx.speeds?f.duration=n.fx.speeds[f.duration]:f.duration=n.fx.speeds._default),null!=f.queue&&!0!==f.queue||(f.queue="fx"),f.old=f.complete,f.complete=function(){M(f.old)&&f.old.call(this);f.queue&&n.dequeue(this,f.queue)},f};n.fn.extend({fadeTo:function(a,c,d,f){return this.filter(lb).css("opacity",
0).show().end().animate({opacity:c},a,d,f)},animate:function(a,c,d,f){var e=n.isEmptyObject(a),g=n.speed(c,d,f);c=function(){var c=u(this,n.extend({},a),g);(e||F.get(this,"finish"))&&c.stop(!0)};return c.finish=c,e||!1===g.queue?this.each(c):this.queue(g.queue,c)},stop:function(a,c,d){var f=function(a){var c=a.stop;delete a.stop;c(d)};return"string"!=typeof a&&(d=c,c=a,a=void 0),c&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var c=!0,e=null!=a&&a+"queueHooks",g=n.timers,h=F.get(this);if(e)h[e]&&
h[e].stop&&f(h[e]);else for(e in h)h[e]&&h[e].stop&&Yb.test(e)&&f(h[e]);for(e=g.length;e--;)g[e].elem!==this||null!=a&&g[e].queue!==a||(g[e].anim.stop(d),c=!1,g.splice(e,1));!c&&d||n.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var c=F.get(this),d=c[a+"queue"];var f=c[a+"queueHooks"];var e=n.timers,g=d?d.length:0;c.finish=!0;n.queue(this,a,[]);f&&f.stop&&f.stop.call(this,!0);for(f=e.length;f--;)e[f].elem===this&&e[f].queue===a&&(e[f].anim.stop(!0),e.splice(f,
1));for(f=0;f<g;f++)d[f]&&d[f].finish&&d[f].finish.call(this);delete c.finish})}});n.each(["toggle","show","hide"],function(a,c){var d=n.fn[c];n.fn[c]=function(a,f,e){return null==a||"boolean"==typeof a?d.apply(this,arguments):this.animate(Qa(c,!0),a,f,e)}});n.each({slideDown:Qa("show"),slideUp:Qa("hide"),slideToggle:Qa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){n.fn[a]=function(a,d,f){return this.animate(c,a,d,f)}});n.timers=[];n.fx.tick=
function(){var a,c=0,d=n.timers;for(cb=Date.now();c<d.length;c++)(a=d[c])()||d[c]!==a||d.splice(c--,1);d.length||n.fx.stop();cb=void 0};n.fx.timer=function(a){n.timers.push(a);n.fx.start()};n.fx.interval=13;n.fx.start=function(){nb||(nb=!0,Pa())};n.fx.stop=function(){nb=null};n.fx.speeds={slow:600,fast:200,_default:400};n.fn.delay=function(a,c){return a=n.fx?n.fx.speeds[a]||a:a,c=c||"fx",this.queue(c,function(c,f){var e=d.setTimeout(c,a);f.stop=function(){d.clearTimeout(e)}})};(function(){var a=P.createElement("input"),
c=P.createElement("select").appendChild(P.createElement("option"));a.type="checkbox";O.checkOn=""!==a.value;O.optSelected=c.selected;(a=P.createElement("input")).value="t";a.type="radio";O.radioValue="t"===a.value})();var ib=n.expr.attrHandle;n.fn.extend({attr:function(a,c){return wa(this,n.attr,a,c,1<arguments.length)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}});n.extend({attr:function(a,c,d){var f,e,g=a.nodeType;if(3!==g&&8!==g&&2!==g)return"undefined"==typeof a.getAttribute?
n.prop(a,c,d):(1===g&&n.isXMLDoc(a)||(e=n.attrHooks[c.toLowerCase()]||(n.expr.match.bool.test(c)?Zb:void 0)),void 0!==d?null===d?void n.removeAttr(a,c):e&&"set"in e&&void 0!==(f=e.set(a,d,c))?f:(a.setAttribute(c,d+""),d):e&&"get"in e&&null!==(f=e.get(a,c))?f:null==(f=n.find.attr(a,c))?void 0:f)},attrHooks:{type:{set:function(a,c){if(!O.radioValue&&"radio"===c&&g(a,"input")){var d=a.value;return a.setAttribute("type",c),d&&(a.value=d),c}}}},removeAttr:function(a,c){var d=0,f=c&&c.match(ra);if(f&&1===
a.nodeType)for(;c=f[d++];)a.removeAttribute(c)}});var Zb={set:function(a,c,d){return!1===c?n.removeAttr(a,d):a.setAttribute(d,d),d}};n.each(n.expr.match.bool.source.match(/\w+/g),function(a,c){var d=ib[c]||n.find.attr;ib[c]=function(a,c,f){var e,g,h=c.toLowerCase();return f||(g=ib[h],ib[h]=e,e=null!=d(a,c,f)?h:null,ib[h]=g),e}});var $b=/^(?:input|select|textarea|button)$/i,ac=/^(?:a|area)$/i;n.fn.extend({prop:function(a,c){return wa(this,n.prop,a,c,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||
a]})}});n.extend({prop:function(a,c,d){var f,e,g=a.nodeType;if(3!==g&&8!==g&&2!==g)return 1===g&&n.isXMLDoc(a)||(c=n.propFix[c]||c,e=n.propHooks[c]),void 0!==d?e&&"set"in e&&void 0!==(f=e.set(a,d,c))?f:a[c]=d:e&&"get"in e&&null!==(f=e.get(a,c))?f:a[c]},propHooks:{tabIndex:{get:function(a){var c=n.find.attr(a,"tabindex");return c?parseInt(c,10):$b.test(a.nodeName)||ac.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});O.optSelected||(n.propHooks.selected={get:function(a){a=
a.parentNode;return a&&a.parentNode&&a.parentNode.selectedIndex,null},set:function(a){a=a.parentNode;a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex)}});n.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){n.propFix[this.toLowerCase()]=this});n.fn.extend({addClass:function(a){var c,d,f,e,g,h,m,k=0;if(M(a))return this.each(function(c){n(this).addClass(a.call(this,c,Ba(this)))});if((c=Xa(a)).length)for(;d=
this[k++];)if(e=Ba(d),f=1===d.nodeType&&" "+ja(e)+" "){for(h=0;g=c[h++];)0>f.indexOf(" "+g+" ")&&(f+=g+" ");e!==(m=ja(f))&&d.setAttribute("class",m)}return this},removeClass:function(a){var c,d,f,e,g,h,m,k=0;if(M(a))return this.each(function(c){n(this).removeClass(a.call(this,c,Ba(this)))});if(!arguments.length)return this.attr("class","");if((c=Xa(a)).length)for(;d=this[k++];)if(e=Ba(d),f=1===d.nodeType&&" "+ja(e)+" "){for(h=0;g=c[h++];)for(;-1<f.indexOf(" "+g+" ");)f=f.replace(" "+g+" "," ");e!==
(m=ja(f))&&d.setAttribute("class",m)}return this},toggleClass:function(a,c){var d=_typeof(a),f="string"===d||Array.isArray(a);return"boolean"==typeof c&&f?c?this.addClass(a):this.removeClass(a):M(a)?this.each(function(d){n(this).toggleClass(a.call(this,d,Ba(this),c),c)}):this.each(function(){var c,e;if(f){var g=0;var h=n(this);for(e=Xa(a);c=e[g++];)h.hasClass(c)?h.removeClass(c):h.addClass(c)}else void 0!==a&&"boolean"!==d||((c=Ba(this))&&F.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",
c||!1===a?"":F.get(this,"__className__")||""))})},hasClass:function(a){var c,d=0;for(a=" "+a+" ";c=this[d++];)if(1===c.nodeType&&-1<(" "+ja(Ba(c))+" ").indexOf(a))return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var c,d,f,e=this[0];if(arguments.length)return f=M(a),this.each(function(d){var e;1===this.nodeType&&(null==(e=f?a.call(this,d,n(this).val()):a)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),(c=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()])&&
"set"in c&&void 0!==c.set(this,e,"value")||(this.value=e))});if(e)return(c=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()])&&"get"in c&&void 0!==(d=c.get(e,"value"))?d:"string"==typeof(d=e.value)?d.replace(bc,""):null==d?"":d}});n.extend({valHooks:{option:{get:function(a){var c=n.find.attr(a,"value");return null!=c?c:ja(n.text(a))}},select:{get:function(a){var c,d,f=a.options,e=a.selectedIndex,h="select-one"===a.type,m=h?null:[],k=h?e+1:f.length;for(d=0>e?k:h?e:0;d<k;d++)if(!(!(c=f[d]).selected&&
d!==e||c.disabled||c.parentNode.disabled&&g(c.parentNode,"optgroup"))){if(a=n(c).val(),h)return a;m.push(a)}return m},set:function(a,c){var d,f,e=a.options;c=n.makeArray(c);for(var g=e.length;g--;)((f=e[g]).selected=-1<n.inArray(n.valHooks.option.get(f),c))&&(d=!0);return d||(a.selectedIndex=-1),c}}}});n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,c){if(Array.isArray(c))return a.checked=-1<n.inArray(n(a).val(),c)}};O.checkOn||(n.valHooks[this].get=function(a){return null===
a.getAttribute("value")?"on":a.value})});O.focusin="onfocusin"in d;var Ib=/^(?:focusinfocus|focusoutblur)$/,Jb=function(a){a.stopPropagation()};n.extend(n.event,{trigger:function(a,c,f,e){var g,h,m,k,p,q,l=[f||P],r=ua.call(a,"type")?a.type:a;var t=ua.call(a,"namespace")?a.namespace.split("."):[];if(g=q=h=f=f||P,3!==f.nodeType&&8!==f.nodeType&&!Ib.test(r+n.event.triggered)&&(-1<r.indexOf(".")&&(r=(t=r.split(".")).shift(),t.sort()),m=0>r.indexOf(":")&&"on"+r,a=a[n.expando]?a:new n.Event(r,"object"==
_typeof(a)&&a),a.isTrigger=e?2:3,a.namespace=t.join("."),a.rnamespace=a.namespace?new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=f),c=null==c?[a]:n.makeArray(c,[a]),p=n.event.special[r]||{},e||!p.trigger||!1!==p.trigger.apply(f,c))){if(!e&&!p.noBubble&&!ya(f)){var v=p.delegateType||r;for(Ib.test(v+r)||(g=g.parentNode);g;g=g.parentNode)l.push(g),h=g;h===(f.ownerDocument||P)&&l.push(h.defaultView||h.parentWindow||d)}for(t=0;(g=l[t++])&&!a.isPropagationStopped();)q=
g,a.type=1<t?v:p.bindType||r,(k=(F.get(g,"events")||{})[a.type]&&F.get(g,"handle"))&&k.apply(g,c),(k=m&&g[m])&&k.apply&&pb(g)&&(a.result=k.apply(g,c),!1===a.result&&a.preventDefault());return a.type=r,e||a.isDefaultPrevented()||p._default&&!1!==p._default.apply(l.pop(),c)||!pb(f)||m&&M(f[r])&&!ya(f)&&((h=f[m])&&(f[m]=null),n.event.triggered=r,a.isPropagationStopped()&&q.addEventListener(r,Jb),f[r](),a.isPropagationStopped()&&q.removeEventListener(r,Jb),n.event.triggered=void 0,h&&(f[m]=h)),a.result}},
simulate:function(a,c,d){a=n.extend(new n.Event,d,{type:a,isSimulated:!0});n.event.trigger(a,null,c)}});n.fn.extend({trigger:function(a,c){return this.each(function(){n.event.trigger(a,c,this)})},triggerHandler:function(a,c){var d=this[0];if(d)return n.event.trigger(a,c,d,!0)}});O.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,c){var d=function(a){n.event.simulate(c,a.target,n.event.fix(a))};n.event.special[c]={setup:function(){var f=this.ownerDocument||this,e=F.access(f,c);e||f.addEventListener(a,
d,!0);F.access(f,c,(e||0)+1)},teardown:function(){var f=this.ownerDocument||this,e=F.access(f,c)-1;e?F.access(f,c,e):(f.removeEventListener(a,d,!0),F.remove(f,c))}}});var jb=d.location,Kb=Date.now(),xb=/\?/;n.parseXML=function(a){if(!a||"string"!=typeof a)return null;try{var c=(new d.DOMParser).parseFromString(a,"text/xml")}catch(ia){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+a),c};var Tb=/\[\]$/,Lb=/\r?\n/g,cc=/^(?:submit|button|image|reset|file)$/i,
dc=/^(?:input|select|textarea|keygen)/i;n.param=function(a,c){var d,f=[],e=function(a,c){c=M(c)?c():c;f[f.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(Array.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(d in a)db(d,a[d],c,e);return f.join("&")};n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):
this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&dc.test(this.nodeName)&&!cc.test(a)&&(this.checked||!Fb.test(a))}).map(function(a,c){a=n(this).val();return null==a?null:Array.isArray(a)?n.map(a,function(a){return{name:c.name,value:a.replace(Lb,"\r\n")}}):{name:c.name,value:a.replace(Lb,"\r\n")}}).get()}});var ec=/%20/g,fc=/#.*$/,gc=/([?&])_=[^&]*/,hc=/^(.*?):[ \t]*([^\r\n]*)$/gm,ic=/^(?:GET|HEAD)$/,jc=/^\/\//,Mb={},tb={},Nb="*/".concat("*"),yb=P.createElement("a");
yb.href=jb.href;n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jb.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(jb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",
json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,c){return c?Ya(Ya(a,n.ajaxSettings),c):Ya(n.ajaxSettings,a)},ajaxPrefilter:Ga(Mb),ajaxTransport:Ga(tb),ajax:function(a,c){function f(a,c,f,h){var p,q,y,ka=c;if(!J){J=!0;m&&d.clearTimeout(m);e=void 0;g=h||"";I.readyState=0<a?4:0;h=200<=a&&300>a||304===a;if(f){var D=l;for(var E=I,B,ma,C,W,w=D.contents,Q=D.dataTypes;"*"===Q[0];)Q.shift(),
void 0===B&&(B=D.mimeType||E.getResponseHeader("Content-Type"));if(B)for(ma in w)if(w[ma]&&w[ma].test(B)){Q.unshift(ma);break}if(Q[0]in f)C=Q[0];else{for(ma in f){if(!Q[0]||D.converters[ma+" "+Q[0]]){C=ma;break}W||(W=ma)}C=C||W}f=C?(C!==Q[0]&&Q.unshift(C),f[C]):void 0;D=f}a:{f=l;B=D;ma=I;C=h;var z,U,N;D={};E=f.dataTypes.slice();if(E[1])for(z in f.converters)D[z.toLowerCase()]=f.converters[z];for(W=E.shift();W;)if(f.responseFields[W]&&(ma[f.responseFields[W]]=B),!N&&C&&f.dataFilter&&(B=f.dataFilter(B,
f.dataType)),N=W,W=E.shift())if("*"===W)W=N;else if("*"!==N&&N!==W){if(!(z=D[N+" "+W]||D["* "+W]))for(T in D)if((U=T.split(" "))[1]===W&&(z=D[N+" "+U[0]]||D["* "+U[0]])){!0===z?z=D[T]:!0!==D[T]&&(W=U[0],E.unshift(U[1]));break}if(!0!==z)if(z&&f["throws"])B=z(B);else try{B=z(B)}catch(Ub){var T={state:"parsererror",error:z?Ub:"No conversion from "+N+" to "+W};break a}}T={state:"success",data:B}}D=T;h?(l.ifModified&&((y=I.getResponseHeader("Last-Modified"))&&(n.lastModified[u]=y),(y=I.getResponseHeader("etag"))&&
(n.etag[u]=y)),204===a||"HEAD"===l.type?ka="nocontent":304===a?ka="notmodified":(ka=D.state,p=D.data,h=!(q=D.error))):(q=ka,!a&&ka||(ka="error",0>a&&(a=0)));I.status=a;I.statusText=(c||ka)+"";h?v.resolveWith(r,[p,ka,I]):v.rejectWith(r,[I,ka,q]);I.statusCode(A);A=void 0;k&&t.trigger(h?"ajaxSuccess":"ajaxError",[I,l,h?p:q]);x.fireWith(r,[I,ka]);k&&(t.trigger("ajaxComplete",[I,l]),--n.active||n.event.trigger("ajaxStop"))}}"object"==_typeof(a)&&(c=a,a=void 0);c=c||{};var e,g,h,m,k,p,q,l=n.ajaxSetup({},
c),r=l.context||l,t=l.context&&(r.nodeType||r.jquery)?n(r):n.event,v=n.Deferred(),x=n.Callbacks("once memory"),A=l.statusCode||{},y={},ka={},D="canceled",I={readyState:0,getResponseHeader:function(a){var c;if(J){if(!h)for(h={};c=hc.exec(g);)h[c[1].toLowerCase()]=c[2];c=h[a.toLowerCase()]}return null==c?null:c},getAllResponseHeaders:function(){return J?g:null},setRequestHeader:function(a,c){return null==J&&(a=ka[a.toLowerCase()]=ka[a.toLowerCase()]||a,y[a]=c),this},overrideMimeType:function(a){return null==
J&&(l.mimeType=a),this},statusCode:function(a){var c;if(a)if(J)I.always(a[I.status]);else for(c in a)A[c]=[A[c],a[c]];return this},abort:function(a){a=a||D;return e&&e.abort(a),f(0,a),this}};if(v.promise(I),l.url=((a||l.url||jb.href)+"").replace(jc,jb.protocol+"//"),l.type=c.method||c.type||l.method||l.type,l.dataTypes=(l.dataType||"*").toLowerCase().match(ra)||[""],null==l.crossDomain){a=P.createElement("a");try{a.href=l.url,a.href=a.href,l.crossDomain=yb.protocol+"//"+yb.host!=a.protocol+"//"+a.host}catch(ub){l.crossDomain=
!0}}if(l.data&&l.processData&&"string"!=typeof l.data&&(l.data=n.param(l.data,l.traditional)),gb(Mb,l,c,I),J)return I;(k=n.event&&l.global)&&0==n.active++&&n.event.trigger("ajaxStart");l.type=l.type.toUpperCase();l.hasContent=!ic.test(l.type);var u=l.url.replace(fc,"");l.hasContent?l.data&&l.processData&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&(l.data=l.data.replace(ec,"+")):(q=l.url.slice(u.length),l.data&&(l.processData||"string"==typeof l.data)&&(u+=(xb.test(u)?"&":
"?")+l.data,delete l.data),!1===l.cache&&(u=u.replace(gc,"$1"),q=(xb.test(u)?"&":"?")+"_="+Kb++ +q),l.url=u+q);l.ifModified&&(n.lastModified[u]&&I.setRequestHeader("If-Modified-Since",n.lastModified[u]),n.etag[u]&&I.setRequestHeader("If-None-Match",n.etag[u]));(l.data&&l.hasContent&&!1!==l.contentType||c.contentType)&&I.setRequestHeader("Content-Type",l.contentType);I.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Nb+"; q=0.01":
""):l.accepts["*"]);for(p in l.headers)I.setRequestHeader(p,l.headers[p]);if(l.beforeSend&&(!1===l.beforeSend.call(r,I,l)||J))return I.abort();if(D="abort",x.add(l.complete),I.done(l.success),I.fail(l.error),e=gb(tb,l,c,I)){if(I.readyState=1,k&&t.trigger("ajaxSend",[I,l]),J)return I;l.async&&0<l.timeout&&(m=d.setTimeout(function(){I.abort("timeout")},l.timeout));try{var J=!1;e.send(y,f)}catch(ub){if(J)throw ub;f(-1,ub)}}else f(-1,"No Transport");return I},getJSON:function(a,c,d){return n.get(a,c,
d,"json")},getScript:function(a,c){return n.get(a,void 0,c,"script")}});n.each(["get","post"],function(a,c){n[c]=function(a,d,f,e){return M(d)&&(e=e||f,f=d,d=void 0),n.ajax(n.extend({url:a,type:c,dataType:e,data:d,success:f},n.isPlainObject(a)&&a))}});n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};n.fn.extend({wrapAll:function(a){var c;return this[0]&&(M(a)&&(a=a.call(this[0])),c=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&
c.insertBefore(this[0]),c.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return M(a)?this.each(function(c){n(this).wrapInner(a.call(this,c))}):this.each(function(){var c=n(this),d=c.contents();d.length?d.wrapAll(a):c.append(a)})},wrap:function(a){var c=M(a);return this.each(function(d){n(this).wrapAll(c?a.call(this,d):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){n(this).replaceWith(this.childNodes)}),
this}});n.expr.pseudos.hidden=function(a){return!n.expr.pseudos.visible(a)};n.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)};n.ajaxSettings.xhr=function(){try{return new d.XMLHttpRequest}catch(A){}};var kc={0:200,1223:204},kb=n.ajaxSettings.xhr();O.cors=!!kb&&"withCredentials"in kb;O.ajax=kb=!!kb;n.ajaxTransport(function(a){var c,f;if(O.cors||kb&&!a.crossDomain)return{send:function(e,g){var h,m=a.xhr();if(m.open(a.type,a.url,a.async,a.username,
a.password),a.xhrFields)for(h in a.xhrFields)m[h]=a.xhrFields[h];a.mimeType&&m.overrideMimeType&&m.overrideMimeType(a.mimeType);a.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(h in e)m.setRequestHeader(h,e[h]);c=function(a){return function(){c&&(c=f=m.onload=m.onerror=m.onabort=m.ontimeout=m.onreadystatechange=null,"abort"===a?m.abort():"error"===a?"number"!=typeof m.status?g(0,"error"):g(m.status,m.statusText):g(kc[m.status]||m.status,m.statusText,"text"!==(m.responseType||
"text")||"string"!=typeof m.responseText?{binary:m.response}:{text:m.responseText},m.getAllResponseHeaders()))}};m.onload=c();f=m.onerror=m.ontimeout=c("error");void 0!==m.onabort?m.onabort=f:m.onreadystatechange=function(){4===m.readyState&&d.setTimeout(function(){c&&f()})};c=c("abort");try{m.send(a.hasContent&&a.data||null)}catch(sb){if(c)throw sb;}},abort:function(){c&&c()}}});n.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)});n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}});n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});n.ajaxTransport("script",function(a){if(a.crossDomain){var c,d;return{send:function(f,e){c=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",d=function(a){c.remove();d=null;a&&e("error"===a.type?404:200,a.type)});P.head.appendChild(c[0])},abort:function(){d&&d()}}}});
var Ob=[],zb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ob.pop()||n.expando+"_"+Kb++;return this[a]=!0,a}});n.ajaxPrefilter("json jsonp",function(a,c,f){var e,g,h,m=!1!==a.jsonp&&(zb.test(a.url)?"url":"string"==typeof a.data&&0===(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&zb.test(a.data)&&"data");if(m||"jsonp"===a.dataTypes[0])return e=a.jsonpCallback=M(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,m?a[m]=a[m].replace(zb,"$1"+e):!1!==
a.jsonp&&(a.url+=(xb.test(a.url)?"&":"?")+a.jsonp+"="+e),a.converters["script json"]=function(){return h||n.error(e+" was not called"),h[0]},a.dataTypes[0]="json",g=d[e],d[e]=function(){h=arguments},f.always(function(){void 0===g?n(d).removeProp(e):d[e]=g;a[e]&&(a.jsonpCallback=c.jsonpCallback,Ob.push(e));h&&M(g)&&g(h[0]);h=g=void 0}),"script"});O.createHTMLDocument=function(){var a=P.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}();
n.parseHTML=function(a,c,d){if("string"!=typeof a)return[];"boolean"==typeof c&&(d=c,c=!1);var f,e,g;return c||(O.createHTMLDocument?((f=(c=P.implementation.createHTMLDocument("")).createElement("base")).href=P.location.href,c.head.appendChild(f)):c=P),e=Ta.exec(a),g=!d&&[],e?[c.createElement(e[1])]:(e=D([a],c,g),g&&g.length&&n(g).remove(),n.merge([],e.childNodes))};n.fn.load=function(a,c,d){var f,e,g,h=this,m=a.indexOf(" ");return-1<m&&(f=ja(a.slice(m)),a=a.slice(0,m)),M(c)?(d=c,c=void 0):c&&"object"==
_typeof(c)&&(e="POST"),0<h.length&&n.ajax({url:a,type:e||"GET",dataType:"html",data:c}).done(function(a){g=arguments;h.html(f?n("<div>").append(n.parseHTML(a)).find(f):a)}).always(d&&function(a,c){h.each(function(){d.apply(this,g||[a.responseText,c,a])})}),this};n.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,c){n.fn[c]=function(a){return this.on(c,a)}});n.expr.pseudos.animated=function(a){return n.grep(n.timers,function(c){return a===c.elem}).length};
n.offset={setOffset:function(a,c,d){var f,e,g,h=n.css(a,"position"),m=n(a),k={};"static"===h&&(a.style.position="relative");var p=m.offset();var q=n.css(a,"top");var l=n.css(a,"left");("absolute"===h||"fixed"===h)&&-1<(q+l).indexOf("auto")?(g=(f=m.position()).top,e=f.left):(g=parseFloat(q)||0,e=parseFloat(l)||0);M(c)&&(c=c.call(a,d,n.extend({},p)));null!=c.top&&(k.top=c.top-p.top+g);null!=c.left&&(k.left=c.left-p.left+e);"using"in c?c.using.call(a,k):m.css(k)}};n.fn.extend({offset:function(a){if(arguments.length)return void 0===
a?this:this.each(function(c){n.offset.setOffset(this,a,c)});var c,d,f=this[0];if(f)return f.getClientRects().length?(c=f.getBoundingClientRect(),d=f.ownerDocument.defaultView,{top:c.top+d.pageYOffset,left:c.left+d.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var a,c=this[0],d={top:0,left:0};if("fixed"===n.css(c,"position"))var f=c.getBoundingClientRect();else{f=this.offset();var e=c.ownerDocument;for(a=c.offsetParent||e.documentElement;a&&(a===e.body||a===e.documentElement)&&"static"===
n.css(a,"position");)a=a.parentNode;a&&a!==c&&1===a.nodeType&&((d=n(a).offset()).top+=n.css(a,"borderTopWidth",!0),d.left+=n.css(a,"borderLeftWidth",!0))}return{top:f.top-d.top-n.css(c,"marginTop",!0),left:f.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===n.css(a,"position");)a=a.offsetParent;return a||Y})}});n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d="pageYOffset"===c;n.fn[a]=function(f){return wa(this,
function(a,f,e){var g;if(ya(a)?g=a:9===a.nodeType&&(g=a.defaultView),void 0===e)return g?g[c]:a[f];g?g.scrollTo(d?g.pageXOffset:e,d?e:g.pageYOffset):a[f]=e},a,f,arguments.length)}});n.each(["top","left"],function(a,c){n.cssHooks[c]=ha(O.pixelPosition,function(a,d){if(d)return d=T(a,c),fb.test(d)?n(a).position()[c]+"px":d})});n.each({Height:"height",Width:"width"},function(a,c){n.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,f){n.fn[f]=function(e,g){var h=arguments.length&&(d||"boolean"!=
typeof e),m=d||(!0===e||!0===g?"margin":"border");return wa(this,function(c,d,e){var g;return ya(c)?0===f.indexOf("outer")?c["inner"+a]:c.document.documentElement["client"+a]:9===c.nodeType?(g=c.documentElement,Math.max(c.body["scroll"+a],g["scroll"+a],c.body["offset"+a],g["offset"+a],g["client"+a])):void 0===e?n.css(c,d,m):n.style(c,d,e,m)},c,h?e:void 0,h)}})});n.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(a,c){n.fn[c]=function(a,d){return 0<arguments.length?this.on(c,null,a,d):this.trigger(c)}});n.fn.extend({hover:function(a,c){return this.mouseenter(a).mouseleave(c||a)}});n.fn.extend({bind:function(a,c,d){return this.on(a,null,c,d)},unbind:function(a,c){return this.off(a,null,c)},delegate:function(a,c,d,f){return this.on(c,a,d,f)},undelegate:function(a,c,d){return 1===arguments.length?this.off(a,"**"):this.off(c,a||"**",d)}});n.proxy=function(a,c){var d,f,e;if("string"==typeof c&&(d=a[c],
c=a,a=d),M(a))return f=ta.call(arguments,2),e=function(){return a.apply(c||this,f.concat(ta.call(arguments)))},e.guid=a.guid=a.guid||n.guid++,e};n.holdReady=function(a){a?n.readyWait++:n.ready(!0)};n.isArray=Array.isArray;n.parseJSON=JSON.parse;n.nodeName=g;n.isFunction=M;n.isWindow=ya;n.camelCase=k;n.type=a;n.now=Date.now;n.isNumeric=function(a){var c=n.type(a);return("number"===c||"string"===c)&&!isNaN(a-parseFloat(a))};"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});
var lc=d.jQuery,mc=d.$;return n.noConflict=function(a){return d.$===n&&(d.$=mc),a&&d.jQuery===n&&(d.jQuery=lc),n},e||(d.jQuery=d.$=n),n});
!function(d,e){"function"==typeof define&&define.amd?define(["jquery"],function(c){return e(c)}):"object"==("undefined"===typeof exports?"undefined":_typeof(exports))?module.exports=e(require("jquery")):e(jQuery)}(void 0,function(d){function e(a){this.$container;this.constraints=null;this.__$tooltip;this.__init(a)}function c(a,c){var f=!0;return d.each(a,function(d,e){return void 0===c[d]||a[d]!==c[d]?(f=!1,!1):void 0}),f}function a(a){var c=a.attr("id");return(c=c?h.window.document.getElementById(c):
null)?c===a[0]:d.contains(h.window.document.body,a[0])}var f={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,
mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999},g="undefined"!=typeof window?window:null,h={hasTouchCapability:!(!g||!("ontouchstart"in g||g.DocumentTouch&&g.document instanceof g.DocumentTouch||g.navigator.maxTouchPoints)),hasTransitions:function(){if(!g)return!1;var a=(g.document.body||g.document.documentElement).style,c="transition",d=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof a[c])return!0;
c=c.charAt(0).toUpperCase()+c.substr(1);for(var f=0;f<d.length;f++)if("string"==typeof a[d[f]+c])return!0;return!1}(),IE:!1,semVer:"4.2.5",window:g},l=function(){this.__$emitterPrivate=d({});this.__$emitterPublic=d({});this.__instancesLatestArr=[];this.__plugins={};this._env=h};l.prototype={__bridge:function(a,c,e){if(!c[e]){var g=function(){};g.prototype=a;var h=new g;h.__init&&h.__init(c);d.each(a,function(a,d){0!=a.indexOf("__")&&(c[a]?f.debug&&console.log("The "+a+" method of the "+e+" plugin conflicts with another plugin or native methods"):
(c[a]=function(){return h[a].apply(h,Array.prototype.slice.apply(arguments))},c[a].bridged=h))});c[e]=h}return this},__setWindow:function(a){return h.window=a,this},_getRuler:function(a){return new e(a)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,
Array.prototype.slice.apply(arguments)),this},_plugin:function(a){if("string"==typeof a){var c=null;return 0<a.indexOf(".")?c=this.__plugins[a]:d.each(this.__plugins,function(d,f){return f.name.substring(f.name.length-a.length-1)=="."+a?(c=f,!1):void 0}),c}if(0>a.name.indexOf("."))throw Error("Plugins must be namespaced");return this.__plugins[a.name]=a,a.core&&this.__bridge(a.core,this,a.name),this},_trigger:function(){var a=Array.prototype.slice.apply(arguments);return"string"==typeof a[0]&&(a[0]=
{type:a[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,a),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,a),this},instances:function(a){var c=[];return d(a||".tooltipstered").each(function(){var a=d(this),f=a.data("tooltipster-ns");f&&d.each(f,function(d,f){c.push(a.data(f))})}),c},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,
Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(a){return d((a?a+" ":"")+".tooltipstered").toArray()},setDefaults:function(a){return d.extend(f,a),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}};d.tooltipster=new l;d.Tooltipster=function(a,c){this.__callbacks={close:[],
open:[]};this.__closingTime;this.__Content;this.__contentBcr;this.__destroyed=!1;this.__$emitterPrivate=d({});this.__$emitterPublic=d({});this.__enabled=!0;this.__garbageCollector;this.__Geometry;this.__lastPosition;this.__namespace="tooltipster-"+Math.round(1E6*Math.random());this.__options;this.__$originParents;this.__pointerIsOverOrigin=!1;this.__previousThemes=[];this.__state="closed";this.__timeouts={close:[],open:null};this.__touchEvents=[];this.__tracker=null;this._$origin;this._$tooltip;this.__init(a,
c)};d.Tooltipster.prototype={__init:function(a,c){var e=this;if(e._$origin=d(a),e.__options=d.extend(!0,{},f,c),e.__optionsFormat(),!h.IE||h.IE>=e.__options.IEmin){a=null;if(void 0===e._$origin.data("tooltipster-initialTitle")&&(a=e._$origin.attr("title"),void 0===a&&(a=null),e._$origin.data("tooltipster-initialTitle",a)),null!==e.__options.content)e.__contentSet(e.__options.content);else{var g;(c=e._$origin.attr("data-tooltip-content"))&&(g=d(c));g&&g[0]?e.__contentSet(g.first()):e.__contentSet(a)}e._$origin.removeAttr("title").addClass("tooltipstered");
e.__prepareOrigin();e.__prepareGC();d.each(e.__options.plugins,function(a,c){e._plug(c)});h.hasTouchCapability&&d(h.window.document.body).on("touchmove."+e.__namespace+"-triggerOpen",function(a){e._touchRecordEvent(a)});e._on("created",function(){e.__prepareTooltip()})._on("repositioned",function(a){e.__lastPosition=a.position})}else e.__options.disabled=!0},__contentInsert:function(){var a=this._$tooltip.find(".tooltipster-content"),c=this.__Content;return this._trigger({type:"format",content:this.__Content,
format:function(a){c=a}}),this.__options.functionFormat&&(c=this.__options.functionFormat.call(this,this,{origin:this._$origin[0]},this.__Content)),"string"!=typeof c||this.__options.contentAsHTML?a.empty().append(c):a.text(c),this},__contentSet:function(a){return a instanceof d&&this.__options.contentCloning&&(a=a.clone(!0)),this.__Content=a,this._trigger({type:"updated",content:a}),this},__destroyError:function(){throw Error("This tooltip has been destroyed and cannot execute your method call.");
},__geometry:function(){var a=this._$origin,c=this._$origin.is("area");if(c){var f=this._$origin.parent().attr("name");a=d('img[usemap="#'+f+'"]')}var e=a[0].getBoundingClientRect(),g=d(h.window.document),l=d(h.window);f=a;var k={available:{document:null,window:null},document:{size:{height:g.height(),width:g.width()}},window:{scroll:{left:h.window.scrollX||h.window.document.documentElement.scrollLeft,top:h.window.scrollY||h.window.document.documentElement.scrollTop},size:{height:l.height(),width:l.width()}},
origin:{fixedLineage:!1,offset:{},size:{height:e.bottom-e.top,width:e.right-e.left},usemapImage:c?a[0]:null,windowOffset:{bottom:e.bottom,left:e.left,right:e.right,top:e.top}}};if(c){c=this._$origin.attr("shape");var x=this._$origin.attr("coords");if(x&&(x=x.split(","),d.map(x,function(a,c){x[c]=parseInt(a)})),"default"!=c)switch(c){case "circle":c=x[0];a=x[1];e=x[2];k.origin.size.height=2*e;k.origin.size.width=k.origin.size.height;k.origin.windowOffset.left+=c-e;k.origin.windowOffset.top+=a-e;break;
case "rect":c=x[0];a=x[1];e=x[2];k.origin.size.height=x[3]-a;k.origin.size.width=e-c;k.origin.windowOffset.left+=c;k.origin.windowOffset.top+=a;break;case "poly":g=e=a=c=0;l="even";for(var y=0;y<x.length;y++){var C=x[y];"even"==l?(C>e&&(e=C,0===y&&(c=e)),c>C&&(c=C),l="odd"):(C>g&&(g=C,1==y&&(a=g)),a>C&&(a=C),l="even")}k.origin.size.height=g-a;k.origin.size.width=e-c;k.origin.windowOffset.left+=c;k.origin.windowOffset.top+=a}}this._trigger({type:"geometry",edit:function(a){k.origin.size.height=a.height;
k.origin.windowOffset.left=a.left;k.origin.windowOffset.top=a.top;k.origin.size.width=a.width},geometry:{height:k.origin.size.height,left:k.origin.windowOffset.left,top:k.origin.windowOffset.top,width:k.origin.size.width}});k.origin.windowOffset.right=k.origin.windowOffset.left+k.origin.size.width;k.origin.windowOffset.bottom=k.origin.windowOffset.top+k.origin.size.height;k.origin.offset.left=k.origin.windowOffset.left+k.window.scroll.left;k.origin.offset.top=k.origin.windowOffset.top+k.window.scroll.top;
k.origin.offset.bottom=k.origin.offset.top+k.origin.size.height;k.origin.offset.right=k.origin.offset.left+k.origin.size.width;k.available.document={bottom:{height:k.document.size.height-k.origin.offset.bottom,width:k.document.size.width},left:{height:k.document.size.height,width:k.origin.offset.left},right:{height:k.document.size.height,width:k.document.size.width-k.origin.offset.right},top:{height:k.origin.offset.top,width:k.document.size.width}};for(k.available.window={bottom:{height:Math.max(k.window.size.height-
Math.max(k.origin.windowOffset.bottom,0),0),width:k.window.size.width},left:{height:k.window.size.height,width:Math.max(k.origin.windowOffset.left,0)},right:{height:k.window.size.height,width:Math.max(k.window.size.width-Math.max(k.origin.windowOffset.right,0),0)},top:{height:Math.max(k.origin.windowOffset.top,0),width:k.window.size.width}};"html"!=f[0].tagName.toLowerCase();){if("fixed"==f.css("position")){k.origin.fixedLineage=!0;break}f=f.parent()}return k},__optionsFormat:function(){return"number"==
typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),"number"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),"number"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),"string"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=
d(h.window.document.body):"string"==typeof this.__options.parent&&(this.__options.parent=d(this.__options.parent)),"hover"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):"click"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var c=this;return c.__options.selfDestruction?
c.__garbageCollector=setInterval(function(){var f=(new Date).getTime();c.__touchEvents=d.grep(c.__touchEvents,function(a,c){return 6E4<f-a.time});a(c._$origin)||c.close(function(){c.destroy()})},2E4):clearInterval(c.__garbageCollector),c},__prepareOrigin:function(){var a=this;if(a._$origin.off("."+a.__namespace+"-triggerOpen"),h.hasTouchCapability&&a._$origin.on("touchstart."+a.__namespace+"-triggerOpen touchend."+a.__namespace+"-triggerOpen touchcancel."+a.__namespace+"-triggerOpen",function(c){a._touchRecordEvent(c)}),
a.__options.triggerOpen.click||a.__options.triggerOpen.tap&&h.hasTouchCapability){var c="";a.__options.triggerOpen.click&&(c+="click."+a.__namespace+"-triggerOpen ");a.__options.triggerOpen.tap&&h.hasTouchCapability&&(c+="touchend."+a.__namespace+"-triggerOpen");a._$origin.on(c,function(c){a._touchIsMeaningfulEvent(c)&&a._open(c)})}if(a.__options.triggerOpen.mouseenter||a.__options.triggerOpen.touchstart&&h.hasTouchCapability)c="",a.__options.triggerOpen.mouseenter&&(c+="mouseenter."+a.__namespace+
"-triggerOpen "),a.__options.triggerOpen.touchstart&&h.hasTouchCapability&&(c+="touchstart."+a.__namespace+"-triggerOpen"),a._$origin.on(c,function(c){!a._touchIsTouchEvent(c)&&a._touchIsEmulatedEvent(c)||(a.__pointerIsOverOrigin=!0,a._openShortly(c))});if(a.__options.triggerClose.mouseleave||a.__options.triggerClose.touchleave&&h.hasTouchCapability)c="",a.__options.triggerClose.mouseleave&&(c+="mouseleave."+a.__namespace+"-triggerOpen "),a.__options.triggerClose.touchleave&&h.hasTouchCapability&&
(c+="touchend."+a.__namespace+"-triggerOpen touchcancel."+a.__namespace+"-triggerOpen"),a._$origin.on(c,function(c){a._touchIsMeaningfulEvent(c)&&(a.__pointerIsOverOrigin=!1)});return a},__prepareTooltip:function(){var a=this,c=a.__options.interactive?"auto":"";return a._$tooltip.attr("id",a.__namespace).css({"pointer-events":c,zIndex:a.__options.zIndex}),d.each(a.__previousThemes,function(c,d){a._$tooltip.removeClass(d)}),d.each(a.__options.theme,function(c,d){a._$tooltip.addClass(d)}),a.__previousThemes=
d.merge([],a.__options.theme),a},__scrollHandler:function(c){if(this.__options.triggerClose.scroll)this._close(c);else if(a(this._$origin)&&a(this._$tooltip)){var f=null;if(c.target===h.window.document)this.__Geometry.origin.fixedLineage||this.__options.repositionOnScroll&&this.reposition(c);else{f=this.__geometry();var e=!1;("fixed"!=this._$origin.css("position")&&this.__$originParents.each(function(a,c){a=d(c);var g=a.css("overflow-x"),h=a.css("overflow-y");if("visible"!=g||"visible"!=h)if(c=c.getBoundingClientRect(),
"visible"!=g&&(f.origin.windowOffset.left<c.left||f.origin.windowOffset.right>c.right)||"visible"!=h&&(f.origin.windowOffset.top<c.top||f.origin.windowOffset.bottom>c.bottom))return e=!0,!1;return"fixed"==a.css("position")?!1:void 0}),e)?this._$tooltip.css("visibility","hidden"):(this._$tooltip.css("visibility","visible"),this.__options.repositionOnScroll)?this.reposition(c):this._$tooltip.css({left:this.__lastPosition.coord.left+(f.origin.offset.left-this.__Geometry.origin.offset.left),top:this.__lastPosition.coord.top+
(f.origin.offset.top-this.__Geometry.origin.offset.top)})}this._trigger({type:"scroll",event:c,geo:f})}return this},__stateSet:function(a){return this.__state=a,this._trigger({type:"state",state:a}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,d.each(this.__timeouts.close,function(a,c){clearTimeout(c)}),this.__timeouts.close=[],this},__trackerStart:function(){var d=this,f=d._$tooltip.find(".tooltipster-content");return d.__options.trackTooltip&&
(d.__contentBcr=f[0].getBoundingClientRect()),d.__tracker=setInterval(function(){if(a(d._$origin)&&a(d._$tooltip)){if(d.__options.trackOrigin){var e=d.__geometry(),g=!1;c(e.origin.size,d.__Geometry.origin.size)&&(d.__Geometry.origin.fixedLineage?c(e.origin.windowOffset,d.__Geometry.origin.windowOffset)&&(g=!0):c(e.origin.offset,d.__Geometry.origin.offset)&&(g=!0));g||(d.__options.triggerClose.mouseleave?d._close():d.reposition())}d.__options.trackTooltip&&(e=f[0].getBoundingClientRect(),e.height===
d.__contentBcr.height&&e.width===d.__contentBcr.width||(d.reposition(),d.__contentBcr=e))}else d._close()},d.__options.trackerInterval),d},_close:function(a,c,f){var e=this,g=!0;if(e._trigger({type:"close",event:a,stop:function(){g=!1}}),g||f){c&&e.__callbacks.close.push(c);e.__callbacks.open=[];e.__timeoutsClear();var m=function(){d.each(e.__callbacks.close,function(c,d){d.call(e,e,{event:a,origin:e._$origin[0]})});e.__callbacks.close=[]};if("closed"!=e.__state){if(c=!0,f=(new Date).getTime()+e.__options.animationDuration[1],
"disappearing"==e.__state&&f>e.__closingTime&&0<e.__options.animationDuration[1]&&(c=!1),c)e.__closingTime=f,"disappearing"!=e.__state&&e.__stateSet("disappearing"),c=function(){clearInterval(e.__tracker);e._trigger({type:"closing",event:a});e._$tooltip.off("."+e.__namespace+"-triggerClose").removeClass("tooltipster-dying");d(h.window).off("."+e.__namespace+"-triggerClose");e.__$originParents.each(function(a,c){d(c).off("scroll."+e.__namespace+"-triggerClose")});e.__$originParents=null;d(h.window.document.body).off("."+
e.__namespace+"-triggerClose");e._$origin.off("."+e.__namespace+"-triggerClose");e._off("dismissable");e.__stateSet("closed");e._trigger({type:"after",event:a});e.__options.functionAfter&&e.__options.functionAfter.call(e,e,{event:a,origin:e._$origin[0]});m()},h.hasTransitions?(e._$tooltip.css({"-moz-animation-duration":e.__options.animationDuration[1]+"ms","-ms-animation-duration":e.__options.animationDuration[1]+"ms","-o-animation-duration":e.__options.animationDuration[1]+"ms","-webkit-animation-duration":e.__options.animationDuration[1]+
"ms","animation-duration":e.__options.animationDuration[1]+"ms","transition-duration":e.__options.animationDuration[1]+"ms"}),e._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),0<e.__options.animationDuration[1]&&e._$tooltip.delay(e.__options.animationDuration[1]),e._$tooltip.queue(c)):e._$tooltip.stop().fadeOut(e.__options.animationDuration[1],c)}else m()}return e},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),
this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(c,f){var e=this;if(!e.__destroying&&a(e._$origin)&&e.__enabled){var g=!0;if("closed"==e.__state&&(e._trigger({type:"before",event:c,stop:function(){g=!1}}),g&&e.__options.functionBefore&&(g=e.__options.functionBefore.call(e,e,{event:c,
origin:e._$origin[0]}))),!1!==g&&null!==e.__Content){f&&e.__callbacks.open.push(f);e.__callbacks.close=[];e.__timeoutsClear();var m=function(){"stable"!=e.__state&&e.__stateSet("stable");d.each(e.__callbacks.open,function(a,c){c.call(e,e,{origin:e._$origin[0],tooltip:e._$tooltip[0]})});e.__callbacks.open=[]};if("closed"!==e.__state)f=0,"disappearing"===e.__state?(e.__stateSet("appearing"),h.hasTransitions?(e._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),0<e.__options.animationDuration[0]&&
e._$tooltip.delay(e.__options.animationDuration[0]),e._$tooltip.queue(m)):e._$tooltip.stop().fadeIn(m)):"stable"==e.__state&&m();else{if(e.__stateSet("appearing"),f=e.__options.animationDuration[0],e.__contentInsert(),e.reposition(c,!0),h.hasTransitions?(e._$tooltip.addClass("tooltipster-"+e.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":e.__options.animationDuration[0]+"ms","-ms-animation-duration":e.__options.animationDuration[0]+"ms","-o-animation-duration":e.__options.animationDuration[0]+
"ms","-webkit-animation-duration":e.__options.animationDuration[0]+"ms","animation-duration":e.__options.animationDuration[0]+"ms","transition-duration":e.__options.animationDuration[0]+"ms"}),setTimeout(function(){"closed"!=e.__state&&(e._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),0<e.__options.animationDuration[0]&&e._$tooltip.delay(e.__options.animationDuration[0]),e._$tooltip.queue(m))},0)):e._$tooltip.css("display","none").fadeIn(e.__options.animationDuration[0],
m),e.__trackerStart(),d(h.window).on("resize."+e.__namespace+"-triggerClose",function(a){var c=d(document.activeElement);(c.is("input")||c.is("textarea"))&&d.contains(e._$tooltip[0],c[0])||e.reposition(a)}).on("scroll."+e.__namespace+"-triggerClose",function(a){e.__scrollHandler(a)}),e.__$originParents=e._$origin.parents(),e.__$originParents.each(function(a,c){d(c).on("scroll."+e.__namespace+"-triggerClose",function(a){e.__scrollHandler(a)})}),e.__options.triggerClose.mouseleave||e.__options.triggerClose.touchleave&&
h.hasTouchCapability){e._on("dismissable",function(a){a.dismissable?a.delay?(q=setTimeout(function(){e._close(a.event)},a.delay),e.__timeouts.close.push(q)):e._close(a):clearTimeout(q)});c=e._$origin;var l="",k="",q=null;e.__options.interactive&&(c=c.add(e._$tooltip));e.__options.triggerClose.mouseleave&&(l+="mouseenter."+e.__namespace+"-triggerClose ",k+="mouseleave."+e.__namespace+"-triggerClose ");e.__options.triggerClose.touchleave&&h.hasTouchCapability&&(l+="touchstart."+e.__namespace+"-triggerClose",
k+="touchend."+e.__namespace+"-triggerClose touchcancel."+e.__namespace+"-triggerClose");c.on(k,function(a){!e._touchIsTouchEvent(a)&&e._touchIsEmulatedEvent(a)||e._trigger({delay:("mouseleave"==a.type?e.__options.delay:e.__options.delayTouch)[1],dismissable:!0,event:a,type:"dismissable"})}).on(l,function(a){!e._touchIsTouchEvent(a)&&e._touchIsEmulatedEvent(a)||e._trigger({dismissable:!1,event:a,type:"dismissable"})})}e.__options.triggerClose.originClick&&e._$origin.on("click."+e.__namespace+"-triggerClose",
function(a){e._touchIsTouchEvent(a)||e._touchIsEmulatedEvent(a)||e._close(a)});(e.__options.triggerClose.click||e.__options.triggerClose.tap&&h.hasTouchCapability)&&setTimeout(function(){if("closed"!=e.__state){var a="",c=d(h.window.document.body);e.__options.triggerClose.click&&(a+="click."+e.__namespace+"-triggerClose ");e.__options.triggerClose.tap&&h.hasTouchCapability&&(a+="touchend."+e.__namespace+"-triggerClose");c.on(a,function(a){e._touchIsMeaningfulEvent(a)&&(e._touchRecordEvent(a),e.__options.interactive&&
d.contains(e._$tooltip[0],a.target)||e._close(a))});e.__options.triggerClose.tap&&h.hasTouchCapability&&c.on("touchstart."+e.__namespace+"-triggerClose",function(a){e._touchRecordEvent(a)})}},0);e._trigger("ready");e.__options.functionReady&&e.__options.functionReady.call(e,e,{origin:e._$origin[0],tooltip:e._$tooltip[0]})}0<e.__options.timer&&(q=setTimeout(function(){e._close()},e.__options.timer+f),e.__timeouts.close.push(q))}}return e},_openShortly:function(a){var c=this,d=!0;if("stable"!=c.__state&&
"appearing"!=c.__state&&!c.__timeouts.open&&(c._trigger({type:"start",event:a,stop:function(){d=!1}}),d)){var f=0==a.type.indexOf("touch")?c.__options.delayTouch:c.__options.delay;f[0]?c.__timeouts.open=setTimeout(function(){c.__timeouts.open=null;c.__pointerIsOverOrigin&&c._touchIsMeaningfulEvent(a)?(c._trigger("startend"),c._open(a)):c._trigger("startcancel")},f[0]):(c._trigger("startend"),c._open(a))}return c},_optionsExtract:function(a,c){var f=this,e=d.extend(!0,{},c),g=f.__options[a];return g||
(g={},d.each(c,function(a,c){c=f.__options[a];void 0!==c&&(g[a]=c)})),d.each(e,function(a,c){void 0!==g[a]&&("object"!=_typeof(c)||c instanceof Array||null==c||"object"!=_typeof(g[a])||g[a]instanceof Array||null==g[a]?e[a]=g[a]:d.extend(e[a],g[a]))}),e},_plug:function(a){var c=d.tooltipster._plugin(a);if(!c)throw Error('The "'+a+'" plugin is not defined');return c.instance&&d.tooltipster.__bridge(c.instance,this,c.name),this},_touchIsEmulatedEvent:function(a){for(var c=!1,d=(new Date).getTime(),f=
this.__touchEvents.length-1;0<=f;f--){var e=this.__touchEvents[f];if(!(500>d-e.time))break;e.target===a.target&&(c=!0)}return c},_touchIsMeaningfulEvent:function(a){return this._touchIsTouchEvent(a)&&!this._touchSwiped(a.target)||!this._touchIsTouchEvent(a)&&!this._touchIsEmulatedEvent(a)},_touchIsTouchEvent:function(a){return 0==a.type.indexOf("touch")},_touchRecordEvent:function(a){return this._touchIsTouchEvent(a)&&(a.time=(new Date).getTime(),this.__touchEvents.push(a)),this},_touchSwiped:function(a){for(var c=
!1,d=this.__touchEvents.length-1;0<=d;d--){var f=this.__touchEvents[d];if("touchmove"==f.type){c=!0;break}if("touchstart"==f.type&&a===f.target)break}return c},_trigger:function(){var a=Array.prototype.slice.apply(arguments);return"string"==typeof a[0]&&(a[0]={type:a[0]}),a[0].instance=this,a[0].origin=this._$origin?this._$origin[0]:null,a[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,a),d.tooltipster._trigger.apply(d.tooltipster,a),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,
a),this},_unplug:function(a){var c=this;if(c[a]){var f=d.tooltipster._plugin(a);f.instance&&d.each(f.instance,function(d,f){c[d]&&c[d].bridged===c[a]&&delete c[d]});c[a].__destroy&&c[a].__destroy();delete c[a]}return c},close:function(a){return this.__destroyed?this.__destroyError():this._close(null,a),this},content:function(a){var c=this;if(void 0===a)return c.__Content;if(c.__destroyed)c.__destroyError();else if(c.__contentSet(a),null!==c.__Content){if("closed"!==c.__state&&(c.__contentInsert(),
c.reposition(),c.__options.updateAnimation))if(h.hasTransitions){var d=c.__options.updateAnimation;c._$tooltip.addClass("tooltipster-update-"+d);setTimeout(function(){"closed"!=c.__state&&c._$tooltip.removeClass("tooltipster-update-"+d)},1E3)}else c._$tooltip.fadeTo(200,.5,function(){"closed"!=c.__state&&c._$tooltip.fadeTo(200,1)})}else c._close();return c},destroy:function(){var a=this;if(a.__destroyed)a.__destroyError();else{"closed"!=a.__state?a.option("animationDuration",0)._close(null,null,!0):
a.__timeoutsClear();a._trigger("destroy");a.__destroyed=!0;a._$origin.removeData(a.__namespace).off("."+a.__namespace+"-triggerOpen");d(h.window.document.body).off("."+a.__namespace+"-triggerOpen");var c=a._$origin.data("tooltipster-ns");c&&(1===c.length?(c=null,"previous"==a.__options.restoration?c=a._$origin.data("tooltipster-initialTitle"):"current"==a.__options.restoration&&(c="string"==typeof a.__Content?a.__Content:d("<div></div>").append(a.__Content).html()),c&&a._$origin.attr("title",c),a._$origin.removeClass("tooltipstered"),
a._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")):(c=d.grep(c,function(c,d){return c!==a.__namespace}),a._$origin.data("tooltipster-ns",c)));a._trigger("destroyed");a._off();a.off();a.__Content=null;a.__$emitterPrivate=null;a.__$emitterPublic=null;a.__options.parent=null;a._$origin=null;a._$tooltip=null;d.tooltipster.__instancesLatestArr=d.grep(d.tooltipster.__instancesLatestArr,function(c,d){return a!==c});clearInterval(a.__garbageCollector)}return a},disable:function(){return this.__destroyed?
(this.__destroyError(),this):(this._close(),this.__enabled=!1,this)},elementOrigin:function(){return this.__destroyed?void this.__destroyError():this._$origin[0]},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(a){return this.close(a)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?
this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(a){return this.__destroyed?this.__destroyError():this._open(null,a),this},option:function(a,c){return void 0===c?this.__options[a]:(this.__destroyed?this.__destroyError():(this.__options[a]=c,this.__optionsFormat(),
0<=d.inArray(a,["trigger","triggerClose","triggerOpen"])&&this.__prepareOrigin(),"selfDestruction"===a&&this.__prepareGC()),this)},reposition:function(c,d){return this.__destroyed?this.__destroyError():"closed"!=this.__state&&a(this._$origin)&&(d||a(this._$tooltip))&&(d||this._$tooltip.detach(),this.__Geometry=this.__geometry(),this._trigger({type:"reposition",event:c,helper:{geo:this.__Geometry}})),this},show:function(a){return this.open(a)},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,
open:"closed"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}};d.fn.tooltipster=function(){var a=Array.prototype.slice.apply(arguments);if(0===this.length)return this;if("string"==typeof a[0]){var c="#*$~&";return this.each(function(){var f=d(this).data("tooltipster-ns");f=f?d(this).data(f[0]):null;if(!f)throw Error("You called Tooltipster's \""+
a[0]+'" method on an uninitialized element');if("function"!=typeof f[a[0]])throw Error('Unknown method "'+a[0]+'"');1<this.length&&"content"==a[0]&&(a[1]instanceof d||"object"==_typeof(a[1])&&null!=a[1]&&a[1].tagName)&&!f.__options.contentCloning&&f.__options.debug&&console.log("You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.");var e=f[a[0]](a[1],a[2]);return e!==f||"instance"===a[0]?(c=e,!1):void 0}),"#*$~&"!==c?c:this}d.tooltipster.__instancesLatestArr=
[];var e=a[0]&&void 0!==a[0].multiple,g=e&&a[0].multiple||!e&&f.multiple;e=(e=a[0]&&void 0!==a[0].content)&&a[0].content||!e&&f.content;var h=a[0]&&void 0!==a[0].contentCloning;h=h&&a[0].contentCloning||!h&&f.contentCloning;var l=a[0]&&void 0!==a[0].debug,k=l&&a[0].debug||!l&&f.debug;return 1<this.length&&(e instanceof d||"object"==_typeof(e)&&null!=e&&e.tagName)&&!h&&k&&console.log("You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE."),
this.each(function(){var c=!1,f=d(this),e=f.data("tooltipster-ns"),h=null;e?g?c=!0:k&&(console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."),console.log(this)):c=!0;c&&(h=new d.Tooltipster(this,a[0]),e||(e=[]),e.push(h.__namespace),f.data("tooltipster-ns",e),f.data(h.__namespace,h),h.__options.functionInit&&h.__options.functionInit.call(h,h,{origin:this}),h._trigger("init"));d.tooltipster.__instancesLatestArr.push(h)}),this};e.prototype={__init:function(a){this.__$tooltip=
a;this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto");this.$container=d('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(h.window.document.body)},__forceRedraw:function(){var a=this.__$tooltip.parent();this.__$tooltip.detach();this.__$tooltip.appendTo(a)},constrain:function(a,c){return this.constraints={width:a,height:c},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:a}),this},
destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""});this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){this.__forceRedraw();var a=this.__$tooltip[0].getBoundingClientRect(),c={size:{height:a.height||a.bottom-a.top,width:a.width||a.right-a.left}};if(this.constraints){var d=this.__$tooltip.find(".tooltipster-content"),f=this.__$tooltip.outerHeight(),
e=d[0].getBoundingClientRect();a=a.width<=this.constraints.width&&e.width>=d[0].scrollWidth-1;c.fits=f<=this.constraints.height&&a}return h.IE&&11>=h.IE&&c.size.width!==h.window.document.documentElement.clientWidth&&(c.size.width=Math.ceil(c.size.width)+1),c}};l=navigator.userAgent.toLowerCase();-1!=l.indexOf("msie")?h.IE=parseInt(l.split("msie")[1]):-1!==l.toLowerCase().indexOf("trident")&&-1!==l.indexOf(" rv:11")?h.IE=11:-1!=l.toLowerCase().indexOf("edge/")&&(h.IE=parseInt(l.toLowerCase().split("edge/")[1]));
return d.tooltipster._plugin({name:"tooltipster.sideTip",instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0}},__init:function(a){var c=this;c.__instance=a;c.__namespace="tooltipster-sideTip-"+Math.round(1E6*Math.random());c.__previousState="closed";c.__options;c.__optionsFormat();c.__instance._on("state."+c.__namespace,function(a){"closed"==a.state?c.__close():"appearing"==a.state&&
"closed"==c.__previousState&&c.__create();c.__previousState=a.state});c.__instance._on("options."+c.__namespace,function(){c.__optionsFormat()});c.__instance._on("reposition."+c.__namespace,function(a){c.__reposition(a.event,a.helper)})},__close:function(){this.__instance.content()instanceof d&&this.__instance.content().detach();this.__instance._$tooltip.remove();this.__instance._$tooltip=null},__create:function(){var a=d('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>');
this.__options.arrow||a.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide();this.__options.minWidth&&a.css("min-width",this.__options.minWidth+"px");this.__options.maxWidth&&a.css("max-width",this.__options.maxWidth+"px");this.__instance._$tooltip=a;this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){if(this.__options=this.__instance._optionsExtract("tooltipster.sideTip",this.__defaults()),this.__options.position&&
(this.__options.side=this.__options.position),"object"!=_typeof(this.__options.distance)&&(this.__options.distance=[this.__options.distance]),4>this.__options.distance.length&&(void 0===this.__options.distance[1]&&(this.__options.distance[1]=this.__options.distance[0]),void 0===this.__options.distance[2]&&(this.__options.distance[2]=this.__options.distance[0]),void 0===this.__options.distance[3]&&(this.__options.distance[3]=this.__options.distance[1]),this.__options.distance={top:this.__options.distance[0],
right:this.__options.distance[1],bottom:this.__options.distance[2],left:this.__options.distance[3]}),"string"==typeof this.__options.side)this.__options.side=[this.__options.side,{top:"bottom",right:"left",bottom:"top",left:"right"}[this.__options.side]],"left"==this.__options.side[0]||"right"==this.__options.side[0]?this.__options.side.push("top","bottom"):this.__options.side.push("right","left");6===d.tooltipster._env.IE&&!0!==this.__options.arrow&&(this.__options.arrow=!1)},__reposition:function(a,
c){var f,e=this,g=e.__targetFind(c),h=[];e.__instance._$tooltip.detach();var k=e.__instance._$tooltip.clone(),l=d.tooltipster._getRuler(k),m=!1,q=e.__instance.option("animation");switch(q&&k.removeClass("tooltipster-"+q),d.each(["window","document"],function(f,p){var q=null;if(e.__instance._trigger({container:p,helper:c,satisfied:m,takeTest:function(a){q=a},results:h,type:"positionTest"}),1==q||0!=q&&0==m&&("window"!=p||e.__options.viewportAware))for(f=0;f<e.__options.side.length;f++){var r={horizontal:0,
vertical:0},t=e.__options.side[f];"top"==t||"bottom"==t?r.vertical=e.__options.distance[t]:r.horizontal=e.__options.distance[t];e.__sideChange(k,t);d.each(["natural","constrained"],function(d,f){if(q=null,e.__instance._trigger({container:p,event:a,helper:c,mode:f,results:h,satisfied:m,side:t,takeTest:function(a){q=a},type:"positionTest"}),1==q||0!=q&&0==m){d={container:p,distance:r,fits:null,mode:f,outerSize:null,side:t,size:null,target:g[t],whole:null};var k=("natural"==f?l.free():l.constrain(c.geo.available[p][t].width-
r.horizontal,c.geo.available[p][t].height-r.vertical)).measure();if(d.size=k.size,d.outerSize={height:k.size.height+r.vertical,width:k.size.width+r.horizontal},"natural"==f?c.geo.available[p][t].width>=d.outerSize.width&&c.geo.available[p][t].height>=d.outerSize.height?d.fits=!0:d.fits=!1:d.fits=k.fits,"window"==p&&(d.fits?"top"==t||"bottom"==t?d.whole=c.geo.origin.windowOffset.right>=e.__options.minIntersection&&c.geo.window.size.width-c.geo.origin.windowOffset.left>=e.__options.minIntersection:
d.whole=c.geo.origin.windowOffset.bottom>=e.__options.minIntersection&&c.geo.window.size.height-c.geo.origin.windowOffset.top>=e.__options.minIntersection:d.whole=!1),h.push(d),d.whole)m=!0;else if("natural"==d.mode&&(d.fits||d.size.width<=c.geo.available[p][t].width))return!1}})}}),e.__instance._trigger({edit:function(a){h=a},event:a,helper:c,results:h,type:"positionTested"}),h.sort(function(a,c){if(a.whole&&!c.whole)return-1;if(!a.whole&&c.whole)return 1;if(a.whole&&c.whole){var d=e.__options.side.indexOf(a.side);
c=e.__options.side.indexOf(c.side);return c>d?-1:d>c?1:"natural"==a.mode?-1:1}return a.fits&&!c.fits?-1:!a.fits&&c.fits?1:a.fits&&c.fits?(d=e.__options.side.indexOf(a.side),c=e.__options.side.indexOf(c.side),c>d?-1:d>c?1:"natural"==a.mode?-1:1):"document"==a.container&&"bottom"==a.side&&"natural"==a.mode?-1:1}),f=h[0],f.coord={},f.side){case "left":case "right":f.coord.top=Math.floor(f.target-f.size.height/2);break;case "bottom":case "top":f.coord.left=Math.floor(f.target-f.size.width/2)}switch(f.side){case "left":f.coord.left=
c.geo.origin.windowOffset.left-f.outerSize.width;break;case "right":f.coord.left=c.geo.origin.windowOffset.right+f.distance.horizontal;break;case "top":f.coord.top=c.geo.origin.windowOffset.top-f.outerSize.height;break;case "bottom":f.coord.top=c.geo.origin.windowOffset.bottom+f.distance.vertical}"window"==f.container?"top"==f.side||"bottom"==f.side?0>f.coord.left?0<=c.geo.origin.windowOffset.right-this.__options.minIntersection?f.coord.left=0:f.coord.left=c.geo.origin.windowOffset.right-this.__options.minIntersection-
1:f.coord.left>c.geo.window.size.width-f.size.width&&(c.geo.origin.windowOffset.left+this.__options.minIntersection<=c.geo.window.size.width?f.coord.left=c.geo.window.size.width-f.size.width:f.coord.left=c.geo.origin.windowOffset.left+this.__options.minIntersection+1-f.size.width):0>f.coord.top?0<=c.geo.origin.windowOffset.bottom-this.__options.minIntersection?f.coord.top=0:f.coord.top=c.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:f.coord.top>c.geo.window.size.height-f.size.height&&
(c.geo.origin.windowOffset.top+this.__options.minIntersection<=c.geo.window.size.height?f.coord.top=c.geo.window.size.height-f.size.height:f.coord.top=c.geo.origin.windowOffset.top+this.__options.minIntersection+1-f.size.height):(f.coord.left>c.geo.window.size.width-f.size.width&&(f.coord.left=c.geo.window.size.width-f.size.width),0>f.coord.left&&(f.coord.left=0));e.__sideChange(k,f.side);c.tooltipClone=k[0];c.tooltipParent=e.__instance.option("parent").parent[0];c.mode=f.mode;c.whole=f.whole;c.origin=
e.__instance._$origin[0];c.tooltip=e.__instance._$tooltip[0];delete f.container;delete f.fits;delete f.mode;delete f.outerSize;delete f.whole;f.distance=f.distance.horizontal||f.distance.vertical;q=d.extend(!0,{},f);(e.__instance._trigger({edit:function(a){f=a},event:a,helper:c,position:q,type:"position"}),e.__options.functionPosition)&&(q=e.__options.functionPosition.call(e,e.__instance,c,q))&&(f=q);l.destroy();var E,B;"top"==f.side||"bottom"==f.side?(E={prop:"left",val:f.target-f.coord.left},B=
f.size.width-this.__options.minIntersection):(E={prop:"top",val:f.target-f.coord.top},B=f.size.height-this.__options.minIntersection);E.val<this.__options.minIntersection?E.val=this.__options.minIntersection:E.val>B&&(E.val=B);B=c.geo.origin.fixedLineage?c.geo.origin.windowOffset:{left:c.geo.origin.windowOffset.left+c.geo.window.scroll.left,top:c.geo.origin.windowOffset.top+c.geo.window.scroll.top};f.coord={left:B.left+(f.coord.left-c.geo.origin.windowOffset.left),top:B.top+(f.coord.top-c.geo.origin.windowOffset.top)};
e.__sideChange(e.__instance._$tooltip,f.side);c.geo.origin.fixedLineage?e.__instance._$tooltip.css("position","fixed"):e.__instance._$tooltip.css("position","");e.__instance._$tooltip.css({left:f.coord.left,top:f.coord.top,height:f.size.height,width:f.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(E.prop,E.val);e.__instance._$tooltip.appendTo(e.__instance.option("parent"));e.__instance._trigger({type:"repositioned",event:a,position:f})},__sideChange:function(a,c){a.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+
c)},__targetFind:function(a){var c={},d=this.__instance._$origin[0].getClientRects();1<d.length&&1==this.__instance._$origin.css("opacity")&&(this.__instance._$origin.css("opacity",.99),d=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1));2>d.length?(c.top=Math.floor(a.geo.origin.windowOffset.left+a.geo.origin.size.width/2),c.bottom=c.top,c.left=Math.floor(a.geo.origin.windowOffset.top+a.geo.origin.size.height/2),c.right=c.left):(a=d[0],c.top=Math.floor(a.left+
(a.right-a.left)/2),a=2<d.length?d[Math.ceil(d.length/2)-1]:d[0],c.right=Math.floor(a.top+(a.bottom-a.top)/2),a=d[d.length-1],c.bottom=Math.floor(a.left+(a.right-a.left)/2),a=2<d.length?d[Math.ceil((d.length+1)/2)-1]:d[d.length-1],c.left=Math.floor(a.top+(a.bottom-a.top)/2));return c}}}),d});
!function(d,e){"function"==typeof define&&define.amd?define(["tooltipster"],function(c){return e(c)}):"object"==("undefined"===typeof exports?"undefined":_typeof(exports))?module.exports=e(require("tooltipster")):e(jQuery)}(void 0,function(d){return d.tooltipster._plugin({name:"laa.scrollableTip",instance:{__init:function(e){var c=this;c.__instance=e;c.__maxSize;c.__namespace="tooltipster-scrollableTip-"+Math.round(1E6*Math.random());c.__instance._on("positionTest."+c.__namespace,function(a){"document"==
a.container&&a.takeTest(!1)});c.__instance._on("positionTested."+c.__namespace,function(a){var f=!1;if(d.each(a.results,function(a,c){return c.whole?(f=!0,!1):void 0}),f)c.__maxSize=null;else{var e,h,l=[];d.each(a.results,function(c,d){if(l[c]={height:Math.min(a.helper.geo.available.window[d.side].height-d.distance.vertical,a.helper.geo.window.size.height),width:Math.min(a.helper.geo.available.window[d.side].width-d.distance.horizontal,a.helper.geo.window.size.width)},d.size.width<=l[c].width)d=Math.min(d.size.height,
l[c].height)*Math.min(d.size.width,l[c].width),(!e||d>e)&&(e=d,h=c)});a.edit([a.results[h]]);c.__maxSize=l[h]}});c.__instance._on("position."+c.__namespace,function(a){var f=a.position;d(a.tooltip).off("."+c.__namespace);c.__maxSize?(f.size.height>c.__maxSize.height&&"bottom"!==f.side&&(f.coord.top=0),f.size.width>c.__maxSize.width&&"right"!==f.side&&(f.coord.left=0),f.size.height=Math.min(f.size.height,c.__maxSize.height),f.size.width=Math.min(f.size.width,c.__maxSize.width),a.edit(f),c.__instance.option("interactive")||
d(a.tooltip).css("pointer-events","auto").on("mouseenter."+c.__namespace,function(a){c.__instance._trigger({dismissable:!1,type:"dismissable"})}).on("mouseleave."+c.__namespace,function(a){c.__instance._trigger({delay:c.__instance.option("delayTouch")[1],dismissable:!0,event:a,type:"dismissable"})})):c.__instance.option("interactive")||d(a.tooltip).css("pointer-events","")})},__destroy:function(){this.__instance._off("."+this.__namespace)}}}),d});var Kinetic={};
!function(d){var e=Math.PI/180;Kinetic={version:"5.1.1",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,showWarnings:!0,Filters:{},Node:function(c){this._init(c)},Shape:function(c){this.__init(c)},Container:function(c){this.__init(c)},Stage:function(c){this.___init(c)},BaseLayer:function(c){this.___init(c)},Layer:function(c){this.____init(c)},FastLayer:function(c){this.____init(c)},
Group:function(c){this.___init(c)},isDragging:function(){var c=Kinetic.DD;return c?c.isDragging:!1},isDragReady:function(){var c=Kinetic.DD;return c?!!c.node:!1},_addId:function(c,a){void 0!==a&&(this.ids[a]=c)},_removeId:function(c){void 0!==c&&delete this.ids[c]},_addName:function(c,a){void 0!==a&&(void 0===this.names[a]&&(this.names[a]=[]),this.names[a].push(c))},_removeName:function(c,a){if(void 0!==c){var d=this.names[c];if(void 0!==d){for(var e=0;e<d.length;e++)d[e]._id===a&&d.splice(e,1);0===
d.length&&delete this.names[c]}}},getAngle:function(c){return this.angleDeg?c*e:c},_parseUA:function(c){var a=c.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];var d=!!c.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);c=!!c.match(/IEMobile/i);return{browser:a[1]||"",version:a[2]||"0",mobile:d,ieMobile:c}},
UA:void 0};Kinetic.UA=Kinetic._parseUA(d.navigator&&d.navigator.userAgent||"")}(void 0);
(function(d,e){if("object"==("undefined"===typeof exports?"undefined":_typeof(exports))){e=e();if(global.window===global)Kinetic.document=global.document,Kinetic.window=global;else{var c=require("canvas"),a=require("jsdom").jsdom;a=a("<!DOCTYPE html><html><head></head><body></body></html>");Kinetic.document=a;Kinetic.window=Kinetic.document.createWindow();Kinetic.window.Image=c.Image;Kinetic._nodeCanvas=c}return Kinetic.root=d,void(module.exports=e)}"function"==typeof define&&define.amd&&define(e);
Kinetic.document=document;Kinetic.window=window;Kinetic.root=d})(void 0,function(){return Kinetic});
(function(){Kinetic.Collection=function(){var a=[].slice.call(arguments),c=a.length,d=0;for(this.length=c;c>d;d++)this[d]=a[d];return this};Kinetic.Collection.prototype=[];Kinetic.Collection.prototype.each=function(a){for(var c=0;c<this.length;c++)a(this[c],c)};Kinetic.Collection.prototype.toArray=function(){var a,c=[],d=this.length;for(a=0;d>a;a++)c.push(this[a]);return c};Kinetic.Collection.toCollection=function(a){var c,d=new Kinetic.Collection,f=a.length;for(c=0;f>c;c++)d.push(a[c]);return d};
Kinetic.Collection._mapMethod=function(a){Kinetic.Collection.prototype[a]=function(){var c,d=this.length,f=[].slice.call(arguments);for(c=0;d>c;c++)this[c][a].apply(this[c],f);return this}};Kinetic.Collection.mapMethods=function(a){a=a.prototype;for(var c in a)Kinetic.Collection._mapMethod(c)};Kinetic.Transform=function(a){this.m=a&&a.slice()||[1,0,0,1,0,0]};Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(a){var c=this.m;return{x:c[0]*a.x+c[2]*a.y+
c[4],y:c[1]*a.x+c[3]*a.y+c[5]}},translate:function(a,c){return this.m[4]+=this.m[0]*a+this.m[2]*c,this.m[5]+=this.m[1]*a+this.m[3]*c,this},scale:function(a,c){return this.m[0]*=a,this.m[1]*=a,this.m[2]*=c,this.m[3]*=c,this},rotate:function(a){var c=Math.cos(a);a=Math.sin(a);var d=this.m[1]*c+this.m[3]*a,f=this.m[0]*-a+this.m[2]*c,e=this.m[1]*-a+this.m[3]*c;return this.m[0]=this.m[0]*c+this.m[2]*a,this.m[1]=d,this.m[2]=f,this.m[3]=e,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},
skew:function(a,c){var d=this.m[1]+this.m[3]*c,f=this.m[2]+this.m[0]*a;a=this.m[3]+this.m[1]*a;return this.m[0]+=this.m[2]*c,this.m[1]=d,this.m[2]=f,this.m[3]=a,this},multiply:function(a){var c=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],f=this.m[1]*a.m[2]+this.m[3]*a.m[3],e=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],q=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];return this.m[0]=this.m[0]*a.m[0]+this.m[2]*a.m[1],this.m[1]=c,this.m[2]=d,this.m[3]=f,this.m[4]=e,this.m[5]=
q,this},invert:function(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),c=-this.m[1]*a,d=-this.m[2]*a,e=this.m[0]*a,m=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),q=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*a,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=m,this.m[5]=q,this},getMatrix:function(){return this.m},setAbsolutePosition:function(a,c){var d=this.m[0],f=this.m[1],e=this.m[2],g=this.m[4];c=(d*(c-this.m[5])-f*(a-g))/(d*this.m[3]-f*e);return this.translate((a-g-
e*c)/d,c)}};var d=Math.PI/180,e=180/Math.PI,c={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},a=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(a){return!(!a||1!=a.nodeType)},
_isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},_isObject:function(a){return!!a&&a.constructor==Object},_isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},_isNumber:function(a){return"[object Number]"==Object.prototype.toString.call(a)},_isString:function(a){return"[object String]"==Object.prototype.toString.call(a)},_throttle:function(a,c,d){var f,e,g,h=null,r=0;d||(d={});var t=function(){r=!1===d.leading?0:(new Date).getTime();h=null;g=a.apply(f,
e);f=e=null};return function(){var l=(new Date).getTime();r||!1!==d.leading||(r=l);var k=c-(l-r);return f=this,e=arguments,0>=k?(clearTimeout(h),h=null,r=l,g=a.apply(f,e),f=e=null):h||!1===d.trailing||(h=setTimeout(t,k)),g}},_hasMethods:function(a){var c,d=[];for(c in a)this._isFunction(a[c])&&d.push(c);return 0<d.length},createCanvasElement:function(){var a=Kinetic.document.createElement("canvas");return a.style=a.style||{},a},isBrowser:function(){return"object"!=("undefined"===typeof exports?"undefined":
_typeof(exports))},_isInDocument:function(a){for(;a=a.parentNode;)if(a==Kinetic.document)return!0;return!1},_simplifyArray:function(a){var c,d=[],f=a.length,e=Kinetic.Util;for(c=0;f>c;c++){var q=a[c];e._isNumber(q)?q=Math.round(1E3*q)/1E3:e._isString(q)||(q=q.toString());d.push(q)}return d},_getImage:function(a,c){if(a)if(this._isElement(a))c(a);else if(this._isString(a)){var d=new Kinetic.window.Image;d.onload=function(){c(d)};d.src=a}else if(a.data){var f=Kinetic.Util.createCanvasElement();f.width=
a.width;f.height=a.height;f.getContext("2d").putImageData(a,0,0);this._getImage(f.toDataURL(),c)}else c(null);else c(null)},_getRGBAString:function(a){return["rgba(",a.red||0,",",a.green||0,",",a.blue||0,",",a.alpha||1,")"].join("")},_rgbToHex:function(a,c,d){return(16777216+(a<<16)+(c<<8)+d).toString(16).slice(1)},_hexToRgb:function(a){a=a.replace("#","");a=parseInt(a,16);return{r:a>>16&255,g:a>>8&255,b:255&a}},getRandomColor:function(){for(var a=(16777215*Math.random()<<0).toString(16);6>a.length;)a=
"0"+a;return"#"+a},get:function(a,c){return void 0===a?c:a},getRGB:function(d){var f;return d in c?(f=c[d],{r:f[0],g:f[1],b:f[2]}):"#"===d[0]?this._hexToRgb(d.substring(1)):"rgb("===d.substr(0,4)?(f=a.exec(d.replace(/ /g,"")),{r:parseInt(f[1],10),g:parseInt(f[2],10),b:parseInt(f[3],10)}):{r:0,g:0,b:0}},_merge:function(a,c){c=this._clone(c);for(var d in a)c[d]=this._isObject(a[d])?this._merge(a[d],c[d]):a[d];return c},cloneObject:function(a){var c={},d;for(d in a)c[d]=this._isObject(a[d])?this.cloneObject(a[d]):
this._isArray(a[d])?this.cloneArray(a[d]):a[d];return c},cloneArray:function(a){return a.slice(0)},_degToRad:function(a){return a*d},_radToDeg:function(a){return a*e},_capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},error:function(a){throw Error("Kinetic error: "+a);},warn:function(a){Kinetic.root.console&&console.warn&&Kinetic.showWarnings&&console.warn("Kinetic warning: "+a)},extend:function(a,c){for(var d in c.prototype)d in a.prototype||(a.prototype[d]=c.prototype[d])},addMethods:function(a,
c){for(var d in c)a.prototype[d]=c[d]},_getControlPoints:function(a,c,d,e,m,q,p){var f=Math.sqrt(Math.pow(d-a,2)+Math.pow(e-c,2)),g=Math.sqrt(Math.pow(m-d,2)+Math.pow(q-e,2)),h=p*f/(f+g);p=p*g/(f+g);return[d-h*(m-a),e-h*(q-c),d+p*(m-a),e+p*(q-c)]},_expandPoints:function(a,c){var d,e=a.length,f=[];for(d=2;e-2>d;d+=2){var g=Kinetic.Util._getControlPoints(a[d-2],a[d-1],a[d],a[d+1],a[d+2],a[d+3],c);f.push(g[0]);f.push(g[1]);f.push(a[d]);f.push(a[d+1]);f.push(g[2]);f.push(g[3])}return f},_removeLastLetter:function(a){return a.substring(0,
a.length-1)}}})();
(function(){var d=Kinetic.Util.createCanvasElement().getContext("2d"),e=Kinetic.UA.mobile?(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1):1;Kinetic.Canvas=function(c){this.init(c)};Kinetic.Canvas.prototype={init:function(c){c=c||{};this.pixelRatio=c.pixelRatio||Kinetic.pixelRatio||e;this._canvas=Kinetic.Util.createCanvasElement();this._canvas.style.padding=0;this._canvas.style.margin=
0;this._canvas.style.border=0;this._canvas.style.background="transparent";this._canvas.style.position="absolute";this._canvas.style.top=0;this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(c){this.pixelRatio=c;this.setSize(this.getWidth(),this.getHeight())},setWidth:function(c){this.width=this._canvas.width=c*this.pixelRatio;this._canvas.style.width=c+"px"},setHeight:function(c){this.height=this._canvas.height=
c*this.pixelRatio;this._canvas.style.height=c+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(c,a){this.setWidth(c);this.setHeight(a)},toDataURL:function(c,a){try{return this._canvas.toDataURL(c,a)}catch(f){try{return this._canvas.toDataURL()}catch(g){return Kinetic.Util.warn("Unable to get data URL. "+g.message),""}}}};Kinetic.SceneCanvas=function(c){c=c||{};var a=c.width||0,d=c.height||0;Kinetic.Canvas.call(this,c);this.context=new Kinetic.SceneContext(this);
this.setSize(a,d)};Kinetic.SceneCanvas.prototype={setWidth:function(c){var a=this.pixelRatio,d=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,c);d.scale(a,a)},setHeight:function(c){var a=this.pixelRatio,d=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,c);d.scale(a,a)}};Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas);Kinetic.HitCanvas=function(c){c=c||{};var a=c.width||0,d=c.height||0;Kinetic.Canvas.call(this,c);this.context=new Kinetic.HitContext(this);
this.setSize(a,d)};Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)})();
(function(){var d="arc arcTo beginPath bezierCurveTo clearRect clip closePath createLinearGradient createPattern createRadialGradient drawImage fill fillText getImageData createImageData lineTo moveTo putImageData quadraticCurveTo rect restore rotate save scale setLineDash setTransform stroke strokeText transform translate".split(" ");Kinetic.Context=function(d){this.init(d)};Kinetic.Context.prototype={init:function(d){this.canvas=d;this._context=d._canvas.getContext("2d");Kinetic.enableTrace&&(this.traceArr=
[],this._enableTrace())},fillShape:function(d){d.getFillEnabled()&&this._fill(d)},strokeShape:function(d){d.getStrokeEnabled()&&this._stroke(d)},fillStrokeShape:function(d){d.getFillEnabled()&&this._fill(d);d.getStrokeEnabled()&&this._stroke(d)},getTrace:function(d){var c,a,f,e=this.traceArr,h=e.length,l="";for(c=0;h>c;c++){var m=e[c];(a=m.method)?(f=m.args,l+=a,l+=d?"()":Kinetic.Util._isArray(f[0])?"(["+f.join(",")+"])":"("+f.join(",")+")"):(l+=m.property,d||(l+="="+m.val));l+=";"}return l},clearTrace:function(){this.traceArr=
[]},_trace:function(d){var c=this.traceArr;c.push(d);c.length>=Kinetic.traceArrMax&&c.shift()},reset:function(){var d=this.getCanvas().getPixelRatio();this.setTransform(1*d,0,0,1*d,0,0)},getCanvas:function(){return this.canvas},clear:function(d){var c=this.getCanvas();d?this.clearRect(d.x||0,d.y||0,d.width||0,d.height||0):this.clearRect(0,0,c.getWidth(),c.getHeight())},_applyLineCap:function(d){(d=d.getLineCap())&&this.setAttr("lineCap",d)},_applyOpacity:function(d){d=d.getAbsoluteOpacity();1!==d&&
this.setAttr("globalAlpha",d)},_applyLineJoin:function(d){(d=d.getLineJoin())&&this.setAttr("lineJoin",d)},setAttr:function(d,c){this._context[d]=c},arc:function(){var d=arguments;this._context.arc(d[0],d[1],d[2],d[3],d[4],d[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var d=arguments;this._context.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5])},clearRect:function(){var d=arguments;this._context.clearRect(d[0],d[1],d[2],d[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},
createImageData:function(){var d=arguments;return 2===d.length?this._context.createImageData(d[0],d[1]):1===d.length?this._context.createImageData(d[0]):void 0},createLinearGradient:function(){var d=arguments;return this._context.createLinearGradient(d[0],d[1],d[2],d[3])},createPattern:function(){var d=arguments;return this._context.createPattern(d[0],d[1])},createRadialGradient:function(){var d=arguments;return this._context.createRadialGradient(d[0],d[1],d[2],d[3],d[4],d[5])},drawImage:function(){var d=
arguments,c=this._context;3===d.length?c.drawImage(d[0],d[1],d[2]):5===d.length?c.drawImage(d[0],d[1],d[2],d[3],d[4]):9===d.length&&c.drawImage(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8])},fill:function(){this._context.fill()},fillText:function(){var d=arguments;this._context.fillText(d[0],d[1],d[2])},getImageData:function(){var d=arguments;return this._context.getImageData(d[0],d[1],d[2],d[3])},lineTo:function(){var d=arguments;this._context.lineTo(d[0],d[1])},moveTo:function(){var d=arguments;
this._context.moveTo(d[0],d[1])},rect:function(){var d=arguments;this._context.rect(d[0],d[1],d[2],d[3])},putImageData:function(){var d=arguments;this._context.putImageData(d[0],d[1],d[2])},quadraticCurveTo:function(){var d=arguments;this._context.quadraticCurveTo(d[0],d[1],d[2],d[3])},restore:function(){this._context.restore()},rotate:function(){this._context.rotate(arguments[0])},save:function(){this._context.save()},scale:function(){var d=arguments;this._context.scale(d[0],d[1])},setLineDash:function(){var d=
arguments,c=this._context;this._context.setLineDash?c.setLineDash(d[0]):"mozDash"in c?c.mozDash=d[0]:"webkitLineDash"in c&&(c.webkitLineDash=d[0])},setTransform:function(){var d=arguments;this._context.setTransform(d[0],d[1],d[2],d[3],d[4],d[5])},stroke:function(){this._context.stroke()},strokeText:function(){var d=arguments;this._context.strokeText(d[0],d[1],d[2])},transform:function(){var d=arguments;this._context.transform(d[0],d[1],d[2],d[3],d[4],d[5])},translate:function(){var d=arguments;this._context.translate(d[0],
d[1])},_enableTrace:function(){var e,c,a=this,f=d.length,g=Kinetic.Util._simplifyArray,h=this.setAttr,l=function(d){var f,e=a[d];a[d]=function(){return c=g(Array.prototype.slice.call(arguments,0)),f=e.apply(a,arguments),a._trace({method:d,args:c}),f}};for(e=0;f>e;e++)l(d[e]);a.setAttr=function(){h.apply(a,arguments);a._trace({property:arguments[0],val:arguments[1]})}}};Kinetic.SceneContext=function(d){Kinetic.Context.call(this,d)};Kinetic.SceneContext.prototype={_fillColor:function(d){var c=d.fill()||
Kinetic.Util._getRGBAString({red:d.fillRed(),green:d.fillGreen(),blue:d.fillBlue(),alpha:d.fillAlpha()});this.setAttr("fillStyle",c);d._fillFunc(this)},_fillPattern:function(d){var c=d.getFillPatternImage(),a=d.getFillPatternX(),f=d.getFillPatternY(),e=d.getFillPatternScale(),h=Kinetic.getAngle(d.getFillPatternRotation()),l=d.getFillPatternOffset();d=d.getFillPatternRepeat();(a||f)&&this.translate(a||0,f||0);h&&this.rotate(h);e&&this.scale(e.x,e.y);l&&this.translate(-1*l.x,-1*l.y);this.setAttr("fillStyle",
this.createPattern(c,d||"repeat"));this.fill()},_fillLinearGradient:function(d){var c=d.getFillLinearGradientStartPoint(),a=d.getFillLinearGradientEndPoint();d=d.getFillLinearGradientColorStops();c=this.createLinearGradient(c.x,c.y,a.x,a.y);if(d){for(a=0;a<d.length;a+=2)c.addColorStop(d[a],d[a+1]);this.setAttr("fillStyle",c);this.fill()}},_fillRadialGradient:function(d){var c=d.getFillRadialGradientStartPoint(),a=d.getFillRadialGradientEndPoint(),f=d.getFillRadialGradientStartRadius(),e=d.getFillRadialGradientEndRadius();
d=d.getFillRadialGradientColorStops();c=this.createRadialGradient(c.x,c.y,f,a.x,a.y,e);for(a=0;a<d.length;a+=2)c.addColorStop(d[a],d[a+1]);this.setAttr("fillStyle",c);this.fill()},_fill:function(d){var c=d.fill()||d.fillRed()||d.fillGreen()||d.fillBlue(),a=d.getFillPatternImage(),f=d.getFillLinearGradientColorStops(),e=d.getFillRadialGradientColorStops(),h=d.getFillPriority();c&&"color"===h?this._fillColor(d):a&&"pattern"===h?this._fillPattern(d):f&&"linear-gradient"===h?this._fillLinearGradient(d):
e&&"radial-gradient"===h?this._fillRadialGradient(d):c?this._fillColor(d):a?this._fillPattern(d):f?this._fillLinearGradient(d):e&&this._fillRadialGradient(d)},_stroke:function(d){var c=d.dash(),a=d.getStrokeScaleEnabled();d.hasStroke()&&(a||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(d),c&&d.dashEnabled()&&this.setLineDash(c),this.setAttr("lineWidth",d.strokeWidth()),this.setAttr("strokeStyle",d.stroke()||Kinetic.Util._getRGBAString({red:d.strokeRed(),green:d.strokeGreen(),blue:d.strokeBlue(),
alpha:d.strokeAlpha()})),d._strokeFunc(this),a||this.restore())},_applyShadow:function(d){var c=Kinetic.Util,a=d.getAbsoluteOpacity(),f=c.get(d.getShadowColor(),"black"),e=c.get(d.getShadowBlur(),5),h=c.get(d.getShadowOpacity(),1);d=c.get(d.getShadowOffset(),{x:0,y:0});h&&this.setAttr("globalAlpha",h*a);this.setAttr("shadowColor",f);this.setAttr("shadowBlur",e);this.setAttr("shadowOffsetX",d.x);this.setAttr("shadowOffsetY",d.y)}};Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context);Kinetic.HitContext=
function(d){Kinetic.Context.call(this,d)};Kinetic.HitContext.prototype={_fill:function(d){this.save();this.setAttr("fillStyle",d.colorKey);d._fillFuncHit(this);this.restore()},_stroke:function(d){d.hasStroke()&&(this._applyLineCap(d),this.setAttr("lineWidth",d.strokeWidth()),this.setAttr("strokeStyle",d.colorKey),d._strokeFuncHit(this))}};Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)})();
(function(){Kinetic.Factory={addGetterSetter:function(d,e,c,a,f){this.addGetter(d,e,c);this.addSetter(d,e,a,f);this.addOverloadedGetterSetter(d,e)},addGetter:function(d,e,c){var a="get"+Kinetic.Util._capitalize(e);d.prototype[a]=function(){var a=this.attrs[e];return void 0===a?c:a}},addSetter:function(d,e,c,a){var f="set"+Kinetic.Util._capitalize(e);d.prototype[f]=function(d){return c&&(d=c.call(this,d)),this._setAttr(e,d),a&&a.call(this),this}},addComponentsGetterSetter:function(d,e,c,a,f){var g,
h,l=c.length,m=Kinetic.Util._capitalize,q="get"+m(e),p="set"+m(e);d.prototype[q]=function(){var a={};for(g=0;l>g;g++)h=c[g],a[h]=this.getAttr(e+m(h));return a};d.prototype[p]=function(c){var d,g=this.attrs[e];a&&(c=a.call(this,c));for(d in c)this._setAttr(e+m(d),c[d]);return this._fireChangeEvent(e,g,c),f&&f.call(this),this};this.addOverloadedGetterSetter(d,e)},addOverloadedGetterSetter:function(d,e){var c=Kinetic.Util._capitalize(e),a="set"+c,f="get"+c;d.prototype[e]=function(){return arguments.length?
(this[a](arguments[0]),this):this[f]()}},backCompat:function(d,e){for(var c in e)d.prototype[c]=d.prototype[e[c]]},afterSetFilter:function(){this._filterUpToDate=!1}};Kinetic.Validators={RGBComponent:function(d){return 255<d?255:0>d?0:Math.round(d)},alphaComponent:function(d){return 1<d?1:1E-4>d?1E-4:d}}})();
(function(){var d=["id"];Kinetic.Util.addMethods(Kinetic.Node,{_init:function(d){var c=this;this._id=Kinetic.idCounter++;this.eventListeners={};this.attrs={};this._cache={};this._filterUpToDate=!1;this.setAttrs(d);this.on("xChange.kinetic yChange.kinetic scaleXChange.kinetic scaleYChange.kinetic skewXChange.kinetic skewYChange.kinetic rotationChange.kinetic offsetXChange.kinetic offsetYChange.kinetic transformsEnabledChange.kinetic",function(){this._clearCache("transform");c._clearSelfAndDescendantCache("absoluteTransform")});
this.on("visibleChange.kinetic",function(){c._clearSelfAndDescendantCache("visible")});this.on("listeningChange.kinetic",function(){c._clearSelfAndDescendantCache("listening")});this.on("opacityChange.kinetic",function(){c._clearSelfAndDescendantCache("absoluteOpacity")})},_clearCache:function(d){d?delete this._cache[d]:this._cache={}},_getCache:function(d,c){return void 0===this._cache[d]&&(this._cache[d]=c.call(this)),this._cache[d]},_clearSelfAndDescendantCache:function(d){this._clearCache(d);
this.children&&this.getChildren().each(function(c){c._clearSelfAndDescendantCache(d)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(d){var c=d||{};d=c.x||0;var a=c.y||0,f=c.width||this.width(),e=c.height||this.height();c=c.drawBorder||!1;this.getLayer();if(0===f||0===e)return void Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");var h=new Kinetic.SceneCanvas({pixelRatio:1,width:f,height:e}),l=new Kinetic.SceneCanvas({pixelRatio:1,
width:f,height:e}),m=new Kinetic.HitCanvas({width:f,height:e}),q=(this.transformsEnabled(),this.x(),this.y(),h.getContext()),p=m.getContext();return m.isCache=!0,this.clearCache(),q.save(),p.save(),c&&(q.save(),q.beginPath(),q.rect(0,0,f,e),q.closePath(),q.setAttr("strokeStyle","red"),q.setAttr("lineWidth",5),q.stroke(),q.restore()),q.translate(-1*d,-1*a),p.translate(-1*d,-1*a),"Shape"===this.nodeType&&(q.translate(-1*this.x(),-1*this.y()),p.translate(-1*this.x(),-1*this.y())),this.drawScene(h,this),
this.drawHit(m,this),q.restore(),p.restore(),this._cache.canvas={scene:h,filter:l,hit:m},this},_drawCachedSceneCanvas:function(d){d.save();this.getLayer()._applyTransform(this,d);d._applyOpacity(this);d.drawImage(this._getCachedSceneCanvas()._canvas,0,0);d.restore()},_getCachedSceneCanvas:function(){var d,c=this.filters(),a=this._cache.canvas,f=a.scene;a=a.filter;var g=a.getContext();if(c){if(!this._filterUpToDate){try{var h=c.length;g.clear();g.drawImage(f._canvas,0,0);var l=g.getImageData(0,0,a.getWidth(),
a.getHeight());for(d=0;h>d;d++){var m=c[d];m.call(this,l);g.putImageData(l,0,0)}}catch(q){Kinetic.Util.warn("Unable to apply filter. "+q.message)}this._filterUpToDate=!0}return a}return f},_drawCachedHitCanvas:function(d){var c=this._cache.canvas.hit;d.save();this.getLayer()._applyTransform(this,d);d.drawImage(c._canvas,0,0);d.restore()},on:function(d,c){var a=d.split(" "),f=a.length;for(d=0;f>d;d++){var e=a[d];var h=e.split(".");e=h[0];h=h[1]||"";this.eventListeners[e]||(this.eventListeners[e]=[]);
this.eventListeners[e].push({name:h,handler:c})}return this},off:function(d){var c,a,f,e,h,l=(d||"").split(" "),m=l.length;if(!d)for(c in this.eventListeners)this._off(c);for(d=0;m>d;d++)if(a=l[d],f=a.split("."),e=f[0],h=f[1],e)this.eventListeners[e]&&this._off(e,h);else for(c in this.eventListeners)this._off(c,h);return this},dispatchEvent:function(d){this.fire(d.type,{target:this,type:d.type,evt:d})},addEventListener:function(d,c){this.on(d,function(a){c.call(this,a.evt)})},removeEventListener:function(d){this.off(d)},
remove:function(){var d=this.getParent();return d&&d.children&&(d.children.splice(this.index,1),d._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache("absoluteTransform"),this._clearSelfAndDescendantCache("visible"),this._clearSelfAndDescendantCache("listening"),this._clearSelfAndDescendantCache("absoluteOpacity"),this},destroy:function(){Kinetic._removeId(this.getId());Kinetic._removeName(this.getName(),this._id);this.remove()},getAttr:function(d){var c=
"get"+Kinetic.Util._capitalize(d);return Kinetic.Util._isFunction(this[c])?this[c]():this.attrs[d]},getAncestors:function(){for(var d=this.getParent(),c=new Kinetic.Collection;d;)c.push(d),d=d.getParent();return c},getAttrs:function(){return this.attrs||{}},setAttrs:function(d){var c,a;if(d)for(c in d)"children"===c||(a="set"+Kinetic.Util._capitalize(c),Kinetic.Util._isFunction(this[a])?this[a](d[c]):this._setAttr(c,d[c]));return this},isListening:function(){return this._getCache("listening",this._isListening)},
_isListening:function(){var d=this.getListening(),c=this.getParent();return"inherit"===d?c?c.isListening():!0:d},isVisible:function(){return this._getCache("visible",this._isVisible)},_isVisible:function(){var d=this.getVisible(),c=this.getParent();return"inherit"===d?c?c.isVisible():!0:d},shouldDrawHit:function(d){var c=this.getLayer();return d&&d.isCache||c&&c.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),
this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function d(e){c=[];a=e.length;for(f=0;a>f;f++)g=e[f],m++,"Shape"!==g.nodeType&&(c=c.concat(g.getChildren().toArray())),g._id===l._id&&(f=a);0<c.length&&c[0].getDepth()<=h&&d(c)}var c,a,f,g,h=this.getDepth(),l=this,m=0;return"Stage"!==l.nodeType&&d(l.getStage().getChildren()),m},getDepth:function(){for(var d=0,c=this.parent;c;)d++,c=c.parent;return d},setPosition:function(d){return this.setX(d.x),this.setY(d.y),this},getPosition:function(){return{x:this.getX(),
y:this.getY()}},getAbsolutePosition:function(){var d=this.getAbsoluteTransform().getMatrix(),c=new Kinetic.Transform,a=this.offset();return c.m=d.slice(),c.translate(a.x,a.y),c.getTranslation()},setAbsolutePosition:function(d){var c,a=this._clearTransform();return this.attrs.x=a.x,this.attrs.y=a.y,delete a.x,delete a.y,c=this.getAbsoluteTransform(),c.invert(),c.translate(d.x,d.y),d={x:this.attrs.x+c.getTranslation().x,y:this.attrs.y+c.getTranslation().y},this.setPosition({x:d.x,y:d.y}),this._setTransform(a),
this},_setTransform:function(d){for(var c in d)this.attrs[c]=d[c];this._clearCache("transform");this._clearSelfAndDescendantCache("absoluteTransform")},_clearTransform:function(){var d={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=
0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"),d},move:function(d){var c=d.x;d=d.y;var a=this.getX(),f=this.getY();return void 0!==c&&(a+=c),void 0!==d&&(f+=d),this.setPosition({x:a,y:f}),this},_eachAncestorReverse:function(d,c){var a=[];var f=this.getParent();if(c&&c._id===this._id)return d(this),!0;for(a.unshift(this);f&&(!c||f._id!==c._id);)a.unshift(f),f=f.parent;c=a.length;for(f=0;c>f;f++)d(a[f])},
rotate:function(d){return this.setRotation(this.getRotation()+d),this},moveToTop:function(){return this.parent?(this.parent.children.splice(this.index,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):void Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.")},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");var d=this.index;return this.parent.getChildren().length-1>d?(this.parent.children.splice(d,
1),this.parent.children.splice(d+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");var d=this.index;return 0<d?(this.parent.children.splice(d,1),this.parent.children.splice(d-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");var d=this.index;return 0<
d?(this.parent.children.splice(d,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(d){return this.parent?(this.parent.children.splice(this.index,1),this.parent.children.splice(d,0,this),this.parent._setChildrenIndices(),this):void Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.")},getAbsoluteOpacity:function(){return this._getCache("absoluteOpacity",this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var d=this.getOpacity();
return this.getParent()&&(d*=this.getParent().getAbsoluteOpacity()),d},moveTo:function(d){return Kinetic.Node.prototype.remove.call(this),d.add(this),this},toObject:function(){var d,c,a,f=Kinetic.Util,g={},h=this.getAttrs();g.attrs={};for(d in h){var l=h[d];f._isFunction(l)||f._isElement(l)||f._isObject(l)&&f._hasMethods(l)||(c=this[d],delete h[d],a=c?c.call(this):null,h[d]=l,a!==l&&(g.attrs[d]=l))}return g.className=this.getClassName(),g},toJSON:function(){return JSON.stringify(this.toObject())},
getParent:function(){return this.parent},getLayer:function(){var d=this.getParent();return d?d.getLayer():null},getStage:function(){return this._getCache("stage",this._getStage)},_getStage:function(){var d=this.getParent();return d?d.getStage():void 0},fire:function(d,c,a){return a?this._fireAndBubble(d,c||{}):this._fire(d,c||{}),this},getAbsoluteTransform:function(d){return d?this._getAbsoluteTransform(d):this._getCache("absoluteTransform",this._getAbsoluteTransform)},_getAbsoluteTransform:function(d){var c,
a,f=new Kinetic.Transform;return this._eachAncestorReverse(function(d){c=d.transformsEnabled();a=d.getTransform();"all"===c?f.multiply(a):"position"===c&&f.translate(d.x(),d.y())},d),f},getTransform:function(){return this._getCache("transform",this._getTransform)},_getTransform:function(){var d=new Kinetic.Transform,c=this.getX(),a=this.getY(),f=Kinetic.getAngle(this.getRotation()),g=this.getScaleX(),h=this.getScaleY(),l=this.getSkewX(),m=this.getSkewY(),q=this.getOffsetX(),p=this.getOffsetY();return(0!==
c||0!==a)&&d.translate(c,a),0!==f&&d.rotate(f),(0!==l||0!==m)&&d.skew(l,m),(1!==g||1!==h)&&d.scale(g,h),(0!==q||0!==p)&&d.translate(-1*q,-1*p),d},clone:function(e){var c;var a=this.getClassName();var f=Kinetic.Util.cloneObject(this.attrs);for(h in d)delete f[d[h]];for(c in e)f[c]=e[c];var g=new Kinetic[a](f);for(c in this.eventListeners)for(e=this.eventListeners[c],a=e.length,f=0;a>f;f++){var h=e[f];0>h.name.indexOf("kinetic")&&(g.eventListeners[c]||(g.eventListeners[c]=[]),g.eventListeners[c].push(h))}return g},
toDataURL:function(d){d=d||{};var c=d.mimeType||null,a=d.quality||null,f=this.getStage(),e=d.x||0,h=d.y||0;d=new Kinetic.SceneCanvas({width:d.width||this.getWidth()||(f?f.getWidth():0),height:d.height||this.getHeight()||(f?f.getHeight():0),pixelRatio:1});f=d.getContext();return f.save(),(e||h)&&f.translate(-1*e,-1*h),this.drawScene(d),f.restore(),d.toDataURL(c,a)},toImage:function(d){Kinetic.Util._getImage(this.toDataURL(d),function(c){d.callback(c)})},setSize:function(d){return this.setWidth(d.width),
this.setHeight(d.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(d){return this.className===
d||this.nodeType===d?[this]:[]},_off:function(d,c){var a,f,e=this.eventListeners[d];for(a=0;a<e.length;a++)if(f=e[a].name,!("kinetic"===f&&"kinetic"!==c||c&&f!==c)){if(e.splice(a,1),0===e.length){delete this.eventListeners[d];break}a--}},_fireChangeEvent:function(d,c,a){this._fire(d+"Change",{oldVal:c,newVal:a})},setId:function(d){var c=this.getId();return Kinetic._removeId(c),Kinetic._addId(this,d),this._setAttr("id",d),this},setName:function(d){var c=this.getName();return Kinetic._removeName(c,
this._id),Kinetic._addName(this,d),this._setAttr("name",d),this},setAttr:function(){var d=Array.prototype.slice.call(arguments),c=d[0];d=d[1];var a=this["set"+Kinetic.Util._capitalize(c)];return Kinetic.Util._isFunction(a)?a.call(this,d):this._setAttr(c,d),this},_setAttr:function(d,c){var a;void 0!==c&&(a=this.attrs[d],this.attrs[d]=c,this._fireChangeEvent(d,a,c))},_setComponentAttr:function(d,c,a){var f;void 0!==a&&(f=this.attrs[d],f||(this.attrs[d]=this.getAttr(d)),this.attrs[d][c]=a,this._fireChangeEvent(d,
f,a))},_fireAndBubble:function(d,c,a){var f=!0;if(c&&"Shape"===this.nodeType&&(c.target=this),"mouseenter"===d&&a&&(this._id===a._id||this.isAncestorOf&&this.isAncestorOf(a))?f=!1:"mouseleave"===d&&a&&(this._id===a._id||this.isAncestorOf&&this.isAncestorOf(a))&&(f=!1),f)this._fire(d,c),f=("mouseenter"===d||"mouseleave"===d)&&(a&&a.isAncestorOf&&a.isAncestorOf(this)||!(!a||!a.isAncestorOf)),c&&!c.cancelBubble&&this.parent&&this.parent.isListening()&&!f&&(a&&a.parent?this._fireAndBubble.call(this.parent,
d,c,a.parent):this._fireAndBubble.call(this.parent,d,c))},_fire:function(d,c){var a=this.eventListeners[d];if(c.type=d,a)for(d=0;d<a.length;d++)a[d].handler.call(this,c)},draw:function(){return this.drawScene(),this.drawHit(),this}});Kinetic.Node.create=function(d,c){return this._createNode(JSON.parse(d),c)};Kinetic.Node._createNode=function(d,c){var a=Kinetic.Node.prototype.getClassName.call(d);var f=d.children;if(c&&(d.attrs.container=c),d=new Kinetic[a](d.attrs),f)for(c=f.length,a=0;c>a;a++)d.add(this._createNode(f[a]));
return d};Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position");Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0);Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0);Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1);Kinetic.Factory.addGetter(Kinetic.Node,"name");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name");Kinetic.Factory.addGetter(Kinetic.Node,"id");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id");Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",
0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1);Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0);Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",
0);Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0);Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance");Kinetic.Factory.addSetter(Kinetic.Node,"width",0);Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width");Kinetic.Factory.addSetter(Kinetic.Node,"height",0);Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height");Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit");Kinetic.Factory.addGetterSetter(Kinetic.Node,
"filters",void 0,function(d){return this._filterUpToDate=!1,d});Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit");Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size");Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});Kinetic.Collection.mapMethods(Kinetic.Node)})();
(function(){Kinetic.Filters.Grayscale=function(d){var e=d.data,c=e.length;for(d=0;c>d;d+=4){var a=.34*e[d]+.5*e[d+1]+.16*e[d+2];e[d]=a;e[d+1]=a;e[d+2]=a}}})();(function(){Kinetic.Filters.Brighten=function(d){var e=255*this.brightness(),c=d.data,a=c.length;for(d=0;a>d;d+=4)c[d]+=e,c[d+1]+=e,c[d+2]+=e};Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.Invert=function(d){var e=d.data,c=e.length;for(d=0;c>d;d+=4)e[d]=255-e[d],e[d+1]=255-e[d+1],e[d+2]=255-e[d+2]}})();
(function(){function d(){this.a=this.b=this.g=this.r=0;this.next=null}var e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,
367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,
310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,
23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(a){var f=Math.round(this.blurRadius());if(0<f){var g,h,l,m,q,p,r,t,v,k,x,y,C,E,B,I,D=a.data,N=a.width;a=a.height;
var H=f+f+1;var X=N-1,Q=a-1,z=f+1,S=z*(z+1)/2,L=new d,sa=null,K=L,ca=e[f],T=c[f];for(h=1;H>h;h++)K=K.next=new d,h==z&&(sa=K);K.next=L;for(g=m=l=0;a>g;g++){var ha=v=k=x=q=p=r=t=0;var pa=z*(y=D[l]);var da=z*(C=D[l+1]);var oa=z*(E=D[l+2]);var aa=z*(B=D[l+3]);q+=S*y;p+=S*C;r+=S*E;t+=S*B;K=L;for(h=0;z>h;h++)K.r=y,K.g=C,K.b=E,K.a=B,K=K.next;for(h=1;z>h;h++){var G=l+((h>X?X:h)<<2);q+=(K.r=y=D[G])*(I=z-h);p+=(K.g=C=D[G+1])*I;r+=(K.b=E=D[G+2])*I;t+=(K.a=B=D[G+3])*I;ha+=y;v+=C;k+=E;x+=B;K=K.next}h=L;K=sa;for(H=
0;N>H;H++)D[l+3]=B=t*ca>>T,0!==B?(B=255/B,D[l]=(q*ca>>T)*B,D[l+1]=(p*ca>>T)*B,D[l+2]=(r*ca>>T)*B):D[l]=D[l+1]=D[l+2]=0,q-=pa,p-=da,r-=oa,t-=aa,pa-=h.r,da-=h.g,oa-=h.b,aa-=h.a,G=m+((G=H+f+1)<X?G:X)<<2,ha+=h.r=D[G],v+=h.g=D[G+1],k+=h.b=D[G+2],x+=h.a=D[G+3],q+=ha,p+=v,r+=k,t+=x,h=h.next,pa+=y=K.r,da+=C=K.g,oa+=E=K.b,aa+=B=K.a,ha-=y,v-=C,k-=E,x-=B,K=K.next,l+=4;m+=N}for(H=0;N>H;H++){v=k=x=ha=p=r=t=q=0;l=H<<2;pa=z*(y=D[l]);da=z*(C=D[l+1]);oa=z*(E=D[l+2]);aa=z*(B=D[l+3]);q+=S*y;p+=S*C;r+=S*E;t+=S*B;K=L;
for(h=0;z>h;h++)K.r=y,K.g=C,K.b=E,K.a=B,K=K.next;G=N;for(h=1;f>=h;h++)l=G+H<<2,q+=(K.r=y=D[l])*(I=z-h),p+=(K.g=C=D[l+1])*I,r+=(K.b=E=D[l+2])*I,t+=(K.a=B=D[l+3])*I,ha+=y,v+=C,k+=E,x+=B,K=K.next,Q>h&&(G+=N);l=H;h=L;K=sa;for(g=0;a>g;g++)G=l<<2,D[G+3]=B=t*ca>>T,0<B?(B=255/B,D[G]=(q*ca>>T)*B,D[G+1]=(p*ca>>T)*B,D[G+2]=(r*ca>>T)*B):D[G]=D[G+1]=D[G+2]=0,q-=pa,p-=da,r-=oa,t-=aa,pa-=h.r,da-=h.g,oa-=h.b,aa-=h.a,G=H+((G=g+z)<Q?G:Q)*N<<2,q+=ha+=h.r=D[G],p+=v+=h.g=D[G+1],r+=k+=h.b=D[G+2],t+=x+=h.a=D[G+3],h=h.next,
pa+=y=K.r,da+=C=K.g,oa+=E=K.b,aa+=B=K.a,ha-=y,v-=C,k-=E,x-=B,K=K.next,l+=N}}};Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)})();
(function(){function d(c,a,d){a=4*(d*c.width+a);d=[];return d.push(c.data[a++],c.data[a++],c.data[a++],c.data[a++]),d}function e(c,a){return Math.sqrt(Math.pow(c[0]-a[0],2)+Math.pow(c[1]-a[1],2)+Math.pow(c[2]-a[2],2))}Kinetic.Filters.Mask=function(c){var a=this.threshold();var f=d(c,0,0),g=d(c,c.width-1,0),h=d(c,0,c.height-1),l=d(c,c.width-1,c.height-1);a=a||10;if(e(f,g)<a&&e(g,l)<a&&e(l,h)<a&&e(h,f)<a){f=[g,f,l,h];g=[0,0,0];for(h=0;h<f.length;h++)g[0]+=f[h][0],g[1]+=f[h][1],g[2]+=f[h][2];f=(g[0]/=
f.length,g[1]/=f.length,g[2]/=f.length,g);g=[];for(h=0;h<c.width*c.height;h++)l=e(f,[c.data[4*h],c.data[4*h+1],c.data[4*h+2]]),g[h]=a>l?0:255;a=g}else a=void 0;if(a){f=c.width;g=c.height;h=[1,1,1,1,0,1,1,1,1];l=Math.round(Math.sqrt(h.length));for(var m=Math.floor(l/2),q=[],p=0;g>p;p++)for(var r=0;f>r;r++){for(var t=p*f+r,v=0,k=0;l>k;k++)for(var x=0;l>x;x++){var y=p+k-m,C=r+x-m;0<=y&&g>y&&0<=C&&f>C&&(v+=a[y*f+C]*h[k*l+x])}q[t]=2040===v?255:0}a=q;f=c.width;g=c.height;h=[1,1,1,1,1,1,1,1,1];l=Math.round(Math.sqrt(h.length));
m=Math.floor(l/2);q=[];for(p=0;g>p;p++)for(r=0;f>r;r++){t=p*f+r;for(k=v=0;l>k;k++)for(x=0;l>x;x++)y=p+k-m,C=r+x-m,0<=y&&g>y&&0<=C&&f>C&&(v+=a[y*f+C]*h[k*l+x]);q[t]=1020<=v?255:0}a=q;f=c.width;g=c.height;h=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9];l=Math.round(Math.sqrt(h.length));m=Math.floor(l/2);q=[];for(p=0;g>p;p++)for(r=0;f>r;r++){t=p*f+r;for(k=v=0;l>k;k++)for(x=0;l>x;x++)y=p+k-m,C=r+x-m,0<=y&&g>y&&0<=C&&f>C&&(v+=a[y*f+C]*h[k*l+x]);q[t]=v}a=q;for(f=0;f<c.width*c.height;f++)c.data[4*f+3]=a[f]}return c};
Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.RGB=function(d){var e=d.data,c=e.length,a=this.red(),f=this.green(),g=this.blue();for(d=0;c>d;d+=4){var h=(.34*e[d]+.5*e[d+1]+.16*e[d+2])/255;e[d]=h*a;e[d+1]=h*f;e[d+2]=h*g;e[d+3]=e[d+3]}};Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(d){return this._filterUpToDate=!1,255<d?255:0>d?0:Math.round(d)});Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(d){return this._filterUpToDate=!1,255<d?255:0>d?0:Math.round(d)});Kinetic.Factory.addGetterSetter(Kinetic.Node,
"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.HSV=function(d){d=d.data;var e=d.length;var c=Math.pow(2,this.value());var a=Math.pow(2,this.saturation()),f=Math.abs(this.hue()+360)%360;var g=c*a*Math.cos(f*Math.PI/180);var h=c*a*Math.sin(f*Math.PI/180);a=.299*c+.701*g+.167*h;f=.587*c-.587*g+.33*h;var l=.114*c-.114*g-.497*h,m=.299*c-.299*g-.328*h,q=.587*c+.413*g+.035*h,p=.114*c-.114*g+.293*h,r=.299*c-.3*g+1.25*h,t=.587*c-.586*g-1.05*h,v=.114*c+.886*g-.2*h;for(c=0;e>c;c+=4){g=d[c+0];h=d[c+1];var k=d[c+2];var x=d[c+3];
d[c+0]=a*g+f*h+l*k;d[c+1]=m*g+q*h+p*k;d[c+2]=r*g+t*h+v*k;d[c+3]=x}};Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter);Kinetic.Filters.HSL=function(d){d=d.data;var e=d.length,c=Math.pow(2,this.saturation()),a=Math.abs(this.hue()+360)%360,f=127*this.luminance();var g=1*c*Math.cos(a*Math.PI/180);var h=1*c*Math.sin(a*Math.PI/180);
c=.299+.701*g+.167*h;a=.587-.587*g+.33*h;var l=.114-.114*g-.497*h,m=.299-.299*g-.328*h,q=.587+.413*g+.035*h,p=.114-.114*g+.293*h,r=.299-.3*g+1.25*h,t=.587-.586*g-1.05*h,v=.114+.886*g-.2*h;for(g=0;e>g;g+=4){h=d[g+0];var k=d[g+1];var x=d[g+2];var y=d[g+3];d[g+0]=c*h+a*k+l*x+f;d[g+1]=m*h+q*k+p*x+f;d[g+2]=r*h+t*k+v*x+f;d[g+3]=y}}})();
(function(){Kinetic.Filters.Emboss=function(d){var e=10*this.embossStrength(),c=255*this.embossWhiteLevel(),a=this.embossDirection(),f=this.embossBlend(),g=0,h=0,l=d.data,m=d.width;d=d.height;var q=4*m,p=d;switch(a){case "top-left":h=g=-1;break;case "top":g=-1;h=0;break;case "top-right":g=-1;h=1;break;case "right":g=0;h=1;break;case "bottom-right":h=g=1;break;case "bottom":g=1;h=0;break;case "bottom-left":g=1;h=-1;break;case "left":g=0,h=-1}do{a=(p-1)*q;var r=g;1>p+r&&(r=0);p+r>d&&(r=0);r=(p-1+r)*
m*4;var t=m;do{var v=a+4*(t-1),k=h;1>t+k&&(k=0);t+k>m&&(k=0);k=r+4*(t-1+k);var x=l[v+1]-l[k+1],y=l[v+2]-l[k+2];k=l[v]-l[k];var C=0<k?k:-k,E=0<y?y:-y;((0<x?x:-x)>C&&(k=x),E>C&&(k=y),k*=e,f)?(x=l[v]+k,y=l[v+1]+k,k=l[v+2]+k,l[v]=255<x?255:0>x?0:x,l[v+1]=255<y?255:0>y?0:y,l[v+2]=255<k?255:0>k?0:k):(k=c-k,0>k?k=0:255<k&&(k=255),l[v]=l[v+1]=l[v+2]=k)}while(--t)}while(--p)};Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,
"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)})();
(function(){function d(d,c,a,f,g){var e;a-=c;g-=f;return 0===a?f+g/2:0===g?f:(e=(d-c)/a,g*e+f)}Kinetic.Filters.Enhance=function(e){var c=e.data,a=c.length,f=c[0],g=f,h=c[1],l=h,m=c[2],q=m,p=this.enhance();if(0!==p){for(e=0;a>e;e+=4){var r=c[e+0];f>r?f=r:r>g&&(g=r);r=c[e+1];h>r?h=r:r>l&&(l=r);r=c[e+2];m>r?m=r:r>q&&(q=r)}g===f&&(g=255,f=0);l===h&&(l=255,h=0);q===m&&(q=255,m=0);var t,v,k,x,y,C,E,B,I;0<p?(v=g+p*(255-g),k=f-p*(f-0),y=l+p*(255-l),C=h-p*(h-0),B=q+p*(255-q),I=m-p*(m-0)):(t=.5*(g+f),v=g+p*
(g-t),k=f+p*(f-t),x=.5*(l+h),y=l+p*(l-x),C=h+p*(h-x),E=.5*(q+m),B=q+p*(q-E),I=m+p*(m-E));for(e=0;a>e;e+=4)c[e+0]=d(c[e+0],f,g,k,v),c[e+1]=d(c[e+1],h,l,C,y),c[e+2]=d(c[e+2],m,q,I,B)}};Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.Posterize=function(d){var e=Math.round(254*this.levels())+1;d=d.data;var c=d.length,a=255/e;for(e=0;c>e;e+=1)d[e]=Math.floor(d[e]/a)*a};Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.Noise=function(d){var e=255*this.noise();d=d.data;var c=d.length,a=e/2;for(e=0;c>e;e+=4)d[e+0]+=a-2*a*Math.random(),d[e+1]+=a-2*a*Math.random(),d[e+2]+=a-2*a*Math.random()};Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.Pixelate=function(d){var e,c,a,f,g,h,l,m,q=Math.ceil(this.pixelSize()),p=d.width,r=d.height,t=Math.ceil(p/q),v=Math.ceil(r/q);d=d.data;for(l=0;t>l;l+=1)for(m=0;v>m;m+=1){var k=h=g=f=0;var x=l*q;var y=x+q;var C=m*q;var E=C+q;var B=0;for(e=x;y>e;e+=1)if(!(e>=p))for(c=C;E>c;c+=1)c>=r||(a=4*(p*c+e),f+=d[a+0],g+=d[a+1],h+=d[a+2],k+=d[a+3],B+=1);f/=B;g/=B;h/=B;for(e=x;y>e;e+=1)if(!(e>=p))for(c=C;E>c;c+=1)c>=r||(a=4*(p*c+e),d[a+0]=f,d[a+1]=g,d[a+2]=h,d[a+3]=k)}};Kinetic.Factory.addGetterSetter(Kinetic.Node,
"pixelSize",8,null,Kinetic.Factory.afterSetFilter)})();(function(){Kinetic.Filters.Threshold=function(d){var e=255*this.threshold(),c=d.data,a=c.length;for(d=0;a>d;d+=1)c[d]=c[d]<e?0:255};Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.Sepia=function(d){var e=d.data,c=d.width,a=d.height,f=4*c;do{d=(a-1)*f;var g=c;do{var h=d+4*(g-1);var l=e[h];var m=e[h+1];var q=e[h+2];var p=.393*l+.769*m+.189*q;var r=.349*l+.686*m+.168*q;l=.272*l+.534*m+.131*q;e[h]=255<p?255:p;e[h+1]=255<r?255:r;e[h+2]=255<l?255:l;e[h+3]=e[h+3]}while(--g)}while(--a)}})();
(function(){Kinetic.Filters.Solarize=function(d){var e=d.data,c=d.width,a=4*c;d=d.height;do{var f=(d-1)*a,g=c;do{var h=f+4*(g-1),l=e[h],m=e[h+1],q=e[h+2];127<l&&(l=255-l);127<m&&(m=255-m);127<q&&(q=255-q);e[h]=l;e[h+1]=m;e[h+2]=q}while(--g)}while(--d)}})();
(function(){var d=function(c){function a(a,d,e){return c.apply(this,arguments)}a.toString=function(){return c.toString()};return a}(function(c,a,d){var f=c.data;a=a.data;var e=c.width;c=c.height;var l=d.polarCenterX||e/2,m=d.polarCenterY||c/2,q=Math.sqrt(l*l+m*m);var p=e-l;var r=c-m;p=Math.sqrt(p*p+r*r);q=p>q?p:q;d=d.polarRotation||0;for(p=0;e>p;p+=1)for(r=0;c>r;r+=1){var t=p-l;var v=r-m;var k=Math.sqrt(t*t+v*v)*c/q;t=(180*Math.atan2(v,t)/Math.PI+360+d)%360;t=t*e/360;t=Math.floor(t);k=Math.floor(k);
k=4*(k*e+t);t=f[k+0];v=f[k+1];var x=f[k+2];var y=f[k+3];k=4*(r*e+p);a[k+0]=t;a[k+1]=v;a[k+2]=x;a[k+3]=y}}),e=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(c){var a=c.width,f=c.height,g=Math.round(this.kaleidoscopePower()),h=Math.round(this.kaleidoscopeAngle());var l=Math.floor(h%360*a/360);if(!(1>g)){e.width=a;e.height=f;h=e.getContext("2d").getImageData(0,0,a,f);var m=c.data;var q=h.data;var p=c.width;var r=c.height;var t=a/2||p/2;var v=f/2||r/2;var k=Math.sqrt(t*t+v*v);
var x=p-t;var y=r-v;var C=Math.sqrt(x*x+y*y);k=C>k?C:k;var E;var B=360/p*Math.PI/180;for(E=0;p>E;E+=1){var I=Math.sin(E*B);var D=Math.cos(E*B);for(C=0;r>C;C+=1){x=Math.floor(t+k*C/r*D);y=Math.floor(v+k*C/r*I);x=4*(y*p+x);y=m[x+0];var N=m[x+1];var H=m[x+2];var X=m[x+3];x=4*(E+C*p);q[x+0]=y;q[x+1]=N;q[x+2]=H;q[x+3]=X}}for(p=a/Math.pow(2,g);8>=p;)p*=2,--g;k=p=Math.ceil(p);C=0;E=k;I=1;l+p>a&&(C=k,E=0,I=-1);for(q=0;f>q;q+=1)for(m=C;m!==E;m+=I)r=Math.round(m+l)%a,D=4*(a*q+r),r=h.data[D+0],t=h.data[D+1],
v=h.data[D+2],D=h.data[D+3],B=4*(a*q+m),h.data[B+0]=r,h.data[B+1]=t,h.data[B+2]=v,h.data[B+3]=D;for(q=0;f>q;q+=1)for(k=Math.floor(p),l=0;g>l;l+=1){for(m=0;k+1>m;m+=1)D=4*(a*q+m),r=h.data[D+0],t=h.data[D+1],v=h.data[D+2],D=h.data[D+3],B=4*(a*q+2*k-m-1),h.data[B+0]=r,h.data[B+1]=t,h.data[B+2]=v,h.data[B+3]=D;k*=2}d(h,c,{polarRotation:0})}};Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",
0,null,Kinetic.Factory.afterSetFilter)})();
(function(){function d(a){setTimeout(a,1E3/60)}function e(){return a.apply(Kinetic.root,arguments)}var c=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),a=Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||d;Kinetic.Animation=function(a,d){var f=
Kinetic.Animation;this.func=a;this.setLayers(d);this.id=f.animIdCounter++;this.frame={time:0,timeDiff:0,lastTime:c()}};Kinetic.Animation.prototype={setLayers:function(a){this.layers=a?0<a.length?a:[a]:[]},getLayers:function(){return this.layers},addLayer:function(a){var c,d=this.layers;if(d){var f=d.length;for(c=0;f>c;c++)if(d[c]._id===a._id)return!1}else this.layers=[];return this.layers.push(a),!0},isRunning:function(){var a,c=Kinetic.Animation.animations,d=c.length;for(a=0;d>a;a++)if(c[a].id===
this.id)return!0;return!1},start:function(){var a=Kinetic.Animation;this.stop();this.frame.timeDiff=0;this.frame.lastTime=c();a._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(a){this.frame.timeDiff=a-this.frame.lastTime;this.frame.lastTime=a;this.frame.time+=this.frame.timeDiff;this.frame.frameRate=1E3/this.frame.timeDiff}};Kinetic.Animation.animations=[];Kinetic.Animation.animIdCounter=0;Kinetic.Animation.animRunning=!1;Kinetic.Animation._addAnimation=
function(a){this.animations.push(a);this._handleAnimation()};Kinetic.Animation._removeAnimation=function(a){var c=a.id,d=this.animations,f=d.length;for(a=0;f>a;a++)if(d[a].id===c){this.animations.splice(a,1);break}};Kinetic.Animation._runFrames=function(){var a,d,f,e={},q=this.animations,p=!1;for(a=0;a<q.length;a++){var r=q[a];var t=r.layers;var v=r.func;r._updateFrameObject(c());var k=t.length;for(d=0;k>d;d++){var x=t[d];void 0!==x._id&&(e[x._id]=x)}v&&(p=!1!==v.call(r,r.frame)||p)}if(p)for(f in e)e[f].draw()};
Kinetic.Animation._animationLoop=function(){var a=Kinetic.Animation;a.animations.length?(e(a._animationLoop),a._runFrames()):a.animRunning=!1};Kinetic.Animation._handleAnimation=function(){this.animRunning||(this.animRunning=!0,this._animationLoop())};var f=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(a){f.call(this,a)};Kinetic.BaseLayer.prototype.batchDraw=function(){var a=this,d=Kinetic.Animation;this.batchAnim||(this.batchAnim=new d(function(){a.lastBatchDrawTime&&500<c()-
a.lastBatchDrawTime&&a.batchAnim.stop()},this));this.lastBatchDrawTime=c();this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())};Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(a){a.batchDraw()})}})(void 0);
(function(){var d={node:1,duration:1,easing:1,onFinish:1,onReset:1,yoyo:1,yoyocount:1,runonce:1},e=0;Kinetic.Tween=function(a){var f,g=this,h=a.node,l=h._id,m=a.duration||1,q=a.easing||Kinetic.Easings.Linear,p=!!a.yoyo,r=a.yoyocount||0;a.runonce||!1;this.node=h;this._id=e++;this.anim=new Kinetic.Animation(function(){g.tween.onEnterFrame()},h.getLayer());this.tween=new c(f,function(a){g._tweenFunc(a)},q,0,1,1E3*m,p,r);this._addListeners();Kinetic.Tween.attrs[l]||(Kinetic.Tween.attrs[l]={});Kinetic.Tween.attrs[l][this._id]||
(Kinetic.Tween.attrs[l][this._id]={});Kinetic.Tween.tweens[l]||(Kinetic.Tween.tweens[l]={});for(f in a)void 0===d[f]&&this._addAttr(f,a[f]);this.reset();this.onFinish=a.onFinish;this.onReset=a.onReset};Kinetic.Tween.attrs={};Kinetic.Tween.tweens={};Kinetic.Tween.prototype={_addAttr:function(a,c){var d,f;var e=this.node;var m=e._id;if(d=Kinetic.Tween.tweens[m][a],d&&delete Kinetic.Tween.attrs[m][d][a],e=e.getAttr(a),Kinetic.Util._isArray(c)){d=[];var q=c.length;for(f=0;q>f;f++)d.push(c[f]-e[f])}else d=
c-e;Kinetic.Tween.attrs[m][this._id][a]={start:e,diff:d};Kinetic.Tween.tweens[m][a]=this._id},_tweenFunc:function(a){var c,d,e,l,m,q=this.node,p=Kinetic.Tween.attrs[q._id][this._id];for(c in p){if(d=p[c],e=d.start,l=d.diff,Kinetic.Util._isArray(e)){var r=[];var t=e.length;for(m=0;t>m;m++)r.push(e[m]+l[m]*a)}else r=e+l*a;q.setAttr(c,r)}},_addListeners:function(){var a=this;this.tween.onPlay=function(){a.anim.start()};this.tween.onReverse=function(){a.anim.start()};this.tween.onPause=function(){a.anim.stop()};
this.tween.onFinish=function(){a.onFinish&&a.onFinish();a.runonce&&a.destroy()};this.tween.onReset=function(){a.onReset&&a.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){this.node;return this.tween.reset(),this},seek:function(a){this.node;return this.tween.seek(1E3*a),this},pause:function(){return this.tween.pause(),this},finish:function(){this.node;return this.tween.finish(),this},isPlaying:function(){return this.tween.isPlaying()},
destroy:function(){var a,c=this.node._id,d=this._id,e=Kinetic.Tween.tweens[c];this.pause();for(a in e)delete Kinetic.Tween.tweens[c][a];delete Kinetic.Tween.attrs[c][d]}};var c=function(a,c,d,e,l,m,q,p){this.prop=a;this.propFunc=c;this._pos=this.begin=e;this.duration=m;this.prevPos=this._change=0;this.yoyo=q;this.yoyocount=p;this._finish=this._startTime=this._position=this._time=this._yoyofinished=0;this.func=d;this._change=l-this.begin;this.pause()};c.prototype={fire:function(a){(a=this[a])&&a()},
setTime:function(a){a>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>a?this.yoyo?(this._yoyofinished++,this._yoyofinished==this.yoyocount?this.reset():(this._time=0,this.play())):this.reset():(this._time=a,this.update())},getTime:function(){return this._time},setPosition:function(a){this.prevPos=this._pos;this.propFunc(a);this._pos=a},getPosition:function(a){return void 0===a&&(a=this._time),this.func(a,this.begin,this._change,this.duration)},play:function(){this.state=
2;this._startTime=this.getTimer()-this._time;this.onEnterFrame();this.fire("onPlay")},reverse:function(){this.state=3;this._time=this.duration-this._time;this._startTime=this.getTimer()-this._time;this.onEnterFrame();this.fire("onReverse")},isPlaying:function(){return 1!=this.state},seek:function(a){this.pause();this._time=a;this.update();this.fire("onSeek")},reset:function(){this.pause();this._time=0;this.update();this.fire("onReset")},finish:function(){this.pause();this._time=this.duration;this.update();
this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var a=this.getTimer()-this._startTime;2===this.state?this.setTime(a):3===this.state&&this.setTime(this.duration-a)},pause:function(){this.state=1;this.fire("onPause")},getTimer:function(){return(new Date).getTime()}};Kinetic.Easings={BackEaseIn:function(a,c,d,e){return d*(a/=e)*a*(2.70158*a-1.70158)+c},BackEaseOut:function(a,c,d,e){return d*((a=a/e-1)*a*(2.70158*a+1.70158)+1)+c},BackEaseInOut:function(a,
c,d,e){var f=1.70158;return 1>(a/=e/2)?d/2*a*a*(((f*=1.525)+1)*a-f)+c:d/2*((a-=2)*a*(((f*=1.525)+1)*a+f)+2)+c},ElasticEaseIn:function(a,c,d,e,l,m){var f=0;return 0===a?c:1==(a/=e)?c+d:(m||(m=.3*e),!l||l<Math.abs(d)?(l=d,f=m/4):f=m/(2*Math.PI)*Math.asin(d/l),-(l*Math.pow(2,10*--a)*Math.sin(2*(a*e-f)*Math.PI/m))+c)},ElasticEaseOut:function(a,c,d,e,l,m){var f=0;return 0===a?c:1==(a/=e)?c+d:(m||(m=.3*e),!l||l<Math.abs(d)?(l=d,f=m/4):f=m/(2*Math.PI)*Math.asin(d/l),l*Math.pow(2,-10*a)*Math.sin(2*(a*e-f)*
Math.PI/m)+d+c)},ElasticEaseInOut:function(a,c,d,e,l,m){var f=0;return 0===a?c:2==(a/=e/2)?c+d:(m||(m=.3*e*1.5),!l||l<Math.abs(d)?(l=d,f=m/4):f=m/(2*Math.PI)*Math.asin(d/l),1>a?-.5*l*Math.pow(2,10*--a)*Math.sin(2*(a*e-f)*Math.PI/m)+c:l*Math.pow(2,-10*--a)*Math.sin(2*(a*e-f)*Math.PI/m)*.5+d+c)},BounceEaseOut:function(a,c,d,e){return(a/=e)<1/2.75?7.5625*d*a*a+c:2/2.75>a?d*(7.5625*(a-=1.5/2.75)*a+.75)+c:2.5/2.75>a?d*(7.5625*(a-=2.25/2.75)*a+.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+.984375)+c},BounceEaseIn:function(a,
c,d,e){return d-Kinetic.Easings.BounceEaseOut(e-a,0,d,e)+c},BounceEaseInOut:function(a,c,d,e){return e/2>a?.5*Kinetic.Easings.BounceEaseIn(2*a,0,d,e)+c:.5*Kinetic.Easings.BounceEaseOut(2*a-e,0,d,e)+.5*d+c},EaseIn:function(a,c,d,e){return d*(a/=e)*a+c},EaseOut:function(a,c,d,e){return-d*(a/=e)*(a-2)+c},EaseInOut:function(a,c,d,e){return 1>(a/=e/2)?d/2*a*a+c:-d/2*(--a*(a-2)-1)+c},StrongEaseIn:function(a,c,d,e){return d*(a/=e)*a*a*a*a+c},StrongEaseOut:function(a,c,d,e){return d*((a=a/e-1)*a*a*a*a+1)+
c},StrongEaseInOut:function(a,c,d,e){return 1>(a/=e/2)?d/2*a*a*a*a*a+c:d/2*((a-=2)*a*a*a*a+2)+c},Linear:function(a,c,d,e){return d*a/e+c}}})();
(function(){Kinetic.DD={anim:new Kinetic.Animation(function(){var c=this.dirty;return this.dirty=!1,c}),isDragging:!1,justDragged:!1,offset:{x:0,y:0},node:null,_drag:function(c){var a=Kinetic.DD,d=a.node;if(d){if(!a.isDragging){var e=d.getStage().getPointerPosition();if(d.dragDistance()>Math.max(Math.abs(e.x-a.startPointerPos.x),Math.abs(e.y-a.startPointerPos.y)))return}d._setDragPosition(c);a.isDragging||(a.isDragging=!0,d.fire("dragstart",{type:"dragstart",target:d,evt:c},!0));d.fire("dragmove",
{type:"dragmove",target:d,evt:c},!0)}},_endDragBefore:function(c){var a,d=Kinetic.DD,e=d.node;e&&(a=e.getLayer(),d.anim.stop(),d.isDragging&&(d.isDragging=!1,d.justDragged=!0,Kinetic.listenClickTap=!1,c&&(c.dragEndNode=e)),delete d.node,(a||e).draw())},_endDragAfter:function(c){c=c||{};var a=c.dragEndNode;c&&a&&a.fire("dragend",{type:"dragend",target:a,evt:c},!0)}};Kinetic.Node.prototype.startDrag=function(){var c=Kinetic.DD,a=this.getStage(),d=this.getLayer();a=a.getPointerPosition();var e=this.getAbsolutePosition();
a&&(c.node&&c.node.stopDrag(),c.node=this,c.startPointerPos=a,c.offset.x=a.x-e.x,c.offset.y=a.y-e.y,c.anim.setLayers(d||this.getLayers()),c.anim.start(),this._setDragPosition())};Kinetic.Node.prototype._setDragPosition=function(c){var a=Kinetic.DD,d=this.getStage().getPointerPosition(),e=this.getDragBoundFunc();d&&(d={x:d.x-a.offset.x,y:d.y-a.offset.y},void 0!==e&&(d=e.call(this,d,c)),this.setAbsolutePosition(d),this._lastPos&&this._lastPos.x===d.x&&this._lastPos.y===d.y||(a.anim.dirty=!0),this._lastPos=
d)};Kinetic.Node.prototype.stopDrag=function(){var c=Kinetic.DD,a={};c._endDragBefore(a);c._endDragAfter(a)};Kinetic.Node.prototype.setDraggable=function(c){this._setAttr("draggable",c);this._dragChange()};var d=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var c=Kinetic.DD;c.node&&c.node._id===this._id&&this.stopDrag();d.call(this)};Kinetic.Node.prototype.isDragging=function(){var c=Kinetic.DD;return!(!c.node||c.node._id!==this._id||!c.isDragging)};Kinetic.Node.prototype._listenDrag=
function(){var c=this;this._dragCleanup();"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(a){Kinetic.DD.node||c.startDrag(a)}):this.on("mousedown.kinetic touchstart.kinetic",function(a){1!==a.evt.button&&2!==a.evt.button&&(Kinetic.DD.node||c.startDrag(a))})};Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var c=this.getStage(),a=Kinetic.DD;c&&a.node&&a.node._id===this._id&&a.node.stopDrag()}};
Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))};Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc");Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1);Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var e=Kinetic.document.documentElement;e.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0);
e.addEventListener("touchend",Kinetic.DD._endDragBefore,!0);e.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1);e.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)})();
(function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(d){this.children=new Kinetic.Collection;Kinetic.Node.call(this,d)},getChildren:function(d){if(d){var e=new Kinetic.Collection;return this.children.each(function(c){d(c)&&e.push(c)}),e}return this.children},hasChildren:function(){return 0<this.getChildren().length},removeChildren:function(){for(var d,e=Kinetic.Collection.toCollection(this.children),c=0;c<e.length;c++)d=e[c],delete d.parent,d.index=0,d.hasChildren()&&d.removeChildren(),
d.remove();return this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var d,e=Kinetic.Collection.toCollection(this.children),c=0;c<e.length;c++)d=e[c],delete d.parent,d.index=0,d.destroy();return this.children=new Kinetic.Collection,this},add:function(d){if(!(1<arguments.length)){if(d.getParent())return void d.moveTo(this);var e=this.children;return this._validateAdd(d),d.index=e.length,d.parent=this,e.push(d),this._fire("add",{child:d}),this}for(e=0;e<arguments.length;e++)this.add(arguments[e])},
destroy:function(){this.hasChildren()&&this.destroyChildren();Kinetic.Node.prototype.destroy.call(this)},find:function(d){var e,c,a=[],f=d.replace(/ /g,"").split(","),g=f.length;for(d=0;g>d;d++)if(c=f[d],"#"===c.charAt(0))(e=this._getNodeById(c.slice(1)))&&a.push(e);else if("."===c.charAt(0))e=this._getNodesByName(c.slice(1)),a=a.concat(e);else{var h=this.getChildren();var l=h.length;for(e=0;l>e;e++)a=a.concat(h[e]._get(c))}return Kinetic.Collection.toCollection(a)},_getNodeById:function(d){d=Kinetic.ids[d];
return void 0!==d&&this.isAncestorOf(d)?d:null},_getNodesByName:function(d){return this._getDescendants(Kinetic.names[d]||[])},_get:function(d){for(var e=Kinetic.Node.prototype._get.call(this,d),c=this.getChildren(),a=c.length,f=0;a>f;f++)e=e.concat(c[f]._get(d));return e},toObject:function(){var d=Kinetic.Node.prototype.toObject.call(this);d.children=[];for(var e=this.getChildren(),c=e.length,a=0;c>a;a++)d.children.push(e[a].toObject());return d},_getDescendants:function(d){for(var e=[],c=d.length,
a=0;c>a;a++){var f=d[a];this.isAncestorOf(f)&&e.push(f)}return e},isAncestorOf:function(d){for(d=d.getParent();d;){if(d._id===this._id)return!0;d=d.getParent()}return!1},clone:function(d){var e=Kinetic.Node.prototype.clone.call(this,d);return this.getChildren().each(function(c){e.add(c.clone())}),e},getAllIntersections:function(d){var e=[];return this.find("Shape").each(function(c){c.isVisible()&&c.intersects(d)&&e.push(c)}),e},_setChildrenIndices:function(){this.children.each(function(d,e){d.index=
e})},drawScene:function(d,e){var c=this.getLayer();c=(d=d||c&&c.getCanvas())&&d.getContext();var a=this._cache.canvas;a=a&&a.scene;return this.isVisible()&&(a?this._drawCachedSceneCanvas(c):this._drawChildren(d,"drawScene",e)),this},drawHit:function(d,e){var c=this.getLayer(),a=(d=d||c&&c.hitCanvas)&&d.getContext(),f=this._cache.canvas;f=f&&f.hit;return this.shouldDrawHit(d)&&(c&&c.clearHitCache(),f?this._drawCachedHitCanvas(a):this._drawChildren(d,"drawHit",e)),this},_drawChildren:function(d,e,c){var a,
f,g=this.getLayer(),h=d&&d.getContext(),l=this.getClipWidth(),m=this.getClipHeight(),q=l&&m;q&&g&&(a=this.getClipX(),f=this.getClipY(),h.save(),g._applyTransform(this,h),h.beginPath(),h.rect(a,f,l,m),h.clip(),h.reset());this.children.each(function(a){a[e](d,c)});q&&h.restore()},shouldDrawHit:function(d){var e=this.getLayer();return d&&d.isCache||e&&e.hitGraphEnabled()&&this.isVisible()&&!Kinetic.isDragging()}});Kinetic.Util.extend(Kinetic.Container,Kinetic.Node);Kinetic.Container.prototype.get=Kinetic.Container.prototype.find;
Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]);Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX");Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY");Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth");Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight");Kinetic.Collection.mapMethods(Kinetic.Container)})();
(function(){function d(a){a.fill()}function e(a){a.stroke()}function c(a){a.fill()}function a(a){a.stroke()}function f(){this._clearCache(g)}var g="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(g){this.nodeType="Shape";this._fillFunc=d;this._strokeFunc=e;this._fillFuncHit=c;this._strokeFuncHit=a;for(var h,m=Kinetic.shapes;h=Kinetic.Util.getRandomColor(),!h||h in m;);this.colorKey=h;m[h]=this;Kinetic.Node.call(this,g);this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",
f)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(g,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||
this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},intersects:function(a){var c,d=this.getStage().bufferHitCanvas;return d.getContext().clear(),this.drawScene(d),c=d.context.getImageData(Math.round(a.x),Math.round(a.y),1,1).data,0<c[3]},destroy:function(){Kinetic.Node.prototype.destroy.call(this);delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||
1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(a,c){var d,f,e,g=this.getLayer();a=(a||g.getCanvas()).getContext();var h=this._cache.canvas,l=this.sceneFunc(),k=this.hasShadow();this.isVisible()&&(h?this._drawCachedSceneCanvas(a):l&&((a.save(),this._useBufferCanvas())?((d=this.getStage(),f=d.bufferCanvas,e=f.getContext(),e.clear(),e.save(),e._applyLineJoin(this),g)?g._applyTransform(this,e,c):(c=this.getAbsoluteTransform(c).getMatrix(),a.transform(c[0],
c[1],c[2],c[3],c[4],c[5])),l.call(this,e),e.restore(),k&&(a.save(),a._applyShadow(this),a.drawImage(f._canvas,0,0),a.restore()),a._applyOpacity(this),a.drawImage(f._canvas,0,0)):((a._applyLineJoin(this),g)?g._applyTransform(this,a,c):(c=this.getAbsoluteTransform(c).getMatrix(),a.transform(c[0],c[1],c[2],c[3],c[4],c[5])),k&&(a.save(),a._applyShadow(this),l.call(this,a),a.restore()),a._applyOpacity(this),l.call(this,a)),a.restore()));return this},drawHit:function(a,c){var d=this.getLayer(),f=a||d.hitCanvas;
a=f.getContext();var e=this.hitFunc()||this.sceneFunc(),g=this._cache.canvas;g=g&&g.hit;this.shouldDrawHit(f)&&((d&&d.clearHitCache(),g)?this._drawCachedHitCanvas(a):e&&((a.save(),a._applyLineJoin(this),d)?d._applyTransform(this,a,c):(c=this.getAbsoluteTransform(c).getMatrix(),a.transform(c[0],c[1],c[2],c[3],c[4],c[5])),e.call(this,a),a.restore()));return this},drawHitFromCache:function(a){var c;a=a||0;var d=this._cache.canvas,f=this._getCachedSceneCanvas(),e=f.getContext();d=d.hit.getContext();var g=
f.getWidth();f=f.getHeight();d.clear();try{var h=e.getImageData(0,0,g,f);var v=h.data;var k=d.getImageData(0,0,g,f);var x=k.data;var y=v.length;var C=Kinetic.Util._hexToRgb(this.colorKey);for(c=0;y>c;c+=4){var E=v[c+3];E>a&&(x[c]=C.r,x[c+1]=C.g,x[c+2]=C.b,x[c+3]=255)}d.putImageData(k,0,0)}catch(B){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+B.message)}return this}});Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke");
Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin");Kinetic.Factory.addGetterSetter(Kinetic.Shape,
"lineCap");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent);
Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity");Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage");Kinetic.Factory.addGetterSetter(Kinetic.Shape,
"fill");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",
0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,
"strokeEnabled",!0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color");Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",
0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,
"fillLinearGradientEndPoint",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,
"fillRadialGradientEndPoint",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0);Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});
Kinetic.Collection.mapMethods(Kinetic.Shape)})();
(function(){function d(a,c){a.content.addEventListener(c,function(d){a[e+c](d)},!1)}var e="_",c="mousedown mousemove mouseup mouseout touchstart touchmove touchend mouseover".split(" "),a=c.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(a){this.nodeType="Stage";Kinetic.Container.call(this,a);this._id=Kinetic.idCounter++;this._buildDOM();this._bindContentEvents();this._enableNestedTransforms=!1;Kinetic.stages.push(this)},_validateAdd:function(a){"Layer"!==a.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},
setContainer:function(a){if("string"===_typeof(a)){var c=a;if(a=Kinetic.document.getElementById(a),!a)throw"Can not find container in document with id "+c;}return this._setAttr("container",a),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(a){return Kinetic.Node.prototype.setHeight.call(this,a),this._resizeDOM(),this},setWidth:function(a){return Kinetic.Node.prototype.setWidth.call(this,a),this._resizeDOM(),this},clear:function(){var a,
c=this.children,d=c.length;for(a=0;d>a;a++)c[a].clear();return this},clone:function(a){return a||(a={}),a.container=Kinetic.document.createElement("div"),Kinetic.Container.prototype.clone.call(this,a)},destroy:function(){var a=this.content;Kinetic.Container.prototype.destroy.call(this);a&&Kinetic.Util._isInDocument(a)&&this.getContainer().removeChild(a);a=Kinetic.stages.indexOf(this);-1<a&&Kinetic.stages.splice(a,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},
getContent:function(){return this.content},toDataURL:function(a){function c(e){var g=t[e].toDataURL(),h=new Kinetic.window.Image;h.onload=function(){r.drawImage(h,0,0);e<t.length-1?c(e+1):a.callback(p.toDataURL(d,f))};h.src=g}a=a||{};var d=a.mimeType||null,f=a.quality||null,e=a.x||0,q=a.y||0,p=new Kinetic.SceneCanvas({width:a.width||this.getWidth(),height:a.height||this.getHeight(),pixelRatio:1}),r=p.getContext()._context,t=this.children;(e||q)&&r.translate(-1*e,-1*q);c(0)},toImage:function(a){var c=
a.callback;a.callback=function(a){Kinetic.Util._getImage(a,function(a){c(a)})};this.toDataURL(a)},getIntersection:function(a){var c,d,f=this.getChildren();for(c=f.length-1;0<=c;c--)if(d=f[c].getIntersection(a))return d;return null},_resizeDOM:function(){if(this.content){var a,c=this.getWidth(),d=this.getHeight(),e=this.getChildren(),m=e.length;this.content.style.width=c+"px";this.content.style.height=d+"px";this.bufferCanvas.setSize(c,d);this.bufferHitCanvas.setSize(c,d);for(a=0;m>a;a++){var q=e[a];
q.setSize(c,d);q.draw()}}},add:function(a){if(!(1<arguments.length))return Kinetic.Container.prototype.add.call(this,a),a._setCanvasSize(this.width(),this.height()),a.draw(),this.content.appendChild(a.canvas._canvas),this;for(var c=0;c<arguments.length;c++)this.add(arguments[c])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var f=0;a>f;f++)d(this,c[f])},_mouseover:function(a){Kinetic.UA.mobile||
(this._setPointerPosition(a),this._fire("contentMouseover",{evt:a}))},_mouseout:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var c=this.targetShape;c&&!Kinetic.isDragging()&&(c._fireAndBubble("mouseout",{evt:a}),c._fireAndBubble("mouseleave",{evt:a}),this.targetShape=null);this.pointerPos=void 0;this._fire("contentMouseout",{evt:a})}},_mousemove:function(a){if(Kinetic.UA.ieMobile)return this._touchmove(a);if(("undefined"==typeof a.webkitMovementX&&"undefined"==typeof a.webkitMovementY||
0!==a.webkitMovementY||0!==a.webkitMovementX)&&!Kinetic.UA.mobile){this._setPointerPosition(a);var c,d=Kinetic.DD;Kinetic.isDragging()||(c=this.getIntersection(this.getPointerPosition()),c&&c.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===c._id?c._fireAndBubble("mousemove",{evt:a}):(this.targetShape&&(this.targetShape._fireAndBubble("mouseout",{evt:a},c),this.targetShape._fireAndBubble("mouseleave",{evt:a},c)),c._fireAndBubble("mouseover",{evt:a},this.targetShape),c._fireAndBubble("mouseenter",
{evt:a},this.targetShape),this.targetShape=c):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble("mouseout",{evt:a}),this.targetShape._fireAndBubble("mouseleave",{evt:a}),this.targetShape=null),this._fire("contentMousemove",{evt:a}));d&&d._drag(a);a.preventDefault&&a.preventDefault()}},_mousedown:function(a){if(Kinetic.UA.ieMobile)return this._touchstart(a);if(!Kinetic.UA.mobile){this._setPointerPosition(a);var c=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=
!0;c&&c.isListening()&&(this.clickStartShape=c,c._fireAndBubble("mousedown",{evt:a}));this._fire("contentMousedown",{evt:a})}a.preventDefault&&a.preventDefault()},_mouseup:function(a){if(Kinetic.UA.ieMobile)return this._touchend(a);if(!Kinetic.UA.mobile){this._setPointerPosition(a);var c=this.getIntersection(this.getPointerPosition()),d=this.clickStartShape,f=!1,e=Kinetic.DD;Kinetic.inDblClickWindow?(f=!0,Kinetic.inDblClickWindow=!1):e&&e.justDragged?e&&(e.justDragged=!1):Kinetic.inDblClickWindow=
!0;setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow);c&&c.isListening()&&(c._fireAndBubble("mouseup",{evt:a}),Kinetic.listenClickTap&&d&&d._id===c._id&&(c._fireAndBubble("click",{evt:a}),f&&c._fireAndBubble("dblclick",{evt:a})));this._fire("contentMouseup",{evt:a});Kinetic.listenClickTap&&(this._fire("contentClick",{evt:a}),f&&this._fire("contentDblclick",{evt:a}));Kinetic.listenClickTap=!1}a.preventDefault&&a.preventDefault()},_touchstart:function(a){this._setPointerPosition(a);
var c=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0;c&&c.isListening()&&(this.tapStartShape=c,c._fireAndBubble("touchstart",{evt:a}),c.isListening()&&a.preventDefault&&a.preventDefault());this._fire("contentTouchstart",{evt:a})},_touchend:function(a){this._setPointerPosition(a);var c=this.getIntersection(this.getPointerPosition()),d=!1;Kinetic.inDblClickWindow?(d=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0;setTimeout(function(){Kinetic.inDblClickWindow=
!1},Kinetic.dblClickWindow);c&&c.isListening()&&(c._fireAndBubble("touchend",{evt:a}),Kinetic.listenClickTap&&c._id===this.tapStartShape._id&&(c._fireAndBubble("tap",{evt:a}),d&&c._fireAndBubble("dbltap",{evt:a})),c.isListening()&&a.preventDefault&&a.preventDefault());Kinetic.listenClickTap&&(this._fire("contentTouchend",{evt:a}),d&&this._fire("contentDbltap",{evt:a}));Kinetic.listenClickTap=!1},_touchmove:function(a){this._setPointerPosition(a);var c,d=Kinetic.DD;Kinetic.isDragging()||(c=this.getIntersection(this.getPointerPosition()),
c&&c.isListening()&&(c._fireAndBubble("touchmove",{evt:a}),c.isListening()&&a.preventDefault&&a.preventDefault()),this._fire("contentTouchmove",{evt:a}));d&&(d._drag(a),Kinetic.isDragging()&&a.preventDefault())},_setPointerPosition:function(a){var c,d=this._getContentPosition(),f=a.offsetX,e=a.clientX,q=null,p=null;a=a?a:window.event;void 0!==a.touches?0<a.touches.length&&(c=a.touches[0],q=c.clientX-d.left,p=c.clientY-d.top):void 0!==f?(q=f,p=a.offsetY):"mozilla"===Kinetic.UA.browser?(q=a.layerX,
p=a.layerY):void 0!==e&&d&&(q=e-d.left,p=a.clientY-d.top);null!==q&&null!==p&&(this.pointerPos={x:q,y:p})},_getContentPosition:function(){var a=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:a.top,left:a.left}},_buildDOM:function(){var a=this.getContainer();if(!a){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";a=Kinetic.document.createElement("div")}a.innerHTML="";this.content=Kinetic.document.createElement("div");
this.content.style.position="relative";this.content.style.display="inline-block";this.content.className="kineticjs-content";this.content.setAttribute("role","presentation");a.appendChild(this.content);this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1});this.bufferHitCanvas=new Kinetic.HitCanvas;this._resizeDOM()},_onContent:function(a,c){var d=a.split(" "),f=d.length;for(a=0;f>a;a++){var e=d[a];this.content.addEventListener(e,c,!1)}},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},
clearCache:function(){}});Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container);Kinetic.Factory.addGetter(Kinetic.Stage,"container");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")})();
(function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(d){this.nodeType="Layer";Kinetic.Container.call(this,d)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(d){return this.getContext().clear(d),this.getHitCanvas().getContext().clear(d),this},clearHitCache:function(){this._hitImageData=void 0},
setZIndex:function(d){Kinetic.Node.prototype.setZIndex.call(this,d);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),d<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[d+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var d=this.getStage();d&&(d.content.removeChild(this.getCanvas()._canvas),d.content.appendChild(this.getCanvas()._canvas))},
moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var d=this.getStage();d&&(d.content.removeChild(this.getCanvas()._canvas),this.index<d.getChildren().length-1?d.content.insertBefore(this.getCanvas()._canvas,d.getChildren()[this.index+1].getCanvas()._canvas):d.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var d=this.getStage();if(d){var e=d.getChildren();d.content.removeChild(this.getCanvas()._canvas);d.content.insertBefore(this.getCanvas()._canvas,
e[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var d=this.getStage();if(d){var e=d.getChildren();d.content.removeChild(this.getCanvas()._canvas);d.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var d=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),d&&d.parentNode&&Kinetic.Util._isInDocument(d)&&d.parentNode.removeChild(d),this},
getStage:function(){return this.parent},setSize:function(d,e){this.canvas.setSize(d,e)},getWidth:function(){return this.parent?this.parent.getWidth():void 0},setWidth:function(){Kinetic.Util.warn('Can not change with of layer. Use "stage.width(value)" function instead.')},getHeight:function(){return this.parent?this.parent.getHeight():void 0},setHeight:function(){Kinetic.Util.warn('Can not change with of layer. Use "stage.width(value)" function instead.')}});Kinetic.Util.extend(Kinetic.BaseLayer,
Kinetic.Container);Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0);Kinetic.Collection.mapMethods(Kinetic.BaseLayer)})();
(function(){var d=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],e=d.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(c){this.nodeType="Layer";this.canvas=new Kinetic.SceneCanvas;this.hitCanvas=new Kinetic.HitCanvas;Kinetic.BaseLayer.call(this,c)},_setCanvasSize:function(c,a){this.canvas.setSize(c,a);this.hitCanvas.setSize(c,a)},_validateAdd:function(c){c=c.getType();"Group"!==c&&"Shape"!==c&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},
getIntersection:function(c){var a,f,g,h;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var l=1,m=!1;;){for(f=0;e>f;f++){if(g=d[f],a=this._getIntersection({x:c.x+g.x*l,y:c.y+g.y*l}),h=a.shape)return h;a.antialiased&&(m=!0)}if(!m)break;l+=1}},_getImageData:function(c,a){var d=this.hitCanvas.width||1,e=this.hitCanvas.height||1;c=Math.round(a)*d+Math.round(c);return this._hitImageData||(this._hitImageData=this.hitCanvas.context.getImageData(0,0,d,e)),[this._hitImageData.data[4*c],this._hitImageData.data[4*
c+1],this._hitImageData.data[4*c+2],this._hitImageData.data[4*c+3]]},_getIntersection:function(c){var a,d;c=this.hitCanvas.context.getImageData(c.x,c.y,1,1).data;var e=c[3];return 255===e?(a=Kinetic.Util._rgbToHex(c[0],c[1],c[2]),d=Kinetic.shapes["#"+a],{shape:d}):0<e?{antialiased:!0}:{}},drawScene:function(c,a){var d=this.getLayer();c=c||d&&d.getCanvas();return this._fire("beforeDraw",{node:this}),this.getClearBeforeDraw()&&c.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,c,
a),this._fire("draw",{node:this}),this},_applyTransform:function(c,a,d){c=c.getAbsoluteTransform(d).getMatrix();a.transform(c[0],c[1],c[2],c[3],c[4],c[5])},drawHit:function(c,a){var d=this.getLayer();c=c||d&&d.hitCanvas;return d&&d.getClearBeforeDraw()&&d.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,c,a),this},clear:function(c){return this.getContext().clear(c),this.getHitCanvas().getContext().clear(c),this.imageData=null,this},setVisible:function(c){return Kinetic.Node.prototype.setVisible.call(this,
c),c?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this},setSize:function(c,a){Kinetic.BaseLayer.prototype.setSize.call(this,c,a);this.hitCanvas.setSize(c,a)}});Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer);Kinetic.Factory.addGetterSetter(Kinetic.Layer,
"hitGraphEnabled",!0);Kinetic.Collection.mapMethods(Kinetic.Layer)})();
(function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(d){this.nodeType="Layer";this.canvas=new Kinetic.SceneCanvas;Kinetic.BaseLayer.call(this,d)},_validateAdd:function(d){"Shape"!==d.getType()&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(d,e){this.canvas.setSize(d,e)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(d){var e=this.getLayer();d=d||e&&e.getCanvas();return this.getClearBeforeDraw()&&
d.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,d),this},_applyTransform:function(d,e,c){c&&c._id===this._id||(d=d.getTransform().getMatrix(),e.transform(d[0],d[1],d[2],d[3],d[4],d[5]))},draw:function(){return this.drawScene(),this},clear:function(d){return this.getContext().clear(d),this},setVisible:function(d){return Kinetic.Node.prototype.setVisible.call(this,d),this.getCanvas()._canvas.style.display=d?"block":"none",this}});Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer);
Kinetic.Collection.mapMethods(Kinetic.FastLayer)})();(function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(d){this.nodeType="Group";Kinetic.Container.call(this,d)},_validateAdd:function(d){d=d.getType();"Group"!==d&&"Shape"!==d&&Kinetic.Util.error("You may only add groups and shapes to groups.")}});Kinetic.Util.extend(Kinetic.Group,Kinetic.Container);Kinetic.Collection.mapMethods(Kinetic.Group)})();
(function(){Kinetic.Rect=function(d){this.___init(d)};Kinetic.Rect.prototype={___init:function(d){Kinetic.Shape.call(this,d);this.className="Rect";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(d){var e=this.getCornerRadius(),c=this.getWidth(),a=this.getHeight();d.beginPath();e?(d.moveTo(e,0),d.lineTo(c-e,0),d.arc(c-e,e,e,3*Math.PI/2,0,!1),d.lineTo(c,a-e),d.arc(c-e,a-e,e,0,Math.PI/2,!1),d.lineTo(e,a),d.arc(e,a-e,e,Math.PI/2,Math.PI,!1),d.lineTo(0,e),d.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):d.rect(0,
0,c,a);d.closePath();d.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0);Kinetic.Collection.mapMethods(Kinetic.Rect)})();
(function(){var d=2*Math.PI-1E-4;Kinetic.Circle=function(d){this.___init(d)};Kinetic.Circle.prototype={___init:function(d){Kinetic.Shape.call(this,d);this.className="Circle";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath();e.arc(0,0,this.getRadius(),0,d,!1);e.closePath();e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(d){Kinetic.Node.prototype.setWidth.call(this,d);this.setRadius(d/2)},setHeight:function(d){Kinetic.Node.prototype.setHeight.call(this,
d);this.setRadius(d/2)}};Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0);Kinetic.Collection.mapMethods(Kinetic.Circle)})();
(function(){var d=2*Math.PI-1E-4;Kinetic.Ellipse=function(d){this.___init(d)};Kinetic.Ellipse.prototype={___init:function(d){Kinetic.Shape.call(this,d);this.className="Ellipse";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var c=this.getRadiusX(),a=this.getRadiusY();e.beginPath();e.save();c!==a&&e.scale(1,a/c);e.arc(0,0,c,0,d,!1);e.restore();e.closePath();e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadiusX()},getHeight:function(){return 2*this.getRadiusY()},setWidth:function(d){Kinetic.Node.prototype.setWidth.call(this,
d);this.setRadius({x:d/2})},setHeight:function(d){Kinetic.Node.prototype.setHeight.call(this,d);this.setRadius({y:d/2})}};Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0);Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0);Kinetic.Collection.mapMethods(Kinetic.Ellipse)})();
(function(){var d=2*Math.PI-1E-4;Kinetic.Ring=function(d){this.___init(d)};Kinetic.Ring.prototype={___init:function(d){Kinetic.Shape.call(this,d);this.className="Ring";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath();e.arc(0,0,this.getInnerRadius(),0,d,!1);e.moveTo(this.getOuterRadius(),0);e.arc(0,0,this.getOuterRadius(),d,0,!0);e.closePath();e.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(d){Kinetic.Node.prototype.setWidth.call(this,
d);this.setOuterRadius(d/2)},setHeight:function(d){Kinetic.Node.prototype.setHeight.call(this,d);this.setOuterRadius(d/2)}};Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0);Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0);Kinetic.Collection.mapMethods(Kinetic.Ring)})();
(function(){Kinetic.Wedge=function(d){this.___init(d)};Kinetic.Wedge.prototype={___init:function(d){Kinetic.Shape.call(this,d);this.className="Wedge";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(d){d.beginPath();d.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise());d.lineTo(0,0);d.closePath();d.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0);Kinetic.Factory.addGetterSetter(Kinetic.Wedge,
"angle",0);Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1);Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});Kinetic.Collection.mapMethods(Kinetic.Wedge)})();
(function(){Math.PI/180;Kinetic.Arc=function(d){this.___init(d)};Kinetic.Arc.prototype={___init:function(d){Kinetic.Shape.call(this,d);this.className="Arc";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(d){var e=Kinetic.getAngle(this.angle()),c=this.clockwise();d.beginPath();d.arc(0,0,this.getOuterRadius(),0,e,c);d.arc(0,0,this.getInnerRadius(),e,0,!c);d.closePath();d.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",
0);Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0);Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0);Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1);Kinetic.Collection.mapMethods(Kinetic.Arc)})();
(function(){Kinetic.Image=function(d){this.___init(d)};Kinetic.Image.prototype={___init:function(d){Kinetic.Shape.call(this,d);this.className="Image";this.sceneFunc(this._sceneFunc);this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()&&this.getStage()},_sceneFunc:function(d){var e,c,a,f=this.getWidth(),g=this.getHeight(),h=this.getImage();h&&(e=this.getCropWidth(),c=this.getCropHeight(),a=e&&c?[h,this.getCropX(),this.getCropY(),
e,c,0,0,f,g]:[h,0,0,f,g]);(this.hasFill()||this.hasStroke()||this.hasShadow())&&(d.beginPath(),d.rect(0,0,f,g),d.closePath(),d.fillStrokeShape(this));h&&d.drawImage.apply(d,a)},_hitFunc:function(d){var e=this.getWidth(),c=this.getHeight();d.beginPath();d.rect(0,0,e,c);d.closePath();d.fillStrokeShape(this)},getWidth:function(){var d=this.getImage();return this.attrs.width||(d?d.width:0)},getHeight:function(){var d=this.getImage();return this.attrs.height||(d?d.height:0)}};Kinetic.Util.extend(Kinetic.Image,
Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Image,"image");Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]);Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0);Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0);Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0);Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0);Kinetic.Collection.mapMethods(Kinetic.Image)})();
(function(){function d(a){a.fillText(this.partialText,0,0)}function e(a){a.strokeText(this.partialText,0,0)}var c="fontFamily fontSize fontStyle fontVariant padding align lineHeight text width height wrap".split(" "),a=c.length,f=Kinetic.Util.createCanvasElement().getContext("2d");Kinetic.Text=function(a){this.___init(a)};Kinetic.Text.prototype={___init:function(f){void 0===f.width&&(f.width="auto");void 0===f.height&&(f.height="auto");Kinetic.Shape.call(this,f);this._fillFunc=d;this._strokeFunc=
e;this.className="Text";for(f=0;a>f;f++)this.on(c[f]+"Change.kinetic",this._setTextData);this._setTextData();this.sceneFunc(this._sceneFunc);this.hitFunc(this._hitFunc)},_sceneFunc:function(a){var c=this.getPadding();var d=this.getTextHeight();var f=this.getLineHeight()*d,e=this.textArr,g=e.length,r=this.getWidth();a.setAttr("font",this._getContextFont());a.setAttr("textBaseline","middle");a.setAttr("textAlign","left");a.save();a.translate(c,0);a.translate(0,c+d/2);for(d=0;g>d;d++){var t=e[d],v=t.text;
t=t.width;a.save();"right"===this.getAlign()?a.translate(r-t-2*c,0):"center"===this.getAlign()&&a.translate((r-t-2*c)/2,0);this.partialText=v;a.fillStrokeShape(this);a.restore();a.translate(0,f)}a.restore()},_hitFunc:function(a){var c=this.getWidth(),d=this.getHeight();a.beginPath();a.rect(0,0,c,d);a.closePath();a.fillStrokeShape(this)},setText:function(a){a=Kinetic.Util._isString(a)?a:a.toString();return this._setAttr("text",a),this},getWidth:function(){return"auto"===this.attrs.width?this.getTextWidth()+
2*this.getPadding():this.attrs.width},getHeight:function(){return"auto"===this.attrs.height?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(a){var c,d=this.getFontSize();return f.save(),f.font=this._getContextFont(),c=f.measureText(a),f.restore(),{width:c.width,height:parseInt(d,10)}},_getContextFont:function(){return this.getFontStyle()+
" "+this.getFontVariant()+" "+this.getFontSize()+"px "+this.getFontFamily()},_addTextLine:function(a,c){return this.textArr.push({text:a,width:c})},_getTextWidth:function(a){return f.measureText(a).width},_setTextData:function(){var a=this.getText().split("\n"),c=+this.getFontSize(),d=0,e=this.getLineHeight()*c,q=this.attrs.width,p=this.attrs.height,r="auto"!==q,t="auto"!==p,v=this.getPadding();q-=2*v;p-=2*v;v=0;var k=this.getWrap(),x="none"!==k;k="char"!==k&&x;this.textArr=[];f.save();f.font=this._getContextFont();
for(var y=0,C=a.length;C>y;++y){var E=a[y],B=this._getTextWidth(E);if(r&&B>q)for(;0<E.length;){for(var I=0,D=E.length,N="",H=0;D>I;){var X=I+D>>>1,Q=E.slice(0,X+1),z=this._getTextWidth(Q);q>=z?(I=X+1,N=Q,H=z):D=X}if(!N)break;k&&(D=Math.max(N.lastIndexOf(" "),N.lastIndexOf("-"))+1,0<D&&(I=D,N=N.slice(0,I),H=this._getTextWidth(N)));if(this._addTextLine(N,H),d=Math.max(d,H),v+=e,!x||t&&v+e>p)break;if(E=E.slice(I),0<E.length&&(B=this._getTextWidth(E),q>=B)){this._addTextLine(E,B);v+=e;d=Math.max(d,B);
break}}else this._addTextLine(E,B),v+=e,d=Math.max(d,B);if(t&&v+e>p)break}f.restore();this.textHeight=c;this.textWidth=d}};Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial");Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12);Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle","normal");Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant","normal");Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0);Kinetic.Factory.addGetterSetter(Kinetic.Text,
"align","left");Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1);Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap","word");Kinetic.Factory.addGetter(Kinetic.Text,"text","");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text");Kinetic.Collection.mapMethods(Kinetic.Text)})();
(function(){Kinetic.Line=function(d){this.___init(d)};Kinetic.Line.prototype={___init:function(d){Kinetic.Shape.call(this,d);this.className="Line";this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")});this.sceneFunc(this._sceneFunc)},_sceneFunc:function(d){var e=this.getPoints(),c=e.length;var a=this.getTension();var f=this.getClosed();if(d.beginPath(),d.moveTo(e[0],e[1]),0!==a&&4<c){a=this.getTensionPoints();var g=a.length;var h=
f?0:4;for(f||d.quadraticCurveTo(a[0],a[1],a[2],a[3]);g-2>h;)d.bezierCurveTo(a[h++],a[h++],a[h++],a[h++],a[h++],a[h++]);f||d.quadraticCurveTo(a[g-2],a[g-1],e[c-2],e[c-1])}else for(h=2;c>h;h+=2)d.lineTo(e[h],e[h+1]);f?(d.closePath(),d.fillStrokeShape(this)):d.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},
_getTensionPointsClosed:function(){var d=this.getPoints(),e=d.length,c=this.getTension(),a=Kinetic.Util,f=a._getControlPoints(d[e-2],d[e-1],d[0],d[1],d[2],d[3],c);a=a._getControlPoints(d[e-4],d[e-3],d[e-2],d[e-1],d[0],d[1],c);c=Kinetic.Util._expandPoints(d,c);return[f[2],f[3]].concat(c).concat([a[0],a[1],d[e-2],d[e-1],a[2],a[3],f[0],f[1],d[0],d[1]])}};Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1);Kinetic.Factory.addGetterSetter(Kinetic.Line,
"tension",0);Kinetic.Factory.addGetterSetter(Kinetic.Line,"points");Kinetic.Collection.mapMethods(Kinetic.Line)})();
(function(){Kinetic.Sprite=function(d){this.___init(d)};Kinetic.Sprite.prototype={___init:function(d){Kinetic.Shape.call(this,d);this.className="Sprite";this.anim=new Kinetic.Animation;this.on("animationChange.kinetic",function(){this.frameIndex(0)});this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())});this.sceneFunc(this._sceneFunc);this.hitFunc(this._hitFunc)},_sceneFunc:function(d){var e=this.getAnimation(),c=4*this.frameIndex(),
a=this.getAnimations()[e];e=a[c+0];var f=a[c+1],g=a[c+2];c=a[c+3];(a=this.getImage())&&d.drawImage(a,e,f,g,c,0,0,g,c)},_hitFunc:function(d){var e=this.getAnimation(),c=4*this.frameIndex(),a=this.getAnimations()[e];e=a[c+2];c=a[c+3];d.beginPath();d.rect(0,0,e,c);d.closePath();d.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var d=this;this.interval=setInterval(function(){d._updateIndex()},1E3/this.getFrameRate())},
start:function(){var d=this.getLayer();this.anim.setLayers(d);this._setInterval();this.anim.start()},stop:function(){this.anim.stop();clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var d=this.frameIndex(),e=this.getAnimation();e=this.getAnimations()[e].length/4;this.frameIndex(e-1>d?d+1:0)}};Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation");Kinetic.Factory.addGetterSetter(Kinetic.Sprite,
"animations");Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image");Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0);Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17);Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});Kinetic.Collection.mapMethods(Kinetic.Sprite)})();
(function(){Kinetic.Path=function(d){this.___init(d)};Kinetic.Path.prototype={___init:function(d){this.dataArray=[];var e=this;Kinetic.Shape.call(this,d);this.className="Path";this.dataArray=Kinetic.Path.parsePathData(this.getData());this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.getData())});this.sceneFunc(this._sceneFunc)},_sceneFunc:function(d){var e=this.dataArray,c=!1;d.beginPath();for(var a=0;a<e.length;a++){var f=e[a].points;switch(e[a].command){case "L":d.lineTo(f[0],
f[1]);break;case "M":d.moveTo(f[0],f[1]);break;case "C":d.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case "Q":d.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case "A":var g=f[0],h=f[1],l=f[2],m=f[3],q=f[4],p=f[5],r=f[6];f=f[7];var t=l>m?l:m,v=l>m?1:l/m;l=l>m?m/l:1;d.translate(g,h);d.rotate(r);d.scale(v,l);d.arc(0,0,t,q,q+p,1-f);d.scale(1/v,1/l);d.rotate(-r);d.translate(-g,-h);break;case "z":d.closePath(),c=!0}}c?d.fillStrokeShape(this):d.strokeShape(this)}};Kinetic.Util.extend(Kinetic.Path,
Kinetic.Shape);Kinetic.Path.getLineLength=function(d,e,c,a){return Math.sqrt((c-d)*(c-d)+(a-e)*(a-e))};Kinetic.Path.getPointOnLine=function(d,e,c,a,f,g,h){void 0===g&&(g=e);void 0===h&&(h=c);var l=(f-c)/(a-e+1E-8),m=Math.sqrt(d*d/(1+l*l));e>a&&(m*=-1);var q=l*m;if(a===e)e={x:g,y:h+q};else if((h-c)/(g-e+1E-8)===l)e={x:g+m,y:h+q};else{q=this.getLineLength(e,c,a,f);if(1E-8>q)return;m=((g-e)*(a-e)+(h-c)*(f-c))/(q*q);q=e+m*(a-e);c+=m*(f-c);g=this.getLineLength(g,h,q,c);d=Math.sqrt(d*d-g*g);m=Math.sqrt(d*
d/(1+l*l));e>a&&(m*=-1);e={x:q+m,y:c+l*m}}return e};Kinetic.Path.getPointOnCubicBezier=function(d,e,c,a,f,g,h,l,m){return{x:l*d*d*d+3*g*d*d*(1-d)+3*a*d*(1-d)*(1-d)+e*(1-d)*(1-d)*(1-d),y:m*d*d*d+3*h*d*d*(1-d)+3*f*d*(1-d)*(1-d)+c*(1-d)*(1-d)*(1-d)}};Kinetic.Path.getPointOnQuadraticBezier=function(d,e,c,a,f,g,h){return{x:g*d*d+2*a*d*(1-d)+e*(1-d)*(1-d),y:h*d*d+2*f*d*(1-d)+c*(1-d)*(1-d)}};Kinetic.Path.getPointOnEllipticalArc=function(d,e,c,a,f,g){var h=Math.cos(g);g=Math.sin(g);c*=Math.cos(f);a*=Math.sin(f);
return{x:d+(c*h-a*g),y:e+(c*g+a*h)}};Kinetic.Path.parsePathData=function(d){if(!d)return[];var e="mMlLvVhHzZcCqQtTsSaA".split("");var c=d.replace(/ /g,",");for(d=0;d<e.length;d++)c=c.replace(new RegExp(e[d],"g"),"|"+e[d]);e=c.split("|");c=[];var a=0,f=0;for(d=1;d<e.length;d++){var g=e[d],h=g.charAt(0);g=g.slice(1);g=g.replace(/,-/g,"-");g=g.replace(/-/g,",-");g=g.replace(/e,-/g,"e-");g=g.split(",");0<g.length&&""===g[0]&&g.shift();for(var l=0;l<g.length;l++)g[l]=parseFloat(g[l]);for(;0<g.length&&
!isNaN(g[0]);){var m;var q=null;var p=[];l=a;var r=f;switch(h){case "l":a+=g.shift();f+=g.shift();q="L";p.push(a,f);break;case "L":a=g.shift();f=g.shift();p.push(a,f);break;case "m":h=g.shift();var t=g.shift();if(a+=h,f+=t,q="M",2<c.length&&"z"===c[c.length-1].command)for(m=c.length-2;0<=m;m--)if("M"===c[m].command){a=c[m].points[0]+h;f=c[m].points[1]+t;break}p.push(a,f);h="l";break;case "M":a=g.shift();f=g.shift();q="M";p.push(a,f);h="L";break;case "h":a+=g.shift();q="L";p.push(a,f);break;case "H":a=
g.shift();q="L";p.push(a,f);break;case "v":f+=g.shift();q="L";p.push(a,f);break;case "V":f=g.shift();q="L";p.push(a,f);break;case "C":p.push(g.shift(),g.shift(),g.shift(),g.shift());a=g.shift();f=g.shift();p.push(a,f);break;case "c":p.push(a+g.shift(),f+g.shift(),a+g.shift(),f+g.shift());a+=g.shift();f+=g.shift();q="C";p.push(a,f);break;case "S":t=a;m=f;q=c[c.length-1];"C"===q.command&&(t=a+(a-q.points[2]),m=f+(f-q.points[3]));p.push(t,m,g.shift(),g.shift());a=g.shift();f=g.shift();q="C";p.push(a,
f);break;case "s":t=a;m=f;q=c[c.length-1];"C"===q.command&&(t=a+(a-q.points[2]),m=f+(f-q.points[3]));p.push(t,m,a+g.shift(),f+g.shift());a+=g.shift();f+=g.shift();q="C";p.push(a,f);break;case "Q":p.push(g.shift(),g.shift());a=g.shift();f=g.shift();p.push(a,f);break;case "q":p.push(a+g.shift(),f+g.shift());a+=g.shift();f+=g.shift();q="Q";p.push(a,f);break;case "T":t=a;m=f;q=c[c.length-1];"Q"===q.command&&(t=a+(a-q.points[0]),m=f+(f-q.points[1]));a=g.shift();f=g.shift();q="Q";p.push(t,m,a,f);break;
case "t":t=a;m=f;q=c[c.length-1];"Q"===q.command&&(t=a+(a-q.points[0]),m=f+(f-q.points[1]));a+=g.shift();f+=g.shift();q="Q";p.push(t,m,a,f);break;case "A":p=g.shift();t=g.shift();m=g.shift();var v=g.shift();var k=g.shift();var x=a;var y=f;a=g.shift();f=g.shift();q="A";p=this.convertEndpointToCenterParameterization(x,y,a,f,v,k,p,t,m);break;case "a":p=g.shift(),t=g.shift(),m=g.shift(),v=g.shift(),k=g.shift(),x=a,y=f,a+=g.shift(),f+=g.shift(),q="A",p=this.convertEndpointToCenterParameterization(x,y,
a,f,v,k,p,t,m)}c.push({command:q||h,points:p,start:{x:l,y:r},pathLength:this.calcLength(l,r,q||h,p)})}"z"!==h&&"Z"!==h||c.push({command:"z",points:[],start:void 0,pathLength:0})}return c};Kinetic.Path.calcLength=function(d,e,c,a){var f,g=Kinetic.Path;switch(c){case "L":return g.getLineLength(d,e,a[0],a[1]);case "C":c=0;var h=g.getPointOnCubicBezier(0,d,e,a[0],a[1],a[2],a[3],a[4],a[5]);for(f=.01;1>=f;f+=.01){var l=g.getPointOnCubicBezier(f,d,e,a[0],a[1],a[2],a[3],a[4],a[5]);c+=g.getLineLength(h.x,
h.y,l.x,l.y);h=l}return c;case "Q":c=0;h=g.getPointOnQuadraticBezier(0,d,e,a[0],a[1],a[2],a[3]);for(f=.01;1>=f;f+=.01)l=g.getPointOnQuadraticBezier(f,d,e,a[0],a[1],a[2],a[3]),c+=g.getLineLength(h.x,h.y,l.x,l.y),h=l;return c;case "A":c=0;f=a[4];var m=a[5];d=a[4]+m;e=Math.PI/180;if(Math.abs(f-d)<e&&(e=Math.abs(f-d)),h=g.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],f,0),0>m)for(f-=e;f>d;f-=e)l=g.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],f,0),c+=g.getLineLength(h.x,h.y,l.x,l.y),h=l;else for(f+=e;d>f;f+=
e)l=g.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],f,0),c+=g.getLineLength(h.x,h.y,l.x,l.y),h=l;return l=g.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],d,0),c+g.getLineLength(h.x,h.y,l.x,l.y)}return 0};Kinetic.Path.convertEndpointToCenterParameterization=function(d,e,c,a,f,g,h,l,m){m*=Math.PI/180;var q=Math.cos(m)*(d-c)/2+Math.sin(m)*(e-a)/2,p=-1*Math.sin(m)*(d-c)/2+Math.cos(m)*(e-a)/2,r=q*q/(h*h)+p*p/(l*l);1<r&&(h*=Math.sqrt(r),l*=Math.sqrt(r));r=Math.sqrt((h*h*l*l-h*h*p*p-l*l*q*q)/(h*h*p*p+l*l*q*
q));f===g&&(r*=-1);isNaN(r)&&(r=0);f=r*h*p/l;r=r*-l*q/h;d=(d+c)/2+Math.cos(m)*f-Math.sin(m)*r;e=(e+a)/2+Math.sin(m)*f+Math.cos(m)*r;var t=function(a,c){return(a[0]*c[0]+a[1]*c[1])/(Math.sqrt(a[0]*a[0]+a[1]*a[1])*Math.sqrt(c[0]*c[0]+c[1]*c[1]))},v=function(a,c){return(a[0]*c[1]<a[1]*c[0]?-1:1)*Math.acos(t(a,c))};a=v([1,0],[(q-f)/h,(p-r)/l]);c=[(q-f)/h,(p-r)/l];q=[(-1*q-f)/h,(-1*p-r)/l];p=v(c,q);return-1>=t(c,q)&&(p=Math.PI),1<=t(c,q)&&(p=0),0===g&&0<p&&(p-=2*Math.PI),1===g&&0>p&&(p+=2*Math.PI),[d,
e,h,l,a,p,m,g]};Kinetic.Factory.addGetterSetter(Kinetic.Path,"data");Kinetic.Collection.mapMethods(Kinetic.Path)})();
(function(){function d(c){c.fillText(this.partialText,0,0)}function e(c){c.strokeText(this.partialText,0,0)}Kinetic.TextPath=function(c){this.___init(c)};Kinetic.TextPath.prototype={___init:function(c){var a=this;this.dummyCanvas=Kinetic.Util.createCanvasElement();this.dataArray=[];Kinetic.Shape.call(this,c);this._fillFunc=d;this._strokeFunc=e;this._fillFuncHit=d;this._strokeFuncHit=e;this.className="TextPath";this.dataArray=Kinetic.Path.parsePathData(this.attrs.data);this.on("dataChange.kinetic",
function(){a.dataArray=Kinetic.Path.parsePathData(this.attrs.data)});this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",a._setTextData);a._setTextData();this.sceneFunc(this._sceneFunc)},_sceneFunc:function(c){c.setAttr("font",this._getContextFont());c.setAttr("textBaseline","middle");c.setAttr("textAlign","left");c.save();for(var a=this.glyphInfo,d=0;d<a.length;d++){c.save();var e=a[d].p0;c.translate(e.x,e.y);c.rotate(a[d].rotation);this.partialText=a[d].text;c.fillStrokeShape(this);
c.restore()}c.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(c){Kinetic.Text.prototype.setText.call(this,c)},_getTextSize:function(c){var a=this.dummyCanvas.getContext("2d");a.save();a.font=this._getContextFont();c=a.measureText(c);return a.restore(),{width:c.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var c=this,a=this._getTextSize(this.attrs.text);this.textWidth=a.width;this.textHeight=a.height;
this.glyphInfo=[];var d,e;a=this.attrs.text.split("");for(var h=-1,l=0,m=function(a){a=c._getTextSize(a).width;var f=0,g=0;for(d=void 0;.01<Math.abs(a-f)/a&&25>g;){g++;for(var m=f;void 0===e;){a:{l=0;var p=c.dataArray;for(var q=h+1;q<p.length;q++){if(0<p[q].pathLength){p=(h=q,p[q]);break a}"M"==p[q].command&&(r={x:p[q].points[0],y:p[q].points[1]})}p={}}(e=p)&&m+e.pathLength<a&&(m+=e.pathLength,e=void 0)}if(e==={}||void 0===r)break;m=!1;switch(e.command){case "L":Kinetic.Path.getLineLength(r.x,r.y,
e.points[0],e.points[1])>a?d=Kinetic.Path.getPointOnLine(a,r.x,r.y,e.points[0],e.points[1],r.x,r.y):e=void 0;break;case "A":p=e.points[4];q=e.points[5];var t=e.points[4]+q;0===l?l=p+1E-8:a>f?l+=Math.PI/180*q/Math.abs(q):l-=Math.PI/360*q/Math.abs(q);(0>q&&t>l||0<=q&&l>t)&&(l=t,m=!0);d=Kinetic.Path.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],l,e.points[6]);break;case "C":0===l?l=a>e.pathLength?1E-8:a/e.pathLength:a>f?l+=(a-f)/e.pathLength:l-=(f-a)/e.pathLength;1<l&&(l=1,
m=!0);d=Kinetic.Path.getPointOnCubicBezier(l,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);break;case "Q":0===l?l=a/e.pathLength:a>f?l+=(a-f)/e.pathLength:l-=(f-a)/e.pathLength,1<l&&(l=1,m=!0),d=Kinetic.Path.getPointOnQuadraticBezier(l,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3])}void 0!==d&&(f=Kinetic.Path.getLineLength(r.x,r.y,d.x,d.y));m&&(e=void 0)}},q=0;q<a.length&&(m(a[q]),void 0!==r&&void 0!==d);q++){var p=Kinetic.Path.getLineLength(r.x,
r.y,d.x,d.y);p=Kinetic.Path.getPointOnLine(p/2,r.x,r.y,d.x,d.y);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:a[q],rotation:Math.atan2(d.y-r.y,d.x-r.x),p0:r,p1:d});var r=d}}};Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont;Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial");Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12);Kinetic.Factory.addGetterSetter(Kinetic.TextPath,
"fontStyle","normal");Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant","normal");Kinetic.Factory.addGetter(Kinetic.TextPath,"text","");Kinetic.Collection.mapMethods(Kinetic.TextPath)})();
(function(){Kinetic.RegularPolygon=function(d){this.___init(d)};Kinetic.RegularPolygon.prototype={___init:function(d){Kinetic.Shape.call(this,d);this.className="RegularPolygon";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(d){var e,c=this.attrs.sides,a=this.attrs.radius;d.beginPath();d.moveTo(0,0-a);for(e=1;c>e;e++){var f=a*Math.sin(2*e*Math.PI/c);var g=-1*a*Math.cos(2*e*Math.PI/c);d.lineTo(f,g)}d.closePath();d.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape);
Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0);Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0);Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)})();
(function(){Kinetic.Star=function(d){this.___init(d)};Kinetic.Star.prototype={___init:function(d){Kinetic.Shape.call(this,d);this.className="Star";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(d){var e=this.innerRadius(),c=this.outerRadius(),a=this.numPoints();d.beginPath();d.moveTo(0,0-c);for(var f=1;2*a>f;f++){var g=0===f%2?c:e;d.lineTo(g*Math.sin(f*Math.PI/a),-1*g*Math.cos(f*Math.PI/a))}d.closePath();d.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Star,
"numPoints",5);Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0);Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0);Kinetic.Collection.mapMethods(Kinetic.Star)})();
(function(){var d="fontFamily fontSize fontStyle padding lineHeight text".split(" "),e=d.length;Kinetic.Label=function(c){this.____init(c)};Kinetic.Label.prototype={____init:function(c){var a=this;Kinetic.Group.call(this,c);this.className="Label";this.on("add.kinetic",function(c){a._addListeners(c.child);a._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(c){var a,f=this,g=function(){f._sync()};for(a=0;e>a;a++)c.on(d[a]+
"Change.kinetic",g)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var c,a,d,e,h,l,m,q=this.getText(),p=this.getTag();if(q&&p){switch(c=q.getWidth(),a=q.getHeight(),d=p.getPointerDirection(),e=p.getPointerWidth(),m=p.getPointerHeight(),h=0,l=0,d){case "up":h=c/2;l=-1*m;break;case "right":h=c+e;l=a/2;break;case "down":h=c/2;l=a+m;break;case "left":h=-1*e,l=a/2}p.setAttrs({x:-1*h,y:-1*l,width:c,height:a});q.setAttrs({x:-1*
h,y:-1*l})}}};Kinetic.Util.extend(Kinetic.Label,Kinetic.Group);Kinetic.Collection.mapMethods(Kinetic.Label);Kinetic.Tag=function(c){this.___init(c)};Kinetic.Tag.prototype={___init:function(c){Kinetic.Shape.call(this,c);this.className="Tag";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(c){var a=this.getWidth(),d=this.getHeight(),e=this.getPointerDirection(),h=this.getPointerWidth(),l=this.getPointerHeight();c.beginPath();c.moveTo(0,0);"up"===e&&(c.lineTo((a-h)/2,0),c.lineTo(a/2,-1*l),c.lineTo((a+
h)/2,0));c.lineTo(a,0);"right"===e&&(c.lineTo(a,(d-l)/2),c.lineTo(a+h,d/2),c.lineTo(a,(d+l)/2));c.lineTo(a,d);"down"===e&&(c.lineTo((a+h)/2,d),c.lineTo(a/2,d+l),c.lineTo((a-h)/2,d));c.lineTo(0,d);"left"===e&&(c.lineTo(0,(d+l)/2),c.lineTo(-1*h,d/2),c.lineTo(0,(d-l)/2));c.closePath();c.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection","none");Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0);Kinetic.Factory.addGetterSetter(Kinetic.Tag,
"pointerHeight",0);Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0);Kinetic.Collection.mapMethods(Kinetic.Tag)})();var hexcase=0,b64pad="";function hex_sha256(d){return rstr2hex(rstr_sha256(str2rstr_utf8(d)))}function b64_sha256(d){return rstr2b64(rstr_sha256(str2rstr_utf8(d)))}function any_sha256(d,e){return rstr2any(rstr_sha256(str2rstr_utf8(d)),e)}function hex_hmac_sha256(d,e){return rstr2hex(rstr_hmac_sha256(str2rstr_utf8(d),str2rstr_utf8(e)))}
function b64_hmac_sha256(d,e){return rstr2b64(rstr_hmac_sha256(str2rstr_utf8(d),str2rstr_utf8(e)))}function any_hmac_sha256(d,e,c){return rstr2any(rstr_hmac_sha256(str2rstr_utf8(d),str2rstr_utf8(e)),c)}function sha256_vm_test(){return"ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad"==hex_sha256("abc").toLowerCase()}function rstr_sha256(d){return binb2rstr(binb_sha256(rstr2binb(d),8*d.length))}
function rstr_hmac_sha256(d,e){var c=rstr2binb(d);16<c.length&&(c=binb_sha256(c,8*d.length));var a=Array(16);d=Array(16);for(var f=0;16>f;f++)a[f]=909522486^c[f],d[f]=1549556828^c[f];e=binb_sha256(a.concat(rstr2binb(e)),512+8*e.length);return binb2rstr(binb_sha256(d.concat(e),768))}function rstr2hex(d){for(var e,c=hexcase?"0123456789ABCDEF":"0123456789abcdef",a="",f=0;f<d.length;f++)e=d.charCodeAt(f),a+=c.charAt(e>>>4&15)+c.charAt(15&e);return a}
function rstr2b64(d){for(var e="",c=d.length,a=0;a<c;a+=3)for(var f=d.charCodeAt(a)<<16|(a+1<c?d.charCodeAt(a+1)<<8:0)|(a+2<c?d.charCodeAt(a+2):0),g=0;4>g;g++)8*a+6*g>8*d.length?e+=b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>>6*(3-g)&63);return e}
function rstr2any(d,e){var c,a,f,g=e.length,h=[],l=Array(Math.ceil(d.length/2));for(c=0;c<l.length;c++)l[c]=d.charCodeAt(2*c)<<8|d.charCodeAt(2*c+1);for(;0<l.length;){var m=[];for(c=f=0;c<l.length;c++)f=(f<<16)+l[c],f-=(a=Math.floor(f/g))*g,(0<m.length||0<a)&&(m[m.length]=a);h[h.length]=f;l=m}a="";for(c=h.length-1;0<=c;c--)a+=e.charAt(h[c]);d=Math.ceil(8*d.length/(Math.log(e.length)/Math.log(2)));for(c=a.length;c<d;c++)a=e[0]+a;return a}
function str2rstr_utf8(d){for(var e,c,a="",f=-1;++f<d.length;)e=d.charCodeAt(f),c=f+1<d.length?d.charCodeAt(f+1):0,55296<=e&&56319>=e&&56320<=c&&57343>=c&&(e=65536+((1023&e)<<10)+(1023&c),f++),127>=e?a+=String.fromCharCode(e):2047>=e?a+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?a+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(a+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return a}
function str2rstr_utf16le(d){for(var e="",c=0;c<d.length;c++)e+=String.fromCharCode(255&d.charCodeAt(c),d.charCodeAt(c)>>>8&255);return e}function str2rstr_utf16be(d){for(var e="",c=0;c<d.length;c++)e+=String.fromCharCode(d.charCodeAt(c)>>>8&255,255&d.charCodeAt(c));return e}function rstr2binb(d){for(var e=Array(d.length>>2),c=0;c<e.length;c++)e[c]=0;for(c=0;c<8*d.length;c+=8)e[c>>5]|=(255&d.charCodeAt(c/8))<<24-c%32;return e}
function binb2rstr(d){for(var e="",c=0;c<32*d.length;c+=8)e+=String.fromCharCode(d[c>>5]>>>24-c%32&255);return e}function sha256_S(d,e){return d>>>e|d<<32-e}function sha256_R(d,e){return d>>>e}function sha256_Ch(d,e,c){return d&e^~d&c}function sha256_Maj(d,e,c){return d&e^d&c^e&c}function sha256_Sigma0256(d){return sha256_S(d,2)^sha256_S(d,13)^sha256_S(d,22)}function sha256_Sigma1256(d){return sha256_S(d,6)^sha256_S(d,11)^sha256_S(d,25)}
function sha256_Gamma0256(d){return sha256_S(d,7)^sha256_S(d,18)^sha256_R(d,3)}function sha256_Gamma1256(d){return sha256_S(d,17)^sha256_S(d,19)^sha256_R(d,10)}function sha256_Sigma0512(d){return sha256_S(d,28)^sha256_S(d,34)^sha256_S(d,39)}function sha256_Sigma1512(d){return sha256_S(d,14)^sha256_S(d,18)^sha256_S(d,41)}function sha256_Gamma0512(d){return sha256_S(d,1)^sha256_S(d,8)^sha256_R(d,7)}function sha256_Gamma1512(d){return sha256_S(d,19)^sha256_S(d,61)^sha256_R(d,6)}
var sha256_K=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,
-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];
function binb_sha256(d,e){var c,a,f=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],g=Array(64);d[e>>5]|=128<<24-e%32;d[15+(e+64>>9<<4)]=e;for(c=0;c<d.length;c+=16){e=f[0];var h=f[1];var l=f[2];var m=f[3];var q=f[4];var p=f[5];var r=f[6];var t=f[7];for(a=0;64>a;a++){g[a]=16>a?d[a+c]:safe_add(safe_add(safe_add(sha256_Gamma1256(g[a-2]),g[a-7]),sha256_Gamma0256(g[a-15])),g[a-16]);var v=safe_add(safe_add(safe_add(safe_add(t,sha256_Sigma1256(q)),sha256_Ch(q,
p,r)),sha256_K[a]),g[a]);var k=safe_add(sha256_Sigma0256(e),sha256_Maj(e,h,l));t=r;r=p;p=q;q=safe_add(m,v);m=l;l=h;h=e;e=safe_add(v,k)}f[0]=safe_add(e,f[0]);f[1]=safe_add(h,f[1]);f[2]=safe_add(l,f[2]);f[3]=safe_add(m,f[3]);f[4]=safe_add(q,f[4]);f[5]=safe_add(p,f[5]);f[6]=safe_add(r,f[6]);f[7]=safe_add(t,f[7])}return f}function safe_add(d,e){var c=(65535&d)+(65535&e);return(d>>16)+(e>>16)+(c>>16)<<16|65535&c}
var skel=function(){var d={breakpointIds:null,events:{},isInit:!1,obj:{attachments:{},breakpoints:{},head:null,states:{}},sd:"/",state:null,stateHandlers:{},stateId:"",vars:{},DOMReady:null,indexOf:null,isArray:null,iterate:null,matchesMedia:null,extend:function(e,c){d.iterate(c,function(a){d.isArray(c[a])?(d.isArray(e[a])||(e[a]=[]),d.extend(e[a],c[a])):"object"==_typeof(c[a])?("object"!=_typeof(e[a])&&(e[a]={}),d.extend(e[a],c[a])):e[a]=c[a]})},newStyle:function(d){var c=document.createElement("style");
return c.type="text/css",c.innerHTML=d,c},_canUse:null,canUse:function(e){d._canUse||(d._canUse=document.createElement("div"));var c=d._canUse.style,a=e.charAt(0).toUpperCase()+e.slice(1);return e in c||"Moz"+a in c||"Webkit"+a in c||"O"+a in c||"ms"+a in c},on:function(e,c){var a=e.split(/[\s]+/);return d.iterate(a,function(f){f=a[f];if(d.isInit){if("init"==f)return void c();if("change"==f)c();else{var e=f.charAt(0);if("+"==e||"!"==e){var h=f.substring(1);if(h in d.obj.breakpoints)if("+"==e&&d.obj.breakpoints[h].active)c();
else if("!"==e&&!d.obj.breakpoints[h].active)return void c()}}}d.events[f]||(d.events[f]=[]);d.events[f].push(c)}),d},trigger:function(e){return d.events[e]&&0!=d.events[e].length?(d.iterate(d.events[e],function(c){d.events[e][c]()}),d):void 0},breakpoint:function(e){return d.obj.breakpoints[e]},breakpoints:function(e){function c(a,c){this.name=this.id=a;this.media=c;this.wasActive=this.active=!1}return c.prototype.matches=function(){return d.matchesMedia(this.media)},c.prototype.sync=function(){this.wasActive=
this.active;this.active=this.matches()},d.iterate(e,function(a){d.obj.breakpoints[a]=new c(a,e[a])}),window.setTimeout(function(){d.poll()},0),d},addStateHandler:function(e,c){d.stateHandlers[e]=c},callStateHandler:function(e){var c=d.stateHandlers[e]();d.iterate(c,function(a){d.state.attachments.push(c[a])})},changeState:function(e){d.iterate(d.obj.breakpoints,function(c){d.obj.breakpoints[c].sync()});d.vars.lastStateId=d.stateId;d.stateId=e;d.breakpointIds=d.stateId===d.sd?[]:d.stateId.substring(1).split(d.sd);
d.obj.states[d.stateId]?d.state=d.obj.states[d.stateId]:(d.obj.states[d.stateId]={attachments:[]},d.state=d.obj.states[d.stateId],d.iterate(d.stateHandlers,d.callStateHandler));d.detachAll(d.state.attachments);d.attachAll(d.state.attachments);d.vars.stateId=d.stateId;d.vars.state=d.state;d.trigger("change");d.iterate(d.obj.breakpoints,function(c){d.obj.breakpoints[c].active?d.obj.breakpoints[c].wasActive||d.trigger("+"+c):d.obj.breakpoints[c].wasActive&&d.trigger("-"+c)})},generateStateConfig:function(e,
c){var a={};return d.extend(a,e),d.iterate(d.breakpointIds,function(f){d.extend(a,c[d.breakpointIds[f]])}),a},getStateId:function(){var e="";return d.iterate(d.obj.breakpoints,function(c){c=d.obj.breakpoints[c];c.matches()&&(e+=d.sd+c.id)}),e},poll:function(){var e=d.getStateId();""===e&&(e=d.sd);e!==d.stateId&&d.changeState(e)},_attach:null,attach:function(e){var c=d.obj.head,a=e.element;return a.parentNode&&a.parentNode.tagName?!1:(d._attach||(d._attach=c.firstChild),c.insertBefore(a,d._attach.nextSibling),
e.permanent&&(d._attach=a),!0)},attachAll:function(e){var c=[];d.iterate(e,function(a){c[e[a].priority]||(c[e[a].priority]=[]);c[e[a].priority].push(e[a])});c.reverse();d.iterate(c,function(a){d.iterate(c[a],function(f){d.attach(c[a][f])})})},detach:function(d){var c=d.element;return d.permanent||!c.parentNode||c.parentNode&&!c.parentNode.tagName?!1:(c.parentNode.removeChild(c),!0)},detachAll:function(e){var c={};d.iterate(e,function(a){c[e[a].id]=!0});d.iterate(d.obj.attachments,function(a){a in
c||d.detach(d.obj.attachments[a])})},attachment:function(e){return e in d.obj.attachments?d.obj.attachments[e]:null},newAttachment:function(e,c,a,f){return d.obj.attachments[e]={id:e,element:c,priority:a,permanent:f}},init:function(){d.initMethods();d.initVars();d.initEvents();d.obj.head=document.getElementsByTagName("head")[0];d.isInit=!0;d.trigger("init")},initEvents:function(){d.on("resize",function(){d.poll()});d.on("orientationChange",function(){d.poll()});d.DOMReady(function(){d.trigger("ready")});
window.onload&&d.on("load",window.onload);window.onload=function(){d.trigger("load")};window.onresize&&d.on("resize",window.onresize);window.onresize=function(){d.trigger("resize")};window.onorientationchange&&d.on("orientationChange",window.onorientationchange);window.onorientationchange=function(){d.trigger("orientationChange")}},initMethods:function(){document.addEventListener?!function(e,c){d.DOMReady=c()}("domready",function(){var d,c=[],a=document,f=/^loaded|^c/.test(a.readyState);return a.addEventListener("DOMContentLoaded",
d=function(){a.removeEventListener("DOMContentLoaded",d);var e;for(f=1;e=c.shift();)e()}),function(a){f?a():c.push(a)}}):!function(e,c){d.DOMReady=c()}("domready",function(d){function c(a){for(m=1;a=f.shift();)a()}var a,f=[],e=document,h=e.documentElement,l=h.doScroll,m=(l?/^loaded|^c/:/^loaded|c/).test(e.readyState);return e.addEventListener&&e.addEventListener("DOMContentLoaded",a=function(){e.removeEventListener("DOMContentLoaded",a,!1);c()},!1),l&&e.attachEvent("onreadystatechange",a=function(){/^c/.test(e.readyState)&&
(e.detachEvent("onreadystatechange",a),c())}),d=l?function(a){self!=top?m?a():f.push(a):function(){try{h.doScroll("left")}catch(p){return setTimeout(function(){d(a)},50)}a()}()}:function(a){m?a():f.push(a)}});Array.prototype.indexOf?d.indexOf=function(d,c){return d.indexOf(c)}:d.indexOf=function(d,c){if("string"==typeof d)return d.indexOf(c);var a;c=c?c:0;if(!this)throw new TypeError;if(a=this.length,0===a||c>=a)return-1;for(0>c&&(c=a-Math.abs(c));a>c;c++)if(this[c]===d)return c;return-1};Array.isArray?
d.isArray=function(d){return Array.isArray(d)}:d.isArray=function(d){return"[object Array]"===Object.prototype.toString.call(d)};Object.keys?d.iterate=function(d,c){if(!d)return[];var a,f=Object.keys(d);for(a=0;f[a]&&!1!==c(f[a],d[f[a]]);a++);}:d.iterate=function(d,c){if(!d)return[];for(var a in d)if(Object.prototype.hasOwnProperty.call(d,a)&&!1===c(a,d[a]))break};window.matchMedia?d.matchesMedia=function(d){return""==d?!0:window.matchMedia(d).matches}:window.styleMedia||window.media?d.matchesMedia=
function(d){return""==d?!0:(window.styleMedia||window.media).matchMedium(d||"all")}:window.getComputedStyle?d.matchesMedia=function(d){if(""==d)return!0;var c=document.createElement("style"),a=document.getElementsByTagName("script")[0];c.type="text/css";c.id="matchmediajs-test";a.parentNode.insertBefore(c,a);a="getComputedStyle"in window&&window.getComputedStyle(c,null)||c.currentStyle;d="@media "+d+"{ #matchmediajs-test { width: 1px; } }";return c.styleSheet?c.styleSheet.cssText=d:c.textContent=
d,"1px"===a.width}:d.matchesMedia=function(d){if(""==d)return!0;var c,a={"min-width":null,"max-width":null},f=!1;var e=d.split(/\s+and\s+/);for(d=0;d<e.length;d++){var h=e[d];"("==h.charAt(0)&&(h=h.substring(1,h.length-1),c=h.split(/:\s+/),2==c.length&&(a[c[0].replace(/^\s+|\s+$/g,"")]=parseInt(c[1]),f=!0))}if(!f)return!1;c=document.documentElement.clientWidth;f=document.documentElement.clientHeight;return null!==a["min-width"]&&c<a["min-width"]||null!==a["max-width"]&&c>a["max-width"]||null!==a["min-height"]&&
f<a["min-height"]||null!==a["max-height"]&&f>a["max-height"]?!1:!0};navigator.userAgent.match(/MSIE ([0-9]+)/)&&9>RegExp.$1&&(d.newStyle=function(d){var c=document.createElement("span");return c.innerHTML='&nbsp;<style type="text/css">'+d+"</style>",c})},initVars:function(){var e=navigator.userAgent;var c="other";var a=0;var f=[["firefox",/Firefox\/([0-9\.]+)/],["bb",/BlackBerry.+Version\/([0-9\.]+)/],["bb",/BB[0-9]+.+Version\/([0-9\.]+)/],["opera",/OPR\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)/],
["edge",/Edge\/([0-9\.]+)/],["safari",/Version\/([0-9\.]+).+Safari/],["chrome",/Chrome\/([0-9\.]+)/],["ie",/MSIE ([0-9]+)/],["ie",/Trident\/.+rv:([0-9]+)/]];d.iterate(f,function(d,f){return e.match(f[1])?(c=f[0],a=parseFloat(RegExp.$1),!1):void 0});d.vars.browser=c;d.vars.browserVersion=a;c="other";a=0;f=[["ios",/([0-9_]+) like Mac OS X/,function(a){return a.replace("_",".").replace("_","")}],["ios",/CPU like Mac OS X/,function(a){return 0}],["wp",/Windows Phone ([0-9\.]+)/,null],["android",/Android ([0-9\.]+)/,
null],["mac",/Macintosh.+Mac OS X ([0-9_]+)/,function(a){return a.replace("_",".").replace("_","")}],["windows",/Windows NT ([0-9\.]+)/,null],["bb",/BlackBerry.+Version\/([0-9\.]+)/,null],["bb",/BB[0-9]+.+Version\/([0-9\.]+)/,null]];d.iterate(f,function(d,f){return e.match(f[1])?(c=f[0],a=parseFloat(f[2]?f[2](RegExp.$1):RegExp.$1),!1):void 0});d.vars.os=c;d.vars.osVersion=a;d.vars.IEVersion="ie"==d.vars.browser?d.vars.browserVersion:99;d.vars.touch="wp"==d.vars.os?0<navigator.msMaxTouchPoints:!!("ontouchstart"in
window);d.vars.mobile="wp"==d.vars.os||"android"==d.vars.os||"ios"==d.vars.os||"bb"==d.vars.os}};return d.init(),d}();!function(d,e){"function"==typeof define&&define.amd?define([],e):"object"==("undefined"===typeof exports?"undefined":_typeof(exports))?module.exports=e():d.skel=e()}(void 0,function(){return skel});
(function(d){skel.breakpoints({wide:"(max-width: 1680px)",normal:"(max-width: 1280px)",narrow:"(max-width: 980px)",narrower:"(max-width: 840px)",mobile:"(max-width: 736px)",mobilep:"(max-width: 480px)"});d(function(){d(window);d("body");d("#header");d("#banner");d("form").placeholder();skel.on("+narrower -narrower",function(){d.prioritize(".important\\28 narrower\\29",skel.breakpoint("narrower").active)})})})(jQuery);
(function(d){d.fn.navList=function(){$a=d(this).find("a");b=[];$a.each(function(){var e=d(this),c=Math.max(0,e.parents("li").length-1),a=e.attr("href"),f=e.attr("target");b.push('<a class="link depth-'+c+'"'+("undefined"!==typeof f&&""!=f?' target="'+f+'"':"")+("undefined"!==typeof a&&""!=a?' href="'+a+'"':"")+'><span class="indent-'+c+'"></span>'+e.text()+"</a>")});return b.join("")};d.fn.panel=function(e){if(0==this.length)return a;if(1<this.length){for(var c=0;c<this.length;c++)d(this[c]).panel(e);
return a}var a=d(this);c=d("body");var f=d(window),g=a.attr("id");var h=d.extend({delay:0,hideOnClick:!1,hideOnEscape:!1,hideOnSwipe:!1,resetScroll:!1,resetForms:!1,side:null,target:a,visibleClass:"visible"},e);"jQuery"!=typeof h.target&&(h.target=d(h.target));a._hide=function(c){h.target.hasClass(h.visibleClass)&&(c&&(c.preventDefault(),c.stopPropagation()),h.target.removeClass(h.visibleClass),window.setTimeout(function(){h.resetScroll&&a.scrollTop(0);h.resetForms&&a.find("form").each(function(){this.reset()})},
h.delay))};a.css("-ms-overflow-style","-ms-autohiding-scrollbar").css("-webkit-overflow-scrolling","touch");h.hideOnClick&&(a.find("a").css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),a.on("click","a",function(c){var f=d(this),e=f.attr("href"),l=f.attr("target");e&&"#"!=e&&""!=e&&e!="#"+g&&(c.preventDefault(),c.stopPropagation(),a._hide(),window.setTimeout(function(){"_blank"==l?window.open(e):window.location.href=e},h.delay+10))}));a.on("touchstart",function(c){a.touchPosX=c.originalEvent.touches[0].pageX;
a.touchPosY=c.originalEvent.touches[0].pageY});a.on("touchmove",function(c){if(null!==a.touchPosX&&null!==a.touchPosY){var d=a.touchPosX-c.originalEvent.touches[0].pageX,f=a.touchPosY-c.originalEvent.touches[0].pageY,e=a.outerHeight(),g=a.get(0).scrollHeight-a.scrollTop();if(h.hideOnSwipe){var l=!1;switch(h.side){case "left":l=20>f&&-20<f&&50<d;break;case "right":l=20>f&&-20<f&&-50>d;break;case "top":l=20>d&&-20<d&&50<f;break;case "bottom":l=20>d&&-20<d&&-50>f}if(l)return a.touchPosX=null,a.touchPosY=
null,a._hide(),!1}if(0>a.scrollTop()&&0>f||g>e-2&&g<e+2&&0<f)c.preventDefault(),c.stopPropagation()}});a.on("click touchend touchstart touchmove",function(a){a.stopPropagation()});a.on("click",'a[href="#'+g+'"]',function(a){a.preventDefault();a.stopPropagation();h.target.removeClass(h.visibleClass)});c.on("click touchend",function(c){a._hide(c)});c.on("click",'a[href="#'+g+'"]',function(a){a.preventDefault();a.stopPropagation();h.target.toggleClass(h.visibleClass)});if(h.hideOnEscape)f.on("keydown",
function(c){27==c.keyCode&&a._hide(c)});return a};d.fn.placeholder=function(){if("undefined"!=typeof document.createElement("input").placeholder)return d(this);if(0==this.length)return c;if(1<this.length){for(var e=0;e<this.length;e++)d(this[e]).placeholder();return c}var c=d(this);c.find("input[type=text],textarea").each(function(){var a=d(this);""!=a.val()&&a.val()!=a.attr("placeholder")||a.addClass("polyfill-placeholder").val(a.attr("placeholder"))}).on("blur",function(){var a=d(this);a.attr("name").match(/-polyfill-field$/)||
""==a.val()&&a.addClass("polyfill-placeholder").val(a.attr("placeholder"))}).on("focus",function(){var a=d(this);a.attr("name").match(/-polyfill-field$/)||a.val()==a.attr("placeholder")&&a.removeClass("polyfill-placeholder").val("")});c.find("input[type=password]").each(function(){var a=d(this),c=d(d("<div>").append(a.clone()).remove().html().replace(/type="password"/i,'type="text"').replace(/type=password/i,"type=text"));""!=a.attr("id")&&c.attr("id",a.attr("id")+"-polyfill-field");""!=a.attr("name")&&
c.attr("name",a.attr("name")+"-polyfill-field");c.addClass("polyfill-placeholder").val(c.attr("placeholder")).insertAfter(a);""==a.val()?a.hide():c.hide();a.on("blur",function(c){c.preventDefault();c=a.parent().find("input[name="+a.attr("name")+"-polyfill-field]");""==a.val()&&(a.hide(),c.show())});c.on("focus",function(a){a.preventDefault();a=c.parent().find("input[name="+c.attr("name").replace("-polyfill-field","")+"]");c.hide();a.show().focus()}).on("keypress",function(a){a.preventDefault();c.val("")})});
c.on("submit",function(){c.find("input[type=text],input[type=password],textarea").each(function(a){a=d(this);a.attr("name").match(/-polyfill-field$/)&&a.attr("name","");a.val()==a.attr("placeholder")&&(a.removeClass("polyfill-placeholder"),a.val(""))})}).on("reset",function(a){a.preventDefault();c.find("select").val(d("option:first").val());c.find("input,textarea").each(function(){var a=d(this);a.removeClass("polyfill-placeholder");switch(this.type){case "submit":case "reset":break;case "password":a.val(a.attr("defaultValue"));
var c=a.parent().find("input[name="+a.attr("name")+"-polyfill-field]");""==a.val()?(a.hide(),c.show()):(a.show(),c.hide());break;case "checkbox":case "radio":a.attr("checked",a.attr("defaultValue"));break;case "text":case "textarea":a.val(a.attr("defaultValue"));""==a.val()&&(a.addClass("polyfill-placeholder"),a.val(a.attr("placeholder")));break;default:a.val(a.attr("defaultValue"))}})});return c};d.prioritize=function(e,c){"jQuery"!=typeof e&&(e=d(e));e.each(function(){var a=d(this),f=a.parent();
if(0!=f.length)if(a.data("__prioritize")){if(!c){var e=a.data("__prioritize");a.insertAfter(e);a.removeData("__prioritize")}}else c&&(e=a.prev(),0!=e.length&&(a.prependTo(f),a.data("__prioritize",e)))})}})(jQuery);
(function(){function d(e,c,a){function f(h,m){if(!c[h]){if(!e[h]){var l="function"==typeof require&&require;if(!m&&l)return l(h,!0);if(g)return g(h,!0);m=Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m;}m=c[h]={exports:{}};e[h][0].call(m.exports,function(a){return f(e[h][1][a]||a)},m,m.exports,d,e,c,a)}return c[h].exports}for(var g="function"==typeof require&&require,h=0;h<a.length;h++)f(a[h]);return f}return d})()({1:[function(d,e,c){d=function(a,c){this.ws=new WebSocket(a);
this.callbacks={};this.debug=c;this.ws.onclose=this.onClose.bind(this);this.ws.onopen=this.onOpen.bind(this);this.ws.onmessage=this.onMessage.bind(this);this.ws.onerror=this.onError.bind(this)};d.prototype={constructor:d,protocol:{unpack:function(a){var c=a.split(" ")[0];return[c,a.substring(c.length+1,a.length)]},unmarshal:function(a){return JSON.parse(a)},marshalAndPack:function(a,c){return a+" "+JSON.stringify(c)}},setProtocol:function(a){this.protocol=a},enableBinary:function(){this.ws.binaryType=
"arraybuffer"},onClose:function(a){this.callbacks.close&&this.callbacks.close(a)},onMessage:function(a){var c=this.protocol.unpack(a.data);a=c[0];this.callbacks[a]?(c=this.protocol.unmarshal(c[1]),this.debug&&(console.log("%cReceived ".concat(a,":"),"color: blue;"),console.log(c)),this.callbacks[a](c)):this.debug&&console.error("Recieved WebSocket message with no callback:",a,JSON.parse(c[1]))},onOpen:function(a){this.callbacks.open&&this.callbacks.open(a)},on:function(a,c){this.callbacks[a]=c},emit:function(a,
c){this.ws.send(this.protocol.marshalAndPack(a,c))},onError:function(a){this.callbacks.socketError&&this.callbacks.socketError(a)},close:function(){this.ws.close()}};c.Connection=d},{}],2:[function(d,e,c){var a=d("./globals");$(document).ready(function(){var a=$("#lobby-chat-input");a.on("keypress",f("lobby",a));a=$("#lobby-chat-pregame-input");a.on("keypress",f("game",a));a=$("#game-chat-input");a.on("keypress",f("game",a))});var f=function(c,d){return function(f){"Enter"===f.key&&d.val()&&(f=d.val(),
d.val(""),a.conn.send("chat",{msg:f,room:c}))}};c.add=function(c){var d="lobby"===c.room?$("#lobby-chat-text"):$("#lobby-chat-pregame-text").is(":visible")?$("#lobby-chat-pregame-text"):$("#game-chat-text");for(var f=c.msg;;){var e=f.match(/&lt;:(.+?):(\d+?)&gt;/);if(!e)break;var g='<img src="https://cdn.discordapp.com/emojis/'.concat(e[2],'.png" title="').concat(e[1],'" height=28 />');f=f.replace(e[0],g)}c.msg=f;f=(new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})).format(new Date(c.datetime));
f="<span>[".concat(f,"]&nbsp; ");c.server?f+=c.msg:c.who?(f+="&lt;<strong>".concat(c.who,"</strong>&gt;&nbsp; "),f+="".concat($("<a>").html(c.msg).html())):f+="<strong>".concat($("<a>").html(c.msg).html(),"</strong>");f+="</span><br />";d.finish();d.append(f);d.animate({scrollTop:d[0].scrollHeight},a.fadeTime)}},{"./globals":36}],3:[function(d,e,c){c.CARDW=286;c.CARDH=406;var a=function(a,c,d){this.name=a;this.abbreviation=c;this.hexCode=d};c.COLOR={BLUE:new a("Blue","B","#0044cc"),GREEN:new a("Green",
"G","#00cc00"),YELLOW:new a("Yellow","Y","#ccaa22"),RED:new a("Red","R","#aa0000"),PURPLE:new a("Purple","P","#6600cc"),GRAY:new a("Gray","G","#cccccc"),WHITE:new a("White","W","#d9d9d9"),BLACK:new a("Black","K","#111111"),NAVY:new a("Navy","N","#000066"),ORANGE:new a("Orange","O","#ff8800"),TAN:new a("Tan","T","#999900"),MAHOGANY:new a("Mahogany","M","#660016"),TEAL:new a("Teal","T","#00b3b3"),LIME:new a("Lime","L","#80c000"),CARDINAL:new a("Cardinal","C","#810735"),INDIGO:new a("Indigo","I","#1a0082"),
LBLUE:new a("Sky","S","#1a66ff"),DBLUE:new a("Navy","N","#002b80"),LGREEN:new a("Lime","L","#1aff1a"),DGREEN:new a("Forest","F","#008000"),LRED:new a("Tomato","T","#e60000"),DRED:new a("Mahogany","M","#660000"),BLUE1:new a("Sky","S","#4d88ff"),BLUE3:new a("Navy","N","#001a4d"),RED1:new a("Tomato","T","#ff1a1a"),RED3:new a("Mahogany","M","#330000")};d=[c.COLOR.BLUE,c.COLOR.GREEN,c.COLOR.YELLOW,c.COLOR.RED,c.COLOR.PURPLE];e=[c.COLOR.BLUE,c.COLOR.GREEN,c.COLOR.YELLOW,c.COLOR.RED,c.COLOR.PURPLE,c.COLOR.ORANGE];
var f=[c.COLOR.BLUE,c.COLOR.GREEN,c.COLOR.YELLOW,c.COLOR.RED,c.COLOR.PURPLE,c.COLOR.BLACK],g=[c.COLOR.BLUE,c.COLOR.GREEN,c.COLOR.YELLOW,c.COLOR.RED],h=[c.COLOR.BLUE,c.COLOR.GREEN,c.COLOR.YELLOW,c.COLOR.RED,c.COLOR.BLACK],l=[c.COLOR.BLUE,c.COLOR.GREEN,c.COLOR.YELLOW],m=[c.COLOR.BLUE,c.COLOR.GREEN],q=function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.fillType=a;this.args=c},p=new q("solid"),r=new q("linear_gradient",[0,0,0,c.CARDH]),t=new q("linear_gradient",[0,14,0,
110]);q=new q("radial_gradient",[75,150,25,75,150,75]);c.CARD_AREA={BACKGROUND:"background",NUMBER:"number",SYMBOL:"symbol"};p=new Map([[c.CARD_AREA.BACKGROUND,p],[c.CARD_AREA.NUMBER,p],[c.CARD_AREA.SYMBOL,p]]);r=new Map([[c.CARD_AREA.BACKGROUND,r],[c.CARD_AREA.NUMBER,t],[c.CARD_AREA.SYMBOL,q]]);t=function(a,c,d,f,e){var g=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1;this.name=a;this.abbreviation=c;this.fillColors=d;this.cardFillSpec=f;this.clueColors=e;this.oneOfEach=g};t.prototype.style=
function(a,c){var d=this.cardFillSpec.get(c),f=d.fillType;c=this.fillColors;if("solid"===f)return c.hexCode;if("linear_gradient"===f){a=a.createLinearGradient.apply(a,_toConsumableArray(d.args));d=c.length;for(f=0;f<d;++f)a.addColorStop(f/(d-1),c[f].hexCode);return a}if("radial_gradient"===f){a=a.createRadialGradient.apply(a,_toConsumableArray(d.args));d=c.length;for(f=0;f<d;++f)a.addColorStop(f/(d-1),c[f].hexCode);return a}return null};c.SUIT={BLUE:new t("Blue","B",c.COLOR.BLUE,p,[c.COLOR.BLUE]),
GREEN:new t("Green","G",c.COLOR.GREEN,p,[c.COLOR.GREEN]),YELLOW:new t("Yellow","Y",c.COLOR.YELLOW,p,[c.COLOR.YELLOW]),RED:new t("Red","R",c.COLOR.RED,p,[c.COLOR.RED]),PURPLE:new t("Purple","P",c.COLOR.PURPLE,p,[c.COLOR.PURPLE]),GRAY:new t("Gray","",c.COLOR.GRAY,p,null,[]),ORANGE:new t("Orange","O",c.COLOR.ORANGE,p,[c.COLOR.ORANGE]),WHITE:new t("White","W",c.COLOR.WHITE,p,[c.COLOR.WHITE]),BLACK:new t("Black","K",c.COLOR.BLACK,p,[c.COLOR.BLACK],!0),RAINBOW:new t("Rainbow","M",d,r,Object.values(c.COLOR)),
RAINBOW1OE:new t("Rainbow","M",[new a(null,null,"#000555"),new a(null,null,"#005505"),new a(null,null,"#555500"),new a(null,null,"#5F0000"),new a(null,null,"#550055")],r,Object.values(c.COLOR),!0),CB_BLUE:new t("Blue","B",c.COLOR.BLUE,p,[]),CB_GREEN:new t("Green","G",c.COLOR.GREEN,p,[]),CB_YELLOW:new t("Yellow","Y",c.COLOR.YELLOW,p,[]),CB_RED:new t("Red","R",c.COLOR.RED,p,[]),CB_PURPLE:new t("Purple","P",c.COLOR.PURPLE,p,[]),CB_ORANGE:new t("Orange","O",c.COLOR.ORANGE,p,[]),LBLUE:new t("Sky","S",
c.COLOR.LBLUE,p,[c.COLOR.BLUE]),DBLUE:new t("Navy","N",c.COLOR.DBLUE,p,[c.COLOR.BLUE]),LGREEN:new t("Lime","L",c.COLOR.LGREEN,p,[c.COLOR.GREEN]),DGREEN:new t("Forest","F",c.COLOR.DGREEN,p,[c.COLOR.GREEN]),LRED:new t("Tomato","T",c.COLOR.LRED,p,[c.COLOR.RED]),DRED:new t("Mahogany","B",c.COLOR.DRED,p,[c.COLOR.RED]),BLUE1:new t("Sky","S",c.COLOR.BLUE1,p,[c.COLOR.BLUE]),BLUE2:new t("Berry","B",c.COLOR.BLUE,p,[c.COLOR.BLUE]),BLUE3:new t("Navy","N",c.COLOR.BLUE3,p,[c.COLOR.BLUE]),RED1:new t("Tomato","T",
c.COLOR.RED1,p,[c.COLOR.RED]),RED2:new t("Ruby","R",c.COLOR.RED,p,[c.COLOR.RED]),RED3:new t("Mahogany","M",c.COLOR.RED3,p,[c.COLOR.RED]),MGREEN:new t("Green","G",c.COLOR.GREEN,p,[c.COLOR.BLUE,c.COLOR.YELLOW]),MPURPLE:new t("Purple","P",c.COLOR.PURPLE,p,[c.COLOR.BLUE,c.COLOR.RED]),NAVY:new t("Navy","N",c.COLOR.NAVY,p,[c.COLOR.BLUE,c.COLOR.BLACK]),MORANGE:new t("Orange","O",c.COLOR.ORANGE,p,[c.COLOR.YELLOW,c.COLOR.RED]),TAN:new t("Tan","T",c.COLOR.TAN,p,[c.COLOR.YELLOW,c.COLOR.BLACK]),MAHOGANY:new t("Mahogany",
"M",c.COLOR.MAHOGANY,p,[c.COLOR.RED,c.COLOR.BLACK]),TEAL:new t("Teal","T",c.COLOR.TEAL,p,[c.COLOR.BLUE,c.COLOR.GREEN]),LIME:new t("Lime","L",c.COLOR.LIME,p,[c.COLOR.GREEN,c.COLOR.YELLOW]),CARDINAL:new t("Cardinal","C",c.COLOR.CARDINAL,p,[c.COLOR.RED,c.COLOR.PURPLE]),INDIGO:new t("Indigo","I",c.COLOR.INDIGO,p,[c.COLOR.BLUE,c.COLOR.PURPLE])};c.ACT={CLUE:0,PLAY:1,DISCARD:2,DECKPLAY:3};c.CLUE_TYPE={RANK:0,COLOR:1};a=function(a,d,f){this.suits=a;this.ranks=[1,2,3,4,5];this.clueColors=d;this.showSuitNames=
f;this.offsetCardIndicators=a.some(function(a){return a!==c.SUIT.RAINBOW&&a!==c.SUIT.RAINBOW1OE&&1<a.clueColors.length});this.maxScore=5*a.length};c.VARIANTS={"No Variant":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE],d,!1),"Six Suits":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE,c.SUIT.ORANGE],e,!1),"Four Suits":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED],g,!1),"Three Suits":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW],l,!1),"White (6 Suits)":new a([c.SUIT.BLUE,
c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE,c.SUIT.WHITE],d,!1),"White (5 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.WHITE],g,!1),"White (4 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.WHITE],l,!1),"White (3 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.WHITE],m,!1),"Black (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE,c.SUIT.BLACK],f,!1),"Black (5 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,
c.SUIT.BLACK],h,!1),"Rainbow (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE,c.SUIT.RAINBOW],d,!1),"Rainbow (5 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.RAINBOW],g,!1),"Rainbow (4 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RAINBOW],l,!1),"Rainbow (3 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.RAINBOW],m,!1),"White & Rainbow (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.WHITE,c.SUIT.RAINBOW],
g,!1),"White & Rainbow (5 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.WHITE,c.SUIT.RAINBOW],l,!1),"White & Rainbow (4 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.WHITE,c.SUIT.RAINBOW],m,!1),"Dark Rainbow (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE,c.SUIT.RAINBOW1OE],d,!1),"Dark Rainbow (5 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.RAINBOW1OE],g,!1),"Black & Dark Rainbow (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,
c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.BLACK,c.SUIT.RAINBOW1OE],h,!1),"Color Blind (6 Suits)":new a([c.SUIT.CB_BLUE,c.SUIT.CB_GREEN,c.SUIT.CB_YELLOW,c.SUIT.CB_RED,c.SUIT.CB_PURPLE,c.SUIT.CB_ORANGE],e,!1),"Color Blind (5 Suits)":new a([c.SUIT.CB_BLUE,c.SUIT.CB_GREEN,c.SUIT.CB_YELLOW,c.SUIT.CB_RED,c.SUIT.CB_PURPLE],d,!1),"Color Blind (4 Suits)":new a([c.SUIT.CB_BLUE,c.SUIT.CB_GREEN,c.SUIT.CB_YELLOW,c.SUIT.CB_RED],g,!1),"Color Blind (3 Suits)":new a([c.SUIT.CB_BLUE,c.SUIT.CB_GREEN,c.SUIT.CB_YELLOW],l,!1),"Ambiguous (6 Suits)":new a([c.SUIT.LBLUE,
c.SUIT.DBLUE,c.SUIT.LGREEN,c.SUIT.DGREEN,c.SUIT.LRED,c.SUIT.DRED],[c.COLOR.BLUE,c.COLOR.GREEN,c.COLOR.RED],!0),"Ambiguous (4 Suits)":new a([c.SUIT.LBLUE,c.SUIT.DBLUE,c.SUIT.LRED,c.SUIT.DRED],[c.COLOR.BLUE,c.COLOR.RED],!0),"Ambiguous & White (5 Suits)":new a([c.SUIT.LBLUE,c.SUIT.DBLUE,c.SUIT.LRED,c.SUIT.DRED,c.SUIT.WHITE],[c.COLOR.BLUE,c.COLOR.RED],!0),"Ambiguous & Rainbow (5 Suits)":new a([c.SUIT.LBLUE,c.SUIT.DBLUE,c.SUIT.LRED,c.SUIT.DRED,c.SUIT.RAINBOW],[c.COLOR.BLUE,c.COLOR.RED],!0),"Very Ambiguous (6 Suits)":new a([c.SUIT.BLUE1,
c.SUIT.BLUE2,c.SUIT.BLUE3,c.SUIT.RED1,c.SUIT.RED2,c.SUIT.RED3],[c.COLOR.BLUE,c.COLOR.RED],!0),"Dual-Color (6 Suits)":new a([c.SUIT.MGREEN,c.SUIT.MPURPLE,c.SUIT.NAVY,c.SUIT.MORANGE,c.SUIT.TAN,c.SUIT.MAHOGANY],[c.COLOR.BLUE,c.COLOR.YELLOW,c.COLOR.RED,c.COLOR.BLACK],!0),"Dual-Color (5 Suits)":new a([c.SUIT.TEAL,c.SUIT.LIME,c.SUIT.MORANGE,c.SUIT.CARDINAL,c.SUIT.INDIGO],d,!0),"Dual-Color (3 Suits)":new a([c.SUIT.MGREEN,c.SUIT.MPURPLE,c.SUIT.MORANGE],[c.COLOR.BLUE,c.COLOR.YELLOW,c.COLOR.RED],!0),"Dual-Color & Rainbow (6 Suits)":new a([c.SUIT.TEAL,
c.SUIT.LIME,c.SUIT.MORANGE,c.SUIT.CARDINAL,c.SUIT.INDIGO,c.SUIT.RAINBOW],d,!0),"Dual-Color & Rainbow (4 Suits)":new a([c.SUIT.MGREEN,c.SUIT.MPURPLE,c.SUIT.MORANGE,c.SUIT.RAINBOW],[c.COLOR.BLUE,c.COLOR.YELLOW,c.COLOR.RED],!0),"Multi-Fives (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE,c.SUIT.ORANGE],e,!1),"Multi-Fives (5 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE],d,!1),"Multi-Fives (4 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,
c.SUIT.RED],g,!1),"Multi-Fives (3 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW],l,!1),"Multi-Fives & Rainbow (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE,c.SUIT.RAINBOW],d,!1),"Multi-Fives & Rainbow (5 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.RAINBOW],g,!1),"Multi-Fives & Rainbow (4 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RAINBOW],l,!1),"Multi-Fives & Rainbow (3 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,
c.SUIT.RAINBOW],m,!1),"Clue Starved (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE,c.SUIT.ORANGE],e,!1),"Clue Starved (5 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE],d,!1),"Clue Starved (4 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED],g,!1),"Up or Down (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE,c.SUIT.ORANGE],e,!0),"Up or Down (5 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,
c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE],d,!0),"Up or Down & White (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE,c.SUIT.WHITE],d,!0),"Up or Down & White (5 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.WHITE],g,!0),"Up or Down & Rainbow (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.PURPLE,c.SUIT.RAINBOW],d,!0),"Up or Down & Rainbow (5 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.RAINBOW],
g,!0),"Up or Down & White & Rainbow (6 Suits)":new a([c.SUIT.BLUE,c.SUIT.GREEN,c.SUIT.YELLOW,c.SUIT.RED,c.SUIT.WHITE,c.SUIT.RAINBOW],g,!0),"African American":new a([c.SUIT.LRED,c.SUIT.DRED,c.SUIT.WHITE,c.SUIT.LBLUE,c.SUIT.DBLUE,c.SUIT.BLACK],[c.COLOR.BLUE,c.COLOR.RED,c.COLOR.BLACK],!0),"Wild & Crazy":new a([c.SUIT.MGREEN,c.SUIT.MPURPLE,c.SUIT.MORANGE,c.SUIT.WHITE,c.SUIT.RAINBOW,c.SUIT.BLACK],[c.COLOR.BLUE,c.COLOR.YELLOW,c.COLOR.RED,c.COLOR.BLACK],!0)};d=Object.keys(c.VARIANTS);for(e=0;e<d.length;e++)f=
d[e],c.VARIANTS[f].name=f;c.INDICATOR={POSITIVE:"#ffffff",NEGATIVE:"#ff7777",REPLAY_LEADER:"#ffdf00"};d=function(a,c){this.description=a;this.emoji=c};c.CHARACTERS={Fuming:new d("Can only clue numbers and [random color]","\ud83c\udf0b"),Dumbfounded:new d("Can only clue colors and [random number]","\ud83e\udd2f"),Inept:new d("Cannot give any clues that touch [random suit] cards","\ud83e\udd14"),Awkward:new d("Cannot give any clues that touch [random number]s","\ud83d\ude2c"),Conservative:new d("Can only give clues that touch a single card",
"\ud83d\udd47"),Greedy:new d("Can only give clues that touch 2+ cards","\ud83e\udd11"),Picky:new d("Can only clue odd numbers or odd colors","\ud83e\udd22"),Spiteful:new d("Cannot clue the player to their left","\ud83d\ude08"),Insolent:new d("Cannot clue the player to their right","\ud83d\ude0f"),Vindictive:new d("Must clue if they received a clue since their last turn","\ud83d\udde1\ufe0f"),Miser:new d("Can only clue if there are 4 or more clues available","\ud83d\udcb0"),Compulsive:new d("Can only clue if it touches the newest or oldest card in someone's hand",
"\ud83d\udcfa"),"Mood Swings":new d("Clues given must alternate between color and number","\ud83d\udc67"),Insistent:new d("Must continue to clue cards until one of them is played or discarded","\ud83d\ude23"),Vulnerable:new d("Cannot receive a number 2 or number 5 clue","\ud83d\udee1\ufe0f"),"Color-Blind":new d("Cannot receive a color clue","\ud83d\udc53"),Follower:new d("Cannot play a card unless two cards of the same rank have already been played","\ud83d\udc41\ufe0f"),Impulsive:new d("Must play slot 1 if it has been clued",
"\ud83d\udc89"),Indolent:new d("Cannot play a card if they played on the last round","\ud83d\udcba"),Hesitant:new d("Cannot play cards from slot 1","\ud83d\udc74\ud83c\udffb"),Anxious:new d("Cannot discard if there is an even number of clues available (including 0)","\ud83d\ude30"),Traumatized:new d("Cannot discard if there is an odd number of clues available","\ud83d\ude28"),Wasteful:new d("Cannot discard if there are 2 or more clues available","\ud83d\uddd1\ufe0f"),Genius:new d("Must clue both a number and a color (uses two clues)",
"\ud83e\udde0"),Synesthetic:new d("Gives number and color clues at the same time","\ud83c\udfa8"),Panicky:new d("When discarding, discards twice if 4 clues or less","\ud83d\ude33"),Contrarian:new d("Play order inverts after taking a turn + 2 turn end game","\ud83d\ude45"),Stubborn:new d("Must perform a different action type than the player that came before them","\ud83d\ude20"),"Blind Spot":new d("Cannot see the cards of the player to their left","\ud83d\ude97"),Oblivious:new d("Cannot see the cards of the player to their right",
"\ud83d\ude82")};d=Object.keys(c.CHARACTERS);for(e=0;e<d.length;e++)f=d[e],c.CHARACTERS[f].name=f;c.REPLAY_ACTION_TYPE={TURN:0,ARROW:1,LEADER_TRANSFER:2,MORPH:3,SOUND:4};d=Object.keys(c);for(e=0;e<d.length;e++)Object.freeze(d[e])},{}],4:[function(d,e,c){function a(a){function c(a){a=a||window.event;a.preventDefault();h=a.clientX;m=a.clientY;document.onmouseup=f;document.onmousemove=d}function d(c){c=c||window.event;c.preventDefault();e=h-c.clientX;g=m-c.clientY;h=c.clientX;m=c.clientY;c=a.style.top;
var d=a.style.left;a.style.top="".concat(a.offsetTop-g,"px");a.style.left="".concat(a.offsetLeft-e,"px");$("#game-chat-modal").is(":offscreen")&&(a.style.top=c,a.style.left=d)}function f(){document.onmouseup=null;document.onmousemove=null;localStorage.setItem("chatWindowWidth",a.style.width);localStorage.setItem("chatWindowHeight",a.style.height);localStorage.setItem("chatWindowTop",a.style.top);localStorage.setItem("chatWindowLeft",a.style.left)}var e=0,g=0,h=0,m=0;document.getElementById("".concat(a.id,
"-header"))?document.getElementById("".concat(a.id,"-header")).onmousedown=c:a.onmousedown=c}function f(a){var c=document.querySelector(a),d=document.querySelectorAll("".concat(a," .resizer")),f=0,e=0,g=0,h=0,m=0,l=0;a=function(a){function k(a){if(q.classList.contains("bottom-right")){var d=f+(a.pageX-m);a=e+(a.pageY-l);20<d&&(c.style.width="".concat(d,"px"));20<a&&(c.style.height="".concat(a,"px"))}else if(q.classList.contains("bottom-left")){d=e+(a.pageY-l);var k=f-(a.pageX-m);20<d&&(c.style.height=
"".concat(d,"px"));20<k&&(c.style.width="".concat(k,"px"),c.style.left="".concat(g+(a.pageX-m),"px"))}else q.classList.contains("top-right")?(d=f+(a.pageX-m),k=e-(a.pageY-l),20<d&&(c.style.width="".concat(d,"px")),20<k&&(c.style.height="".concat(k,"px"),c.style.top="".concat(h+(a.pageY-l),"px"))):(d=f-(a.pageX-m),k=e-(a.pageY-l),20<d&&(c.style.width="".concat(d,"px"),c.style.left="".concat(g+(a.pageX-m),"px")),20<k&&(c.style.height="".concat(k,"px"),c.style.top="".concat(h+(a.pageY-l),"px")))}function p(){window.removeEventListener("mousemove",
k);localStorage.setItem("chatWindowWidth",c.style.width);localStorage.setItem("chatWindowHeight",c.style.height);localStorage.setItem("chatWindowTop",c.style.top);localStorage.setItem("chatWindowLeft",c.style.left)}var q=d[a];q.addEventListener("mousedown",function(a){a.preventDefault();f=parseFloat(getComputedStyle(c,null).getPropertyValue("width").replace("px",""));e=parseFloat(getComputedStyle(c,null).getPropertyValue("height").replace("px",""));var d=c.getBoundingClientRect();g=d.left;h=d.top;
m=a.pageX;l=a.pageY;window.addEventListener("mousemove",k);window.addEventListener("mouseup",p)})};for(var C=0;C<d.length;C++)a(C)}var g=d("../globals");$(document).ready(function(){a(document.getElementById("game-chat-modal"));f(".resizable");$("#game-chat-modal-header-close").click(function(){l()})});c.toggle=function(){$("#game-chat-modal").is(":visible")?l():h()};var h=function(){var a=$("#game-chat-modal");a.fadeIn(g.fadeTime);0!==g.chatUnread&&(g.chatUnread=0,g.conn.send("chatRead"),g.ui.updateChatLabel());
var c=!0,d=localStorage.getItem("chatWindowWidth"),f=localStorage.getItem("chatWindowHeight"),e=localStorage.getItem("chatWindowTop"),h=localStorage.getItem("chatWindowLeft");null!==d&&""!==d&&null!==f&&""!==f&&null!==e&&""!==e&&null!==h&&""!==h&&(c=!1,a.css("width",d),a.css("height",f),a.css("top",e),a.css("left",h));a.is(":offscreen")&&(c=!0);c&&(a.css("width","20%"),a.css("height","50%"),a.css("top","1%"),a.css("left","79%"));a=document.getElementById("game-chat-text");a.scrollTop=a.scrollHeight;
$("#game-chat-input").focus()};c.show=h;var l=function(){$("#game-chat-modal").fadeOut(g.fadeTime)};c.hide=l},{"../globals":36}],5:[function(d,e,c){var a=d("../globals");c.init=function(){a.conn.on("init",function(c){"game"===a.currentScreen&&a.ui.handleMessage("init",c)});a.conn.on("advanced",function(c){"game"===a.currentScreen&&a.ui.handleMessage("advanced",c)});a.conn.on("connected",function(c){"game"===a.currentScreen&&a.ui.handleMessage("connected",c)});a.conn.on("notifyList",function(c){if("game"===
a.currentScreen){var d=!0,f=!1,e=void 0;try{for(var m=c[Symbol.iterator](),q;!(d=(q=m.next()).done);d=!0)a.ui.handleMessage("notify",q.value)}catch(p){f=!0,e=p}finally{try{d||null==m.return||m.return()}finally{if(f)throw e;}}}});a.conn.on("notify",function(c){"game"===a.currentScreen&&a.ui.handleMessage("notify",c)});a.conn.on("action",function(c){"game"===a.currentScreen&&a.ui.handleMessage("action",c)});a.conn.on("spectators",function(c){"game"===a.currentScreen&&a.ui.handleMessage("spectators",
c)});a.conn.on("clock",function(c){"game"===a.currentScreen&&a.ui.handleMessage("clock",c)});a.conn.on("note",function(c){"game"===a.currentScreen&&a.ui.handleMessage("note",c)});a.conn.on("notes",function(c){"game"===a.currentScreen&&a.ui.handleMessage("notes",c)});a.conn.on("replayLeader",function(c){"game"===a.currentScreen&&a.ui.handleMessage("replayLeader",c)});a.conn.on("replayTurn",function(c){"game"===a.currentScreen&&a.ui.handleMessage("replayTurn",c)});a.conn.on("replayIndicator",function(c){"game"===
a.currentScreen&&a.ui.handleMessage("replayIndicator",c)});a.conn.on("replayMorph",function(c){"game"===a.currentScreen&&a.ui.handleMessage("replayMorph",c)});a.conn.on("replaySound",function(c){"game"===a.currentScreen&&a.ui.handleMessage("replaySound",c)});a.conn.on("boot",function(c){"game"===a.currentScreen&&a.ui.handleMessage("boot",c)})}},{"../globals":36}],6:[function(d,e,c){c.chat=d("./chat");c.commands=d("./commands");c.sounds=d("./sounds");c.tooltips=d("./tooltips");var a=d("../globals"),
f=d("../misc"),g=d("./ui/ui");$(document).ready(function(){$("body").on("contextmenu","#game",function(){return!1})});c.show=function(){a.currentScreen="game";$("#page-wrapper").hide();$("#game").fadeIn(a.fadeTime);$("#game-chat-text").html("");a.ui=new g(a,c);a.chatUnread=0;a.conn.send("hello")};c.hide=function(){a.currentScreen="lobby";a.ui.destroy();a.ui=null;$("#game").hide();$("#page-wrapper").fadeIn(a.fadeTime);$("#game-chat-modal").hide();f.closeAllTooltips();var c=document.getElementById("lobby-chat-text");
c.scrollTop=c.scrollHeight};window.game=c},{"../globals":36,"../misc":49,"./chat":4,"./commands":5,"./sounds":7,"./tooltips":8,"./ui/ui":35}],7:[function(d,e,c){var a=d("../globals");$(document).ready(function(){if(a.settings.sendTurnSound)for(var c="blind1 blind2 blind3 blind4 fail1 fail2 finished_fail finished_success sad tone turn_other turn_us".split(" "),d=0;d<c.length;d++)(new Audio("public/sounds/".concat(c[d],".mp3"))).load()});c.play=function(a){var c="/public/sounds/".concat(a,".mp3");a=
(new Audio(c)).play();void 0!==a&&a.then(function(){}).catch(function(a){console.error('Failed to play "'.concat(c,'":'),a)})}},{"../globals":36}],8:[function(d,e,c){$(document).ready(function(){var a=["tooltipster-shadow","tooltipster-shadow-big"],c={animation:"grow",contentAsHTML:!0,delay:0,interactive:!0,theme:a,trigger:"custom",updateAnimation:null};$("#tooltip-deck").tooltipster(c);$("#tooltip-spectators").tooltipster(c);$("#tooltip-leader").tooltipster(c);for(var d=0;6>d;d++){$("#game-tooltips").append('<div id="tooltip-player-'.concat(d,
'"></div>'));$("#tooltip-player-".concat(d)).tooltipster(c);var e=a.slice();e.push("align-center");$("#tooltip-player-".concat(d)).tooltipster("instance").option("theme",e);$("#game-tooltips").append('<div id="tooltip-character-assignment-'.concat(d,'"></div>'));$("#tooltip-character-assignment-".concat(d)).tooltipster(c);$("#tooltip-character-assignment-".concat(d)).tooltipster("instance").option("theme",e)}for(a=0;60>a;a++)$("#game-tooltips").append('<div id="tooltip-card-'.concat(a,'"></div>')),
$("#tooltip-card-".concat(a)).tooltipster(c)})},{}],9:[function(d,e,c){var a=d("./globals"),f=d("./fitText");d=function(c){Kinetic.Group.call(this,c);var d=this.getWidth(),e=this.getHeight(),g=new Kinetic.Rect({name:"background",x:0,y:0,width:d,height:e,listening:!0,cornerRadius:.12*e,fill:"black",opacity:.6});this.add(g);if(c.text){var q=new f({name:"text",x:0,y:.275*e,width:d,height:.5*e,listening:!1,fontSize:.5*e,fontFamily:"Verdana",fill:"white",align:"center",text:c.text});this.setText=function(a){return q.setText(a)};
this.setFill=function(a){return q.setFill(a)};this.add(q)}else c.image&&(c=new Kinetic.Image({name:"image",x:.2*d,y:.2*e,width:.6*d,height:.6*e,listening:!1,image:a.ImageLoader.get(c.image)}),this.add(c));this.enabled=!0;this.pressed=!1;g.on("mousedown",function(){g.setFill("#888888");g.getLayer().draw();var a=function(){g.setFill("black");g.getLayer().draw();g.off("mouseup");g.off("mouseout")};g.on("mouseout",function(){a()});g.on("mouseup",function(){a()})})};Kinetic.Util.extend(d,Kinetic.Group);
d.prototype.setEnabled=function(a){this.enabled=a;this.get(".text")[0].setFill(a?"white":"#444444");this.get(".background")[0].setListening(a);this.getLayer().draw()};d.prototype.getEnabled=function(){return this.enabled};d.prototype.setPressed=function(a){this.pressed=a;this.get(".background")[0].setFill(a?"#cccccc":"black");this.getLayer().batchDraw()};e.exports=d},{"./fitText":20,"./globals":21}],10:[function(d,e,c){d=function(a){Kinetic.Node.call(this,a);this.list=[]};Kinetic.Util.extend(d,Kinetic.Node);
d.prototype.add=function(a){var c=this;this.list.push(a);a.on("click tap",function(){this.setPressed(!0);for(var a=0;a<c.list.length;a++)c.list[a]!==this&&c.list[a].pressed&&c.list[a].setPressed(!1);c.fire("change")})};d.prototype.getPressed=function(){for(var a=0;a<this.list.length;a++)if(this.list[a].pressed)return this.list[a];return null};d.prototype.clearPressed=function(){for(var a=0;a<this.list.length;a++)this.list[a].pressed&&this.list[a].setPressed(!1)};e.exports=d},{}],11:[function(d,e,
c){var a=d("./globals"),f=d("../../constants"),g=d("./cardDraw"),h=d("./notes"),l=d("./replay"),m=f.CARDH,q=f.CARDW,p=f.CLUE_TYPE,r=f.INDICATOR,t=f.SUIT;d=function(c){var d=this,e=this,f=a.stage.getHeight();c.width=q;c.height=m;c.x=q/2;c.y=m/2;c.offset={x:q/2,y:m/2};Kinetic.Group.call(this,c);this.bare=new Kinetic.Image({width:c.width,height:c.height});this.doRotations=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;this.setRotation(a?180:0);this.bare.setRotation(a?180:
0);this.bare.setX(a?c.width:0);this.bare.setY(a?c.height:0)};this.bare.setDrawFunc(function(a){g.scaleCardImage(a,e.barename,this.getWidth(),this.getHeight(),this.getAbsoluteTransform())});this.add(this.bare);this.trueSuit=c.suit||void 0;this.trueRank=c.rank||void 0;this.suitKnown=function(){return void 0!==this.trueSuit};this.rankKnown=function(){return void 0!==this.trueRank};this.identityKnown=function(){return this.suitKnown()&&this.rankKnown()};this.order=c.order;this.possibleSuits=c.suits;this.possibleRanks=
c.ranks;this.rankPips=new Kinetic.Group({x:0,y:Math.floor(.85*m),width:q,height:Math.floor(.15*m),visible:!this.rankKnown()});this.suitPips=new Kinetic.Group({x:0,y:0,width:Math.floor(q),height:Math.floor(m),visible:!this.suitKnown()});this.add(this.rankPips);this.add(this.suitPips);var k=a.learnedCards[this.order];k.rank&&this.rankPips.visible(!1);k.suit&&this.suitPips.visible(!1);a.replay&&(this.rankPips.visible(!1),this.suitPips.visible(!1));k=!0;var l=!1,p=void 0;try{for(var r=c.ranks[Symbol.iterator](),
v;!(k=(v=r.next()).done);k=!0){var H=v.value,X=new Kinetic.Rect({x:Math.floor(q*(.19*H-.14)),y:0,width:Math.floor(.15*q),height:Math.floor(.1*m),fill:"black",stroke:"black",name:H.toString(),listening:!1});a.learnedCards[this.order].possibleRanks.includes(H)||X.setOpacity(.3);this.rankPips.add(X)}}catch(T){l=!0,p=T}finally{try{k||null==r.return||r.return()}finally{if(l)throw p;}}var Q=c.suits,z=Q.length;r=function(c){var e=Q[c],f=e.fillColors.hexCode;if(e===t.RAINBOW||e===t.RAINBOW1OE)f=void 0;var h=
new Kinetic.Shape({x:Math.floor(.5*q),y:Math.floor(.5*m),scale:{x:.4,y:.4},offset:{x:Math.floor(.7*q*Math.cos((-c/z+.25)*Math.PI*2)+.25*q),y:Math.floor(.7*q*Math.sin((-c/z+.25)*Math.PI*2)+.3*q)},fill:f,stroke:"black",name:e.name,listening:!1,drawFunc:function(a){g.drawSuitShape(e,c)(a);a.closePath();a.fillStrokeShape(h)}});if(e===t.RAINBOW||e===t.RAINBOW1OE)h.fillRadialGradientColorStops([.3,e.fillColors[0].hexCode,.425,e.fillColors[1].hexCode,.65,e.fillColors[2].hexCode,.875,e.fillColors[3].hexCode,
1,e.fillColors[4].hexCode]),h.fillRadialGradientStartPoint({x:75,y:140}),h.fillRadialGradientEndPoint({x:75,y:140}),h.fillRadialGradientStartRadius(0),h.fillRadialGradientEndRadius(Math.floor(.25*q));h.rotation(0);a.learnedCards[d.order].possibleSuits.includes(e)?h.setStrokeWidth(5):h.setOpacity(.4);d.suitPips.add(h)};for(H=0;H<Q.length;H++)r(H);this.barename=void 0;this.showOnlyLearned=!1;this.setBareImage();this.cluedBorder=new Kinetic.Rect({x:3,y:3,width:c.width-6,height:c.height-6,cornerRadius:6,
strokeWidth:16,stroke:"#ffdf00",visible:!1,listening:!1});this.add(this.cluedBorder);this.isClued=function(){return this.cluedBorder.visible()};this.isDiscarded=!1;this.turnDiscarded=null;this.isPlayed=!1;this.turnPlayed=null;this.indicatorArrow=new Kinetic.Text({x:1.01*c.width,y:.18*c.height,width:c.width,height:.5*c.height,fontSize:.2*f,fontFamily:"Verdana",align:"center",text:"\u2b06",rotation:180,fill:"#ffffff",shadowColor:"black",shadowBlur:10,shadowOffset:{x:0,y:0},shadowOpacity:.9,visible:!1,
listening:!1});this.add(this.indicatorArrow);this.noteGiven=new Kinetic.Text({x:.78*c.width,y:(a.variant.offsetCardIndicators?.16:.06)*c.height,fontSize:.1*c.height,fontFamily:"Verdana",align:"center",text:"\ud83d\udcdd",rotation:180,fill:"#ffffff",shadowColor:"black",shadowBlur:10,shadowOffset:{x:0,y:0},shadowOpacity:.9,visible:!1,listening:!1});this.noteGiven.setScale({x:-1,y:-1});this.noteGiven.rotated=!1;this.add(this.noteGiven);h.get(this.order)&&this.noteGiven.show();this.on("mousemove",function(){e.noteGiven.visible()&&
(e.noteGiven.rotated&&(e.noteGiven.rotated=!1,e.noteGiven.rotate(-15),a.layers.card.batchDraw()),null===h.vars.editing&&(a.activeHover=this,h.show(e)))});this.on("mouseout",function(){null===h.vars.editing&&$("#tooltip-card-".concat(e.order)).tooltipster("close")});this.on("mousemove tap",function(){a.elements.clueLog.showMatches(e);a.layers.UI.draw()});this.on("mouseout",function(){a.elements.clueLog.showMatches(null);a.layers.UI.draw()});this.on("click tap",this.click);if(c.holder===a.playerUs&&
!a.replay&&!a.spectating)this.on("mousedown",function(c){1===c.evt.which&&!a.inReplay&&d.indicatorArrow.isVisible()&&a.lobby.ui.showClueMatch(-1)});var S=function(a,c,d){var e=[0,0];a.rankPips.visible()!==c&&1===d[0]&&(a.rankPips.setVisible(c),e[0]=1);a.suitPips.visible()!==c&&1===d[1]&&(a.suitPips.setVisible(c),e[1]=1);a.showOnlyLearned=c;a.setBareImage();return e},L=[],sa=function(c){L.splice(0,L.length).map(function(a,d){return S(a,!1,c[d])});a.layers.card.batchDraw()},K=function(c){if(!(0<L.length))return L.splice.apply(L,
[0,0].concat(_toConsumableArray(c))),c=c.map(function(a){return S(a,!0,[1,1])}),a.layers.card.batchDraw(),c};if(c.holder!==a.playerUs||a.inReplay||a.spectating){var ca=[];this.on("mousedown",function(c){1===c.evt.which&&(c=d.parent,c.tween&&c.tween.isPlaying()||d.isPlayed||d.isDiscarded||(a.activeHover=d,c=d.parent.parent.children.map(function(a){return a.children[0]}),ca=K(c)))});this.on("mouseup mouseout",function(a){"mouseup"===a.type&&1!==a.evt.which||sa(ca)})}};Kinetic.Util.extend(d,Kinetic.Group);
d.prototype.setBareImage=function(){var c="Card",d=a.learnedCards[this.order],e=!this.showOnlyLearned&&this.trueRank,f=this.showOnlyLearned&&1<this.possibleRanks.length,g=!this.showOnlyLearned&&this.trueSuit||d.suit||t.GRAY;this.showOnlyLearned&&1<this.possibleSuits.length&&(g=t.GRAY);g===t.GRAY&&(c="NoPip");c="".concat(c,"-").concat(g.name,"-");this.barename=c=f?c+"6":c+(e||d.rank||"6")};d.prototype.setIndicator=function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:r.POSITIVE;
this.indicatorArrow.setStroke("#000000");this.indicatorArrow.setFill(c);this.indicatorArrow.setVisible(a);this.getLayer().batchDraw()};d.prototype.applyClue=function(c,d){var e=this;if(c.type===p.RANK){var f=c.value;(a.variant.name.startsWith("Multi-Fives")?v(this.possibleRanks,function(a){return(a===f||5===a)===d}):v(this.possibleRanks,function(a){return a===f===d})).forEach(function(a){return e.rankPips.find(".".concat(a)).hide()});1!==this.possibleRanks.length||this.isInPlayerHand()&&!this.isClued()||
(this.trueRank=_slicedToArray(this.possibleRanks,1)[0],e.rankPips.find(".".concat(this.trueRank)).hide(),this.rankPips.hide(),a.learnedCards[this.order].rank=this.trueRank);v(a.learnedCards[this.order].possibleRanks,function(a){return e.possibleRanks.includes(a)})}else if(c.type===p.COLOR){var g=c.value;v(this.possibleSuits,function(a){return a.clueColors.includes(g)===d}).forEach(function(a){return e.suitPips.find(".".concat(a.name)).hide()});1!==this.possibleSuits.length||this.isInPlayerHand()&&
!this.isClued()||(this.trueSuit=_slicedToArray(this.possibleSuits,1)[0],e.suitPips.find(".".concat(this.trueSuit.name)).hide(),this.suitPips.hide(),a.learnedCards[this.order].suit=this.trueSuit);v(a.learnedCards[this.order].possibleSuits,function(a){return e.possibleSuits.includes(a)})}else console.error("Clue type invalid.")};d.prototype.hideClues=function(){this.cluedBorder.hide()};d.prototype.isInPlayerHand=function(){return-1!==a.elements.playerHands.indexOf(this.parent.parent)};d.prototype.click=
function(a){1===a.evt.which?this.clickLeft():3===a.evt.which&&this.clickRight()};d.prototype.clickLeft=function(){this.isPlayed?(a.replay?l.checkDisableSharedTurns():l.enter(),l.goto(this.turnPlayed+1,!0)):this.isDiscarded&&(a.replay?l.checkDisableSharedTurns():l.enter(),l.goto(this.turnDiscarded+1,!0))};d.prototype.clickRight=function(){window.event.ctrlKey&&window.event.shiftKey&&window.event.altKey?this.clickMorph():a.sharedReplay&&a.sharedReplayLeader===a.lobby.username&&a.useSharedTurns?this.clickArrow():
window.event.ctrlKey&&window.event.shiftKey?(h.set(this.order,h.vars.lastNote),h.update(this),h.show(this)):window.event.shiftKey?(h.set(this.order,"f"),h.update(this),h.show(this)):window.event.altKey?(h.set(this.order,"cm"),h.update(this),h.show(this)):window.event.ctrlKey&&!1===a.sharedReplay?this.clickArrowLocal():h.openEditTooltip(this)};d.prototype.clickArrow=function(){a.lobby.conn.send("replayAction",{type:f.REPLAY_ACTION_TYPE.ARROW,order:this.order});a.lobby.ui.handleReplayIndicator({order:this.order})};
d.prototype.clickArrowLocal=function(){a.lobby.ui.handleReplayIndicator({order:this.order})};d.prototype.clickMorph=function(){if(a.replay){var c=prompt('What card do you want to morph it into?\n(e.g. "b1", "k2", "m3", "11", "65")');if(null!==c&&2===c.length){var d=c[0];if("b"===d||"1"===d)d=0;else if("g"===d||"2"===d)d=1;else if("y"===d||"3"===d)d=2;else if("r"===d||"4"===d)d=3;else if("p"===d||"5"===d)d=4;else if("k"===d||"m"===d||"6"===d)d=5;else return;c=parseInt(c[1],10);Number.isNaN(c)||(a.sharedReplayLeader===
a.lobby.username&&a.lobby.conn.send("replayAction",{type:f.REPLAY_ACTION_TYPE.MORPH,order:this.order,suit:d,rank:c}),a.lobby.ui.handleNotify({type:"reveal",which:{order:this.order,rank:c,suit:d}}))}}};e.exports=d;var v=function(a,c){for(var d=[],e=a.length-1;0<=e;)c(a[e],e)||d.unshift(a.splice(e,1)[0]),--e;return d}},{"../../constants":3,"./cardDraw":13,"./globals":21,"./notes":29,"./replay":31}],12:[function(d,e,c){var a=d("./globals"),f=d("../../constants"),g=d("./layoutChild"),h=d("../../misc"),
l=d("./replay");d=function(c){Kinetic.Group.call(this,c);this.cardback=new Kinetic.Image({x:0,y:0,width:this.getWidth(),height:this.getHeight(),image:a.cardImages[c.cardback]});this.add(this.cardback);this.cardback.on("dragend.play",function(){var c=this,d=this.getAbsolutePosition();d.x+=this.getWidth()*this.getScaleX()/2;d.y+=this.getHeight()*this.getScaleY()/2;a.lobby.ui.overPlayArea(d)?(a.postAnimationLayout=function(){c.doLayout();a.postAnimationLayout=null},this.setDraggable(!1),a.elements.deckPlayAvailableLabel.setVisible(!1),
a.lobby.conn.send("action",{type:f.ACT.DECKPLAY}),a.lobby.ui.stopAction(),a.savedAction=null):(new Kinetic.Tween({node:this,duration:.5,x:0,y:0,runonce:!0,onFinish:function(){a.layers.UI.draw()}})).play()});this.cardback.on("click",l.promptTurn);this.count=new Kinetic.Text({fill:"white",stroke:"black",strokeWidth:1,align:"center",x:0,y:.3*this.getHeight(),width:this.getWidth(),height:.4*this.getHeight(),fontSize:.4*this.getHeight(),fontFamily:"Verdana",fontStyle:"bold",text:"0",listening:!1});this.add(this.count);
this.initTooltip();this.on("mousemove",function(){if(!a.elements.deckPlayAvailableLabel.isVisible()){var c=$("#tooltip-deck");a.activeHover=this;var d=this.getWidth()/2+this.attrs.x;c.css("left",d);c.css("top",this.attrs.y);c.tooltipster("open")}});this.on("mouseout",function(){$("#tooltip-deck").tooltipster("close")})};Kinetic.Util.extend(d,Kinetic.Group);d.prototype.add=function(c){var d=this;Kinetic.Group.prototype.add.call(this,c);c instanceof g&&(a.animateFast?c.remove():(c.tween=(new Kinetic.Tween({node:c,
x:0,y:0,scaleX:.01,scaleY:.01,rotation:0,duration:.5,runonce:!0})).play(),c.tween.onFinish=function(){c.parent===d&&c.remove()}))};d.prototype.setCardBack=function(c){this.cardback.setImage(a.ImageLoader.get(c))};d.prototype.setCount=function(a){this.count.setText(a.toString());this.cardback.setVisible(0<a)};d.prototype.doLayout=function(){this.cardback.setPosition({x:0,y:0})};d.prototype.initTooltip=function(){if("No Variant"!==a.variant.name||a.timed||a.deckPlays||a.emptyClues||0!==a.characterAssignments.length){var c=
'<strong>Game Options:</strong><ul class="game-tooltips-ul">';"No Variant"!==a.variant.name&&(c+="<li>Variant: ".concat(a.variant.name,"</li>"));a.timed&&(c=c+"<li>Timed: "+h.timerFormatter(1E3*a.baseTime),c=c+" + "+h.timerFormatter(1E3*a.timePerTurn),c+="</li>");a.deckPlays&&(c+="<li>Bottom-Deck Blind Plays</li>");a.emptyClues&&(c+="<li>Empty Clues</li>");0<a.characterAssignments.length&&(c+="<li>Detrimental Characters</li>");c+="</ul>";$("#tooltip-deck").tooltipster("instance").content(c)}};e.exports=
d},{"../../constants":3,"../../misc":49,"./globals":21,"./layoutChild":24,"./replay":31}],13:[function(d,e,c){var a=d("./globals");d=d("../../constants");var f=d.CARD_AREA,g=d.CARDH,h=d.CARDW,l=d.COLOR,m=d.SUIT,q=.08*h,p=.08*g,r={};c.init=function(){r={}};c.buildCards=function(){for(var c=a.variant.suits.concat(m.GRAY),d=0;d<c.length;d++)for(var e=c[d],p=0;7>=p;p++){var q=document.createElement("canvas");q.width=h;q.height=g;var r=q.getContext("2d");0<p&&C(r);var z=r,E=e,L=p;z.fillStyle=E.style(z,
f.BACKGROUND);z.strokeStyle=E.style(z,f.BACKGROUND);z.fillStyle===l.WHITE.hexCode&&(z.strokeStyle=l.BLACK.hexCode);v(z,4);z.save();z.globalAlpha=.3;z.fill();z.globalAlpha=.7;z.lineWidth=8;0===L&&(z.globalAlpha=1);z.stroke();z.restore();r.shadowBlur=10;r.fillStyle=e.style(r,f.NUMBER);r.strokeStyle="black";r.lineWidth=2;r.lineJoin="round";0!==p&&6!==p&&(L=p.toString(),7===p&&(L="S"),a.lobby.settings.showColorblindUI?(E=68,z=83,L=e.abbreviation+L):(E=96,z=110),r.font="bold ".concat(E,"pt Arial"),x(r,
z,L),a.cardImages["Index-".concat(e.name,"-").concat(p)]=t(q),r.save(),r.translate(h,g),r.rotate(Math.PI),x(r,z,L),r.restore());r.fillStyle=e.style(r,f.SYMBOL);r.lineWidth=5;null!==e.clueColors&&2===e.clueColors.length&&(z=r,L=_slicedToArray(e.clueColors,2),E=L[0],L=L[1],z.save(),z.lineWidth=1,z.beginPath(),z.moveTo(h-8,8),z.lineTo(h-8-50,8),z.lineTo(h-8-25,33),z.moveTo(h-8,8),z.fillStyle=E.hexCode,k(z),z.beginPath(),z.moveTo(h-8,8),z.lineTo(h-8,58),z.lineTo(h-8-25,33),z.moveTo(h-8,8),z.fillStyle=
L.hexCode,k(z),z.beginPath(),z.moveTo(8,g-8),z.lineTo(8,g-8-50),z.lineTo(33,g-8-25),z.moveTo(8,g-8),z.fillStyle=E.hexCode,k(z),z.beginPath(),z.moveTo(8,g-8),z.lineTo(58,g-8),z.lineTo(33,g-8-25),z.moveTo(8,g-8),z.fillStyle=L.hexCode,k(z),z.restore());0<p&&(6>p||e!==m.GRAY)&&(a.cardImages["NoPip-".concat(e.name,"-").concat(p)]=t(q));if(e!==m.GRAY){z=p;E=B(e,d);if(1===z||3===z)r.save(),r.translate(h/2,g/2),r.scale(.4,.4),r.translate(-75,-100),E(r),k(r),r.restore();1<z&&5>=z&&(L=a.lobby.settings.showColorblindUI?
85:120,r.save(),r.translate(h/2,g/2),r.translate(0,-L),r.scale(.4,.4),r.translate(-75,-100),E(r),k(r),r.restore(),r.save(),r.translate(h/2,g/2),r.translate(0,L),r.scale(.4,.4),r.rotate(Math.PI),r.translate(-75,-100),E(r),k(r),r.restore());if(4===z||5===z)r.save(),r.translate(h/2,g/2),r.translate(-90,0),r.scale(.4,.4),r.translate(-75,-100),E(r),k(r),r.restore(),r.save(),r.translate(h/2,g/2),r.translate(90,0),r.scale(.4,.4),r.rotate(Math.PI),r.translate(-75,-100),E(r),k(r),r.restore();if(0===z||5===
z)r.globalAlpha=1,r.save(),r.translate(h/2,g/2),r.scale(.4*3/2,.4*3/2),r.translate(-75,-100),E(r),k(r),r.restore();6===z&&(r.save(),r.globalAlpha=a.lobby.settings.showColorblindUI?.4:.1,r.translate(h/2,g/2),r.scale(.4*3,.4*3),r.translate(-75,-100),E(r),k(r),r.restore())}e!==m.GRAY&&(a.cardImages["Card-".concat(e.name,"-").concat(p)]=q)}a.cardImages["NoPip-Gray-6"]=y();c=a.cardImages;d=y();e=d.getContext("2d");p=a.variant.suits.length;for(q=0;q<a.variant.suits.length;q++)r=a.variant.suits[q],e.resetTransform(),
e.scale(.4,.4),z=Math.floor(1.25*h),E=Math.floor(1.25*g),z-=1.05*Math.floor(.7*h*Math.cos((-q/p+.25)*Math.PI*2)+.25*h),E-=1.05*Math.floor(.7*h*Math.sin((-q/p+.25)*Math.PI*2)+.3*h),e.translate(z,E),B(r,q)(e),k(e);e.save();c["deck-back"]=d};var t=function(a){var c=document.createElement("canvas");c.width=a.width;c.height=a.height;c.getContext("2d").drawImage(a,0,0);return c},v=function(a,c){a.beginPath();a.moveTo(c,p+c);a.lineTo(c,g-p-c);a.quadraticCurveTo(0,g,q+c,g-c);a.lineTo(h-q-c,g-c);a.quadraticCurveTo(h,
g,h-c,g-p-c);a.lineTo(h-c,p+c);a.quadraticCurveTo(h,0,h-q-c,c);a.lineTo(q+c,c);a.quadraticCurveTo(0,0,c,p+c)},k=function(a){a.shadowColor="rgba(0, 0, 0, 0.9)";a.fill();a.shadowColor="rgba(0, 0, 0, 0)";a.stroke()},x=function(a,c,d){a.shadowColor="rgba(0, 0, 0, 0.9)";a.fillText(d,19,c);a.shadowColor="rgba(0, 0, 0, 0)";a.strokeText(d,19,c)},y=function(){var a=document.createElement("canvas");a.width=h;a.height=g;var c=a.getContext("2d");C(c);c.fillStyle="black";v(c,4);c.save();c.globalAlpha=.5;c.fill();
c.globalAlpha=.7;c.lineWidth=8;c.stroke();c.restore();c.fillStyle="#444444";c.lineWidth=8;c.lineJoin="round";c.translate(h/2,g/2);return a},C=function(a){v(a,4,q,p);a.fillStyle="white";a.fill();a.save();a.clip();a.globalAlpha=.2;a.strokeStyle="black";for(var c=0;c<h;c+=4+4*Math.random())a.beginPath(),a.moveTo(c,0),a.lineTo(c,g),a.stroke();for(c=0;c<g;c+=4+4*Math.random())a.beginPath(),a.moveTo(0,c),a.lineTo(h,c),a.stroke();a.restore()},E=[function(a){var c=[[1,0],[2,1],[1,2],[0,1]].map(function(a){return[70*
a[0]+5,80*a[1]+20]}),d=[[0,0],[0,1],[1,1],[1,0]].map(function(a){return[70*[1.46,.54][a[0]]+5,80*[.6,1.4][a[1]]+20]});a.beginPath();a.moveTo.apply(a,_toConsumableArray(c[0]));a.quadraticCurveTo.apply(a,_toConsumableArray(d[0]).concat(_toConsumableArray(c[1])));a.quadraticCurveTo.apply(a,_toConsumableArray(d[1]).concat(_toConsumableArray(c[2])));a.quadraticCurveTo.apply(a,_toConsumableArray(d[2]).concat(_toConsumableArray(c[3])));a.quadraticCurveTo.apply(a,_toConsumableArray(d[3]).concat(_toConsumableArray(c[0])))},
function(a){a.beginPath();a.moveTo(50,180);a.lineTo(100,180);a.quadraticCurveTo(80,140,75,120);a.arc(110,110,35,2.6779,4.712,!0);a.arc(75,50,35,1,2.1416,!0);a.arc(40,110,35,4.712,.4636,!0);a.quadraticCurveTo(70,140,50,180)},function(a){a.translate(75,100);a.beginPath();a.moveTo(0,-75);for(var c=0;5>c;c++)a.rotate(Math.PI/5),a.lineTo(0,-30),a.rotate(Math.PI/5),a.lineTo(0,-75)},function(a){a.beginPath();a.moveTo(75,65);a.bezierCurveTo(75,57,70,45,50,45);a.bezierCurveTo(20,45,20,82,20,82);a.bezierCurveTo(20,
100,40,122,75,155);a.bezierCurveTo(110,122,130,100,130,82);a.bezierCurveTo(130,82,130,45,100,45);a.bezierCurveTo(85,45,75,57,75,65)},function(a){a.beginPath();a.arc(75,100,75,3,4.3,!0);a.arc(48,83,52,5,2.5,!1)},function(a){a.beginPath();a.beginPath();a.moveTo(50,180);a.lineTo(100,180);a.quadraticCurveTo(80,140,75,120);a.arc(110,110,35,2.6779,5.712,!0);a.lineTo(75,0);a.arc(40,110,35,3.712,.4636,!0);a.quadraticCurveTo(70,140,50,180)},function(a){a.beginPath();a.moveTo(0,140);a.arc(75,140,75,Math.PI,
0,!1);a.lineTo(125,140);a.arc(75,140,25,0,Math.PI,!0);a.lineTo(0,140)}],B=function(a,c){if(a===m.RAINBOW||a===m.RAINBOW1OE)c=E.length-1;return E[c]};c.drawSuitShape=B;c.scaleCardImage=function(c,d,e,f,g){var h=a.cardImages[d];if(h){var k=Math.sqrt(g.m[0]*g.m[0]+g.m[1]*g.m[1])*e;g=Math.sqrt(g.m[2]*g.m[2]+g.m[3]*g.m[3])*f;if(!(1>k||1>g)){g=e;var l=f,m=0;for(r[d]||(r[d]=[]);k<g/2;){var p=r[d][m];g=Math.floor(g/2);l=Math.floor(l/2);p||(p=document.createElement("canvas"),p.width=g,p.height=l,p.getContext("2d").drawImage(h,
0,0,g,l),r[d][m]=p);h=p;m+=1}c.drawImage(h,0,0,e,f)}}else console.error('The image "'.concat(d,'" was not generated.'))}},{"../../constants":3,"./globals":21}],14:[function(d,e,c){var a=d("./globals");d=function(a){Kinetic.Group.call(this,a);this.align=a.align||"left";this.reverse=a.reverse||!1;this.invertCards=a.invertCards||!1};Kinetic.Util.extend(d,Kinetic.Group);d.prototype.add=function(a){var c=this;a.children.forEach(function(a){a.doRotations&&a.doRotations(c.invertCards)});var d=a.getAbsolutePosition();
Kinetic.Group.prototype.add.call(this,a);a.setAbsolutePosition(d);this.doLayout()};d.prototype._setChildrenIndices=function(){Kinetic.Group.prototype._setChildrenIndices.call(this);this.doLayout()};d.prototype.doLayout=function(){for(var c=0,d=0,e=0,l=this.getWidth(),m=this.getHeight(),q=this.children.length,p=0;p<q;p++){var r=this.children[p];if(r.getHeight()){var t=m/r.getHeight();c+=t*r.getWidth()}}1<q&&(d=(l-c)/(q-1));10<d&&(d=10);c+=d*(q-1);"center"===this.align&&c<l&&(e=(l-c)/2);this.reverse&&
(e=l-e);c=a.postAnimationLayout;for(l=0;l<q;l++)p=this.children[l],p.getHeight()&&(r=m/p.getHeight(),p.tween&&p.tween.destroy(),p.isDragging()||(a.animateFast?(p.setX(e-(this.reverse?r*p.getWidth():0)),p.setY(0),p.setScaleX(r),p.setScaleY(r),p.setRotation(0)):p.tween=(new Kinetic.Tween({node:p,duration:.5,x:e-(this.reverse?r*p.getWidth():0),y:0,scaleX:r,scaleY:r,rotation:0,runonce:!0,onFinish:c})).play()),e+=(r*p.getWidth()+d)*(this.reverse?-1:1))};e.exports=d},{"./globals":21}],15:[function(d,e,
c){var a=d("./globals");d=function(a){Kinetic.Group.call(this,a)};Kinetic.Util.extend(d,Kinetic.Group);d.prototype.add=function(a){a.children.forEach(function(a){a.doRotations&&a.doRotations(!1)});var c=a.getAbsolutePosition();Kinetic.Group.prototype.add.call(this,a);a.setAbsolutePosition(c);this.doLayout()};d.prototype._setChildrenIndices=function(){Kinetic.Group.prototype._setChildrenIndices.call(this)};d.prototype.doLayout=function(){for(var c=this,d=this.getHeight(),e=function(){for(var a=c.children.length,
d=0;d<a;d++){var e=c.children[d];if(e.tween&&e.tween.isPlaying())return}for(d=0;d<a-1;d++)c.children[d].setVisible(!1);0<a&&c.children[a-1].setVisible(!0)},l=0;l<this.children.length;l++){var m=this.children[l],q=d/m.getHeight();m.tween&&m.tween.destroy();a.animateFast?(m.setX(0),m.setY(0),m.setScaleX(q),m.setScaleY(q),m.setRotation(0),e()):m.tween=(new Kinetic.Tween({node:m,duration:.8,x:0,y:0,scaleX:q,scaleY:q,rotation:0,runonce:!0,onFinish:e})).play()}};e.exports=d},{"./globals":21}],16:[function(d,
e,c){var a=d("./globals"),f=d("./fitText"),g=d("./replay");d=function(c){var d=this;Kinetic.Group.call(this,c);var e=c.width,h=c.height,p=new Kinetic.Rect({x:0,y:0,width:e,height:h,fill:"white",opacity:.1,listening:!0});this.background=p;this.add(p);var r=new f({x:.05*e,y:0,width:.3*e,height:h,fontSize:.9*h,fontFamily:"Verdana",fill:"white",text:c.giver,listening:!1});this.add(r);r=new f({x:.4*e,y:0,width:.3*e,height:h,fontSize:.9*h,fontFamily:"Verdana",fill:"white",text:c.target,listening:!1});this.add(r);
r=new Kinetic.Text({x:.75*e,y:0,width:.2*e,height:h,align:"center",fontSize:.9*h,fontFamily:"Verdana",fill:"white",text:c.clueName,listening:!1});this.add(r);this.negativeMarker=e=new Kinetic.Text({x:.88*e,y:0,width:.2*e,height:h,align:"center",fontSize:.9*h,fontFamily:"Verdana",fill:"white",text:"\u2718",listening:!1,visible:!1});this.add(e);this.list=c.list;this.neglist=c.neglist;p.on("mouseover tap",function(){a.elements.clueLog.showMatches(null);p.setOpacity(.4);p.getLayer().batchDraw()});p.on("mouseout",
function(){null!==p.getLayer()&&(p.setOpacity(.1),p.getLayer().batchDraw())});this.turn=c.turn;p.on("click",function(){a.replay?g.checkDisableSharedTurns():g.enter();g.goto(d.turn+1,!0)})};Kinetic.Util.extend(d,Kinetic.Group);d.prototype.checkValid=function(c){return a.deck[c]&&a.deck[c].parent?a.deck[c].isInPlayerHand():!1};d.prototype.checkExpiry=function(){for(var a=0;a<this.list.length;a++)if(this.checkValid(this.list[a]))return 0;for(a=0;a<this.neglist.length;a++)if(this.checkValid(this.neglist[a]))return 0;
this.off("mouseover tap");this.off("mouseout");this.remove();return 1};d.prototype.showMatch=function(c){this.background.setOpacity(.1);this.background.setFill("white");this.negativeMarker.setVisible(!1);for(var d=0;d<this.list.length;d++)a.deck[this.list[d]]===c&&this.background.setOpacity(.4);for(d=0;d<this.neglist.length;d++)a.deck[this.neglist[d]]===c&&(this.background.setOpacity(.4),this.background.setFill("#ff7777"),a.lobby.settings.showColorblindUI&&this.negativeMarker.setVisible(!0))};e.exports=
d},{"./fitText":20,"./globals":21,"./replay":31}],17:[function(d,e,c){var a=d("./globals");d=function(a){Kinetic.Group.call(this,a)};Kinetic.Util.extend(d,Kinetic.Group);d.prototype.add=function(a){Kinetic.Group.prototype.add.call(this,a);this.doLayout()};d.prototype._setChildrenIndices=function(){Kinetic.Group.prototype._setChildrenIndices.call(this);this.doLayout()};d.prototype.doLayout=function(){for(var c=0,d=0;d<this.children.length;d++){var e=this.children[d];e.setY(c);c+=e.getHeight()+.001*
a.stage.getHeight()}};d.prototype.checkExpiry=function(){var a=this.children.length-31;if(!(1>a)){for(var c=0,d=0;d<this.children.length&&!(c+=this.children[d].checkExpiry(),c>=a);d++);this.doLayout()}};d.prototype.showMatches=function(a){for(var c=0;c<this.children.length;c++)this.children[c].showMatch(a)};d.prototype.clear=function(){for(var a=this.children.length-1;0<=a;a--)this.children[a].remove()};e.exports=d},{"./globals":21}],18:[function(d,e,c){var a=d("./button");d=function(c){a.call(this,
c);this.targetIndex=c.targetIndex};Kinetic.Util.extend(d,a);e.exports=d},{"./button":9}],19:[function(d,e,c){var a=d("./globals");d=function(c){Kinetic.Group.call(this,c);var d=this.getWidth(),e=this.getHeight(),f=new Kinetic.Rect({name:"background",x:0,y:0,width:d,height:e,listening:!0,cornerRadius:.12*e,fill:"black",opacity:.6});this.add(f);var m=new Kinetic.Rect({x:.1*d,y:.1*e,width:.8*d,height:.8*e,listening:!1,cornerRadius:.096*e,fill:c.color,opacity:.9});this.add(m);d=new Kinetic.Text({x:0,
y:.2*e,width:d,height:.6*e,listening:!1,fontSize:.5*e,fontFamily:"Verdana",fill:"white",stroke:"black",strokeWidth:1,align:"center",text:c.text,visible:a.lobby.settings.showColorblindUI});this.add(d);this.pressed=!1;this.clue=c.clue;f.on("mousedown",function(){f.setFill("#888888");f.getLayer().draw();var a=function(){f.setFill("black");f.getLayer().draw();f.off("mouseup");f.off("mouseout")};f.on("mouseout",function(){a()});f.on("mouseup",function(){a()})})};Kinetic.Util.extend(d,Kinetic.Group);d.prototype.setPressed=
function(a){this.pressed=a;this.get(".background")[0].setFill(a?"#cccccc":"black");this.getLayer().batchDraw()};e.exports=d},{"./globals":21}],20:[function(d,e,c){d=function(a){Kinetic.Text.call(this,a);this.origFontSize=this.getFontSize();this.needsResize=!0;this.setDrawFunc(function(a){this.needsResize&&this.resize();Kinetic.Text.prototype._sceneFunc.call(this,a)})};Kinetic.Util.extend(d,Kinetic.Text);d.prototype.resize=function(){for(this.setFontSize(this.origFontSize);this._getTextSize(this.getText()).width>
this.getWidth()&&5<this.getFontSize();)this.setFontSize(.9*this.getFontSize());this.needsResize=!1};d.prototype.setText=function(a){Kinetic.Text.prototype.setText.call(this,a);this.needsResize=!0};e.exports=d},{}],21:[function(d,e,c){d={};e.exports=d;window.globals2=d},{}],22:[function(d,e,c){var a=d("./globals");e.exports=function(){a.debug=!0;a.lobby=null;a.game=null;a.playerNames=[];a.variant=null;a.playerUs=-1;a.spectating=!1;a.replay=!1;a.sharedReplay=!1;a.timed=!1;a.baseTime=null;a.timePerTurn=
null;a.deckPlays=!1;a.emptyClues=!1;a.characterAssignments=[];a.characterMetadata=[];a.ready=!1;a.deck=[];a.deckSize=0;a.turn=0;a.score=0;a.clues=0;a.spectators=[];a.cardsGotten=0;a.cluesSpentPlusStrikes=0;a.inReplay=!1;a.replayLog=[];a.replayPos=0;a.replayTurn=0;a.replayMax=0;a.learnedCards=[];a.sharedReplayLeader="";a.sharedReplayTurn=-1;a.useSharedTurns=!0;a.ImageLoader=null;a.stage=null;a.layers={UI:null,timer:null,overtop:null};a.elements={stageFade:null,playerHands:[],messagePrompt:null,chatButton:null,
drawDeck:null,deckPlayAvailableLabel:null,clueLog:null,paceNumberLabel:null,efficiencyNumberLabel:null,strikes:[],clueTargetButtonGroup:null,clueButtonGroup:null,rankClueButtons:null,suitClueButtons:null,giveClueButton:null,replayArea:null,replayShuttleShared:null,msgLogGroup:null,timer1:null,timer2:null};a.activeHover=null;a.cardImages={};a.ourTurn=!1;a.queuedAction=null;a.animateFast=!0;a.savedAction=null;a.postAnimationLayout=null;a.lastAction=null;a.accidentalClueTimer=Date.now();a.chatUnread=
0}},{"./globals":21}],23:[function(d,e,c){var a=d("./globals"),f=d("../../constants"),g=d("./notes"),h=d("./replay"),l=f.ACT,m,q,p,r;c.init=function(){m={ArrowLeft:h.back,ArrowRight:h.forward,"[":h.backRound,"]":h.forwardRound,Home:h.backFull,End:h.forwardFull};q={Tab:function(){a.elements.clueTargetButtonGroup.selectNextTarget()}};for(var c=0;c<a.elements.rankClueButtons.length;c++)q[c+1]=C(a.elements.rankClueButtons[c]);c="qwerty".split("");for(var d=0;d<a.elements.suitClueButtons.length&&d<c.length;d++)q[c[d]]=
C(a.elements.suitClueButtons[d]);p={a:k,"+":k};r={d:x,"-":x};$(document).keydown(t)};c.destroy=function(){$(document).unbind("keydown",t)};var t=function(c){if("game"===a.lobby.currentScreen&&null===g.vars.editing&&!$("#game-chat-input").is(":focus"))if(c.ctrlKey&&"Enter"===c.key)a.lobby.ui.giveClue();else if(!c.ctrlKey&&!c.altKey)if("Delete"===c.key&&null!==a.activeHover&&"undefined"!==typeof a.activeHover.order)g.set(a.activeHover.order,""),g.update(a.activeHover);else if("Z"===c.key)v("buzz");
else if("X"===c.key)v("god");else if("C"===c.key)a.game.sounds.play("turn_us");else if(!c.shiftKey){if(a.elements.replayArea.visible())var d=m[c.key];else null!==a.savedAction&&(a.savedAction.canClue&&(d=q[c.key]),a.savedAction.canDiscard&&(d=d||r[c.key]),d=d||p[c.key]);void 0!==d&&(c.preventDefault(),d())}},v=function(c){a.replay&&a.sharedReplay&&a.sharedReplayLeader===a.lobby.username&&(a.lobby.conn.send("replayAction",{type:f.REPLAY_ACTION_TYPE.SOUND,sound:c}),a.game.sounds.play(c))},k=function(){y(!0)},
x=function(){y(!1)},y=function(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;var d=c?"play":"discard";var e=a.elements.playerHands[a.playerUs].children;var f=e.length;d="Enter the slot number (1 to ".concat(f,") of the card to ").concat(d,".");d=window.prompt(d);/^deck$/i.test(d)?e="deck":/^\d+$/.test(d)?(d=parseInt(d,10),e=1>d||d>f?null:e[f-d].children[0].order):e=null;null!==e&&("deck"!==e||c&&a.savedAction.canBlindPlayDeck)&&(f={},"deck"===e?f.type=l.DECKPLAY:(f.type=c?l.PLAY:
l.DISCARD,f.target=e),a.lobby.conn.send("action",f),a.lobby.ui.stopAction(),a.savedAction=null)},C=function(a){return function(){a.dispatchEvent(new MouseEvent("click"))}}},{"../../constants":3,"./globals":21,"./notes":29,"./replay":31}],24:[function(d,e,c){d=function(a){Kinetic.Group.call(this,a);this.tween=null};Kinetic.Util.extend(d,Kinetic.Group);d.prototype.add=function(a){var c=this;Kinetic.Group.prototype.add.call(this,a);this.setWidth(a.getWidth());this.setHeight(a.getHeight());a.on("widthChange",
function(a){a.oldVal!==a.newVal&&(c.setWidth(a.newVal),c.parent&&c.parent.doLayout())});a.on("heightChange",function(a){a.oldVal!==a.newVal&&(c.setHeight(a.newVal),c.parent&&c.parent.doLayout())})};e.exports=d},{}],25:[function(d,e,c){d=function(a){this.cb=a;this.filemap={};a="x replay replay-back replay-back-full replay-forward replay-forward-full trashcan".split(" ");for(var c=0;c<a.length;c++)this.filemap[a[c]]="public/img/".concat(a[c],".png");this.filemap.background="public/img/background.jpg"};
d.prototype.addImage=function(a,c){this.filemap[a]="public/img/".concat(a,".").concat(c)};d.prototype.addAlias=function(a,c,d){this.filemap[a]="public/img/".concat(c,".").concat(d)};d.prototype.start=function(){var a=this,c=Object.keys(a.filemap).length;this.map={};this.numLoaded=0;for(var d=Object.keys(this.filemap),e=0;e<d.length;e++){var l=d[e],m=new Image;this.map[l]=m;m.onload=function(){a.numLoaded+=1;a.progress(a.numLoaded,c);a.numLoaded===c&&a.cb()};m.src=a.filemap[l]}a.progress(0,c)};d.prototype.progress=
function(a,c){this.progressCallback&&this.progressCallback(a,c)};d.prototype.get=function(a){return this.map[a]};e.exports=d},{}],26:[function(d,e,c){var a=d("./globals"),f=d("./multiFitText");d=function(c){var d={x:.2*a.stage.getWidth(),y:.02*a.stage.getHeight(),width:.4*a.stage.getWidth(),height:.96*a.stage.getHeight(),clipX:0,clipY:0,clipWidth:.4*a.stage.getWidth(),clipHeight:.96*a.stage.getHeight(),visible:!1,listening:!1};$.extend(d,c);Kinetic.Group.call(this,d);c=new Kinetic.Rect({x:0,y:0,width:.4*
a.stage.getWidth(),height:.96*a.stage.getHeight(),fill:"black",opacity:.9,cornerRadius:.01*a.stage.getWidth()});Kinetic.Group.prototype.add.call(this,c);c={fontSize:.025*a.stage.getHeight(),fontFamily:"Verdana",fill:"white",x:.04*a.stage.getWidth(),y:.01*a.stage.getHeight(),width:.35*a.stage.getWidth(),height:.94*a.stage.getHeight(),maxLines:38};this.logtext=new f(c);Kinetic.Group.prototype.add.call(this,this.logtext);d={fontSize:.025*a.stage.getHeight(),fontFamily:"Verdana",fill:"lightgrey",x:.01*
a.stage.getWidth(),y:.01*a.stage.getHeight(),width:.03*a.stage.getWidth(),height:.94*a.stage.getHeight(),maxLines:38};this.lognumbers=new f(d);Kinetic.Group.prototype.add.call(this,this.lognumbers);this.playerLogs=[];this.playerLogNumbers=[];for(var e=0;e<a.playerNames.length;e++)this.playerLogs[e]=new f(c),this.playerLogs[e].hide(),Kinetic.Group.prototype.add.call(this,this.playerLogs[e]),this.playerLogNumbers[e]=new f(d),this.playerLogNumbers[e].hide(),Kinetic.Group.prototype.add.call(this,this.playerLogNumbers[e])};
Kinetic.Util.extend(d,Kinetic.Group);d.prototype.addMessage=function(c){var d=this.lognumbers;this.logtext.setMultiText(c);d.setMultiText(a.deckSize.toString());for(d=0;d<a.playerNames.length;d++)if(c.startsWith(a.playerNames[d])){var e=this.playerLogNumbers[d];this.playerLogs[d].setMultiText(c);e.setMultiText(a.deckSize.toString());break}};d.prototype.showPlayerActions=function(c){for(var d,e=0;e<a.playerNames.length;e++)a.playerNames[e]===c&&(d=e);this.logtext.hide();this.lognumbers.hide();this.playerLogs[d].show();
this.playerLogNumbers[d].show();this.show();a.elements.stageFade.show();a.layers.overtop.draw();var f=this;a.elements.stageFade.on("click tap",function(){a.elements.stageFade.off("click tap");f.playerLogs[d].hide();f.playerLogNumbers[d].hide();f.logtext.show();f.lognumbers.show();f.hide();a.elements.stageFade.hide();a.layers.overtop.draw()})};d.prototype.refreshText=function(){this.logtext.refreshText();this.lognumbers.refreshText();for(var c=0;c<a.playerNames.length;c++)this.playerLogs[c].refreshText(),
this.playerLogNumbers[c].refreshText()};d.prototype.reset=function(){this.logtext.reset();this.lognumbers.reset();for(var c=0;c<a.playerNames.length;c++)this.playerLogs[c].reset(),this.playerLogNumbers[c].reset()};e.exports=d},{"./globals":21,"./multiFitText":27}],27:[function(d,e,c){var a=d("./globals"),f=d("./fitText");d=function(a){Kinetic.Group.call(this,a);this.maxLines=a.maxLines;this.smallHistory=[];for(var c=0;c<this.maxLines;c++){var d=$.extend({},a);d.height=a.height/this.maxLines;d.x=0;
d.y=c*d.height;d=new f(d);Kinetic.Group.prototype.add.call(this,d)}};Kinetic.Util.extend(d,Kinetic.Group);d.prototype.setMultiText=function(c){this.smallHistory.length>=this.maxLines&&this.smallHistory.shift();this.smallHistory.push(c);a.inReplay&&a.animateFast||this.refreshText()};d.prototype.refreshText=function(){for(var a=0;a<this.children.length;a++){var c=this.smallHistory[a];c||(c="");this.children[a].setText(c)}};d.prototype.reset=function(){this.smallHistory=[];for(var a=0;a<this.children.length;a++)this.children[a].setText("")};
e.exports=d},{"./fitText":20,"./globals":21}],28:[function(d,e,c){var a=d("./globals"),f=d("../../constants");d=function(c){var d=this;Kinetic.Group.call(this,c);this.name=new Kinetic.Text({x:c.width/2,y:0,height:c.height,align:"center",fontFamily:"Verdana",fontSize:c.height,text:c.name,fill:"#d8d5ef",shadowColor:"black",shadowBlur:5,shadowOffset:{x:0,y:3},shadowOpacity:.9});for(var e=this.name.getWidth();e>.65*c.width&&5<this.name.getFontSize();)this.name.setFontSize(.9*this.name.getFontSize()),
e=this.name.getWidth();this.name.setOffsetX(e/2);var f=this.name;this.name.on("click tap",function(c){var e=f.getText();1===c.evt.which?a.elements.msgLogGroup.showPlayerActions(e):3===c.evt.which&&d.giveLeader(e)});this.add(this.name);e*=1.4;this.leftline=new Kinetic.Line({points:[0,0,0,c.height/2,c.width/2-e/2,c.height/2],stroke:"#d8d5ef",strokeWidth:1,lineJoin:"round",shadowColor:"black",shadowBlur:5,shadowOffset:{x:0,y:3},shadowOpacity:0});this.add(this.leftline);this.rightline=new Kinetic.Line({points:[c.width/
2+e/2,c.height/2,c.width,c.height/2,c.width,0],stroke:"#d8d5ef",strokeWidth:1,lineJoin:"round",shadowColor:"black",shadowBlur:5,shadowOffset:{x:0,y:3},shadowOpacity:0});this.add(this.rightline);this.playerNum=c.playerNum;this.on("mousemove",function(){if(!a.replay){a.activeHover=this;var c=this.getWidth()/2+this.attrs.x,d=$("#tooltip-player-".concat(this.playerNum));d.css("left",c);d.css("top",this.attrs.y);d.tooltipster("open")}});this.on("mouseout",function(){a.replay||$("#tooltip-player-".concat(d.playerNum)).tooltipster("close")})};
Kinetic.Util.extend(d,Kinetic.Group);d.prototype.giveLeader=function(c){a.sharedReplay&&a.sharedReplayLeader===a.lobby.username&&c!==a.lobby.username&&a.lobby.conn.send("replayAction",{type:f.REPLAY_ACTION_TYPE.LEADER_TRANSFER,name:c})};d.prototype.setActive=function(a){this.leftline.setStrokeWidth(a?3:1);this.rightline.setStrokeWidth(a?3:1);this.name.setShadowOpacity(a?.6:0);this.leftline.setShadowOpacity(a?.6:0);this.rightline.setShadowOpacity(a?.6:0);this.name.setFontStyle(a?"bold":"normal")};
d.prototype.setConnected=function(a){a=a?"#d8d5ef":"#e8233d";this.leftline.setStroke(a);this.rightline.setStroke(a);this.name.setFill(a)};e.exports=d},{"../../constants":3,"./globals":21}],29:[function(d,e,c){var a=d("./globals"),f,g={};c.vars=g;c.init=function(){f=[];g.editing=null;g.actionOccured=!1;g.lastNote=""};var h=function(a){a=f[a];return"undefined"===typeof a?null:a};c.get=h;var l=function(c,d){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;""===d&&(d=void 0);f[c]=d;g.lastNote=
d;!e||a.replay||a.spectating||a.lobby.conn.send("note",{order:c,note:d})};c.set=l;var m=function(a){var c=$("#tooltip-card-".concat(a.order)),d=c.tooltipster("instance");if(!c.tooltipster("status").open){var e=a.getAbsolutePosition(),f=e.x,g=e.y-a.getHeight()*a.parent.scale().y/2;d.option("side","top");200>g&&(g=e.y+a.getHeight()*a.parent.scale().y/2,d.option("side","bottom"));a.indicatorArrow.visible()&&(f=e.x+a.getWidth()*a.parent.scale().x/2/2.5);c.css("left",f);c.css("top",g);a=h(a.order)||"";
d.content(a);c.tooltipster("open")}};c.show=m;c.openEditTooltip=function(c){if(!a.sharedReplay){null!==g.editing&&$("#tooltip-card-".concat(g.editing)).tooltipster("close");m(c);g.editing=c.order;var d=h(c.order);null===d&&(d="");var e=$("#tooltip-card-".concat(c.order));e.tooltipster("instance").content('<input id="tooltip-card-'.concat(c.order,'-input" type="text" value="').concat(d,'"/>'));$("#tooltip-card-".concat(c.order,"-input")).on("keydown",function(a){a.stopPropagation();if("Enter"===a.key||
"Escape"===a.key)g.editing=null,"Escape"===a.key?(d=h(c.order),null===d&&(d="")):"Enter"===a.key&&(a=d=$("#tooltip-card-".concat(c.order,"-input")).val(),d=(new DOMParser).parseFromString(a,"text/html").body.textContent||"",l(c.order,d),g.actionOccured&&(g.actionOccured=!1,e.tooltipster("close"))),q(c)});$("#tooltip-card-".concat(c.order,"-input")).focus(function(){$(this).select()});$("#tooltip-card-".concat(c.order,"-input")).focus()}};var q=function(c){var d=$("#tooltip-card-".concat(c.order)),
e=d.tooltipster("instance"),f=h(c.order)||"";e.content(f);c.noteGiven.setVisible(0<f.length);0===f.length&&d.tooltipster("close");a.layers.UI.draw();a.layers.card.draw()};c.update=q},{"./globals":21}],30:[function(d,e,c){d=function(a){Kinetic.Group.call(this,a);var c=this.getWidth(),d=this.getHeight(),e=new Kinetic.Rect({name:"background",x:0,y:0,width:c,height:d,listening:!0,cornerRadius:.12*d,fill:"black",opacity:.6});this.add(e);c=new Kinetic.Text({x:0,y:.275*d,width:c,height:.5*d,listening:!1,
fontSize:.5*d,fontFamily:"Verdana",fill:"white",stroke:"black",strokeWidth:1,align:"center",text:a.number.toString()});this.add(c);this.pressed=!1;this.clue=a.clue;e.on("mousedown",function(){e.setFill("#888888");e.getLayer().draw();var a=function(){e.setFill("black");e.getLayer().draw();e.off("mouseup");e.off("mouseout")};e.on("mouseout",function(){a()});e.on("mouseup",function(){a()})})};Kinetic.Util.extend(d,Kinetic.Group);d.prototype.setPressed=function(a){this.pressed=a;this.get(".background")[0].setFill(a?
"#cccccc":"black");this.getLayer().batchDraw()};e.exports=d},{}],31:[function(d,e,c){var a=d("./globals"),f=d("../../constants"),g=d("./timer"),h=function(){if(!a.inReplay){a.inReplay=!0;a.replayPos=a.replayLog.length;a.replayTurn=a.replayMax;p();a.lobby.ui.stopAction();a.elements.replayArea.show();for(var c=0;c<a.deck.length;c++)a.deck[c].setBareImage();a.layers.UI.draw();a.layers.card.draw()}};c.enter=h;var l=function(){if(a.inReplay){m(a.replayMax,!0);a.inReplay=!1;a.elements.replayArea.hide();
a.savedAction&&a.lobby.ui.handleAction(a.savedAction);for(var c=0;c<a.deck.length;c++)a.deck[c].setBareImage();a.layers.UI.draw();a.layers.card.draw()}};c.exit=l;var m=function(c,d){var e=!1;0>c&&(c=0);c>a.replayMax&&(c=a.replayMax);c<a.replayTurn&&(e=!0,a.cardsGotten=0,a.cluesSpentPlusStrikes=0);if(a.replayTurn!==c){a.sharedReplay&&a.sharedReplayLeader===a.lobby.username&&a.useSharedTurns&&t(c);a.replayTurn=c;p();d&&(a.animateFast=!0);e&&(a.lobby.ui.reset(),a.replayPos=0);for(;;){c=a.replayLog[a.replayPos];
a.replayPos+=1;if(!c)break;a.lobby.ui.handleNotify(c.data);if("turn"===c.data.type&&c.data.num===a.replayTurn)break}a.animateFast=!1;a.elements.msgLogGroup.refreshText();a.elements.messagePrompt.refreshText();a.layers.card.draw();a.layers.UI.draw()}};c.goto=m;c.backFull=function(){r();m(0,!0)};c.back=function(){r();m(a.replayTurn-1,!0)};c.forward=function(){r();m(a.replayTurn+1)};c.forwardFull=function(){r();m(a.replayMax,!0)};c.backRound=function(){r();m(a.replayTurn-a.playerNames.length,!0)};c.forwardRound=
function(){r();m(a.replayTurn+a.playerNames.length)};c.exitButton=function(){a.replay?(a.lobby.conn.send("gameUnattend"),g.stop(),a.game.hide()):(a.accidentalClueTimer=Date.now(),l())};c.barClick=function(c){c=c.evt.x-this.getAbsolutePosition().x;var d=this.getWidth()/a.replayMax;c=Math.floor((c+d/2)/d);c!==a.replayTurn&&(r(),m(c,!0))};c.barDrag=function(c){var d=this.getParent().getAbsolutePosition().x,e=this.getParent().getWidth()-this.getWidth(),f=c.x-d;c=this.getAbsolutePosition().y;0>f&&(f=0);
f>e&&(f=e);e/=a.replayMax;f=Math.floor((f+e/2)/e);f!==a.replayTurn&&(r(),m(f,!0));return{x:d+f*e,y:c}};var q=function(c,d){var e=c.getParent().getWidth()-c.getWidth();c.setX(d*e/a.replayMax)},p=function(){q(a.elements.replayShuttle,a.replayTurn);q(a.elements.replayShuttleShared,a.sharedReplayTurn)};c.adjustShuttles=p;c.promptTurn=function(c){3===c.evt.which&&(c=window.prompt("Which turn do you want to go to?"),Number.isNaN(c)||(--c,a.replay?r():h(!0),m(c,!0)))};c.toggleSharedTurns=function(){a.useSharedTurns=
!a.useSharedTurns;a.elements.replayShuttleShared.setVisible(!a.useSharedTurns);a.useSharedTurns&&(a.sharedReplayLeader===a.lobby.username?t(a.replayTurn):m(a.sharedReplayTurn))};var r=function(){a.replay&&a.sharedReplay&&a.sharedReplayLeader!==a.lobby.username&&a.useSharedTurns&&a.elements.toggleSharedTurnButton.dispatchEvent(new MouseEvent("click"))};c.checkDisableSharedTurns=r;var t=function(c){a.sharedReplayTurn!==c&&(a.lobby.conn.send("replayAction",{type:f.REPLAY_ACTION_TYPE.TURN,turn:c}),a.sharedReplayTurn=
c,p())}},{"../../constants":3,"./globals":21,"./timer":33}],32:[function(d,e,c){var a=d("./globals");c.updatePace=function(){var c=a.score+a.deckSize-a.maxScore,d=c+a.playerNames.length,e=c+Math.floor(a.playerNames.length/2),l=a.elements.paceNumberLabel;if(0===a.deckSize)l.setText("-"),l.setFill("#d8d5ef");else{var m=d.toString();0<d&&(m="+".concat(d));l.setText(m);0>=d?l.setFill("#df1c2d"):0>e?l.setFill("#ef8c1d"):0>c?l.setFill("#efef1d"):l.setFill("#d8d5ef")}};c.updateEfficiency=function(c){a.cardsGotten+=
c;c=(a.cardsGotten/a.cluesSpentPlusStrikes).toFixed(2);var d=0,e=!0,f=!1,m=void 0;try{for(var q=a.variant.suits[Symbol.iterator](),p;!(e=(p=q.next()).done);e=!0){var r=p.value;d+=10;r.oneOfEach?d-=5:a.variant.name.startsWith("Up or Down")&&--d}}catch(t){f=!0,m=t}finally{try{e||null==q.return||q.return()}finally{if(f)throw m;}}q=a.playerNames.length;p=5;4===q||5===q?p=4:6===q&&(p=3);d=d-(p-1)*q-5*a.variant.suits.length;p=5*a.variant.suits.length;r=1;5<=q&&(r=2);q=1;a.variant.name.startsWith("Clue Starved")&&
(q=2);d=(p/(8+Math.floor((d+a.variant.suits.length-r)/q))).toFixed(2);0===a.cluesSpentPlusStrikes?a.elements.efficiencyNumberLabel.setText("- / ".concat(d)):a.elements.efficiencyNumberLabel.setText("".concat(c," / ").concat(d))}},{"./globals":21}],33:[function(d,e,c){function a(a){var c=h[a];f.timed||(c*=-1);var d="Time ";d=f.timed?d+"remaining":d+"taken";d=d+":<br /><strong>"+p(c);d+="</strong>";$("#tooltip-player-".concat(a)).tooltipster("instance").content(d)}var f=d("./globals"),g,h,l,m;c.init=
function(){m=l=h=g=null};c.update=function(c){q();if(null!==f.elements.timer1&&null!==f.elements.timer2){h=c.times;l=c.active;m=(new Date).getTime();f.spectating||(c=h[f.playerUs],f.timed||(c*=-1),f.elements.timer1.setText(p(c)));c=l===f.playerUs&&!f.spectating;if(!c){var d=h[l];f.timed||(d*=-1);f.elements.timer2.setText(p(d))}f.elements.timer2.setVisible(!c&&-1!==l);f.layers.timer.draw();for(d=0;d<h.length;d++)a(d);if(-1!==l){var e=c?f.elements.timer1:f.elements.timer2;g=window.setInterval(function(){var c=
(new Date).getTime(),d=c-m;m=c;if(!(0>d)){h[l]-=d;f.timed&&0>h[l]&&(h[l]=0);c=h[l];f.timed||(c*=-1);var g=p(c);e.setText(g);e.getLayer().batchDraw();f.timed&&f.lobby.settings.sendTimerSound&&0<c&&1E4>=c&&900<d&&1100>d&&!f.lobby.errorOccured&&f.game.sounds.play("tone")}a(l)},1E3)}}};var q=function(){null!==g&&(window.clearInterval(g),g=null)};c.stop=q;d=function(a){Kinetic.Group.call(this,a);var c=new Kinetic.Rect({x:0,y:0,width:a.width,height:a.height,fill:"black",cornerRadius:a.cornerRadius,opacity:.2,
listening:!1});this.add(c);c=new Kinetic.Text({x:0,y:6*a.spaceH,width:a.width,height:a.height,fontSize:a.labelFontSize||a.fontSize,fontFamily:"Verdana",align:"center",text:a.label,fill:"#d8d5ef",shadowColor:"black",shadowBlur:10,shadowOffset:{x:0,y:0},shadowOpacity:.9,listening:!1});this.add(c);var d=new Kinetic.Text({x:0,y:a.spaceH,width:a.width,height:a.height,fontSize:a.fontSize,fontFamily:"Verdana",align:"center",text:"??:??",fill:"#d8d5ef",shadowColor:"black",shadowBlur:10,shadowOffset:{x:0,
y:0},shadowOpacity:.9,listening:!1});this.add(d);this.setText=function(a){return d.setText(a)}};Kinetic.Util.extend(d,Kinetic.Group);c.TimerDisplay=d;var p=function(a){a=Math.ceil(a/1E3);return"".concat(Math.floor(a/60),":").concat(r(a%60))},r=function(a){return 10>a?"0".concat(a):"".concat(a)}},{"./globals":21}],34:[function(d,e,c){var a=d("./button");d=function(c){var d=this;a.call(this,c);var e=!1,f=function(){e=!e;d.setText(e?c.alternateText:c.text);d.getLayer()&&d.getLayer().batchDraw()};this.on("click tap",
f);c.initialState&&f()};Kinetic.Util.extend(d,a);e.exports=d},{"./button":9}],35:[function(d,e,c){function a(a,c){x();l.init();z.init();K.init();k.lobby=a;k.game=c;var d=this,e=t.ACT,T=t.CARDW,ca=t.CHARACTERS,aa=t.CLUE_TYPE,G=t.INDICATOR,Pa=t.SUIT,bb=function(a,c){this.type=a;this.value=c},Qa=function(a,c){var d=a.type,e=a.value,f;d===aa.COLOR?f=c.clueColors.findIndex(function(a){return a===e}):d===aa.RANK&&(f=e);return{type:d,value:f}},Wa=function(a,c){var d=a.type;a=a.value;var e;d===aa.COLOR?e=
c.clueColors[a]:d===aa.RANK&&(e=a);return new bb(d,e)};k.ImageLoader=new N(function(){l.buildCards();d.buildUI();H.init();k.lobby.conn.send("ready");k.ready=!0});this.showClueMatch=function(a,c){for(var d=0;d<k.deck.length;d++)d!==a&&k.deck[d].setIndicator(!1);k.layers.card.batchDraw();if(0>a)return!1;d=!1;for(var e=0;e<k.elements.playerHands[a].children.length;e++){var f=k.elements.playerHands[a].children[e].children[0],g=!1,h=void 0;if(c.type===aa.RANK){if(c.value===f.trueRank||k.variant.name.startsWith("Multi-Fives")&&
5===f.trueRank)g=!0,h=G.POSITIVE}else if(c.type===aa.COLOR){var m=c.value;if(f.trueSuit===Pa.RAINBOW||f.trueSuit===Pa.RAINBOW1OE||f.trueSuit.clueColors.includes(m))g=!0,h=m.hexCode}g?(d=!0,f.setIndicator(!0,h)):f.setIndicator(!1)}k.layers.card.batchDraw();return d};k.stage=new Kinetic.Stage({container:"game"});(function(a){var c=window.innerWidth,d=window.innerHeight;640>c&&(c=640);360>d&&(d=360);if(c<1.777*d){var e=c;var f=c/1.777}else f=d,e=1.777*d;e=Math.floor(e);f=Math.floor(f);e>.98*c&&(e=c);
f>.98*d&&(f=d);a.setWidth(e);a.setHeight(f)})(k.stage);var w=k.stage.getWidth(),u=k.stage.getHeight(),ja=new Kinetic.Layer;k.layers.card=new Kinetic.Layer;k.layers.UI=new Kinetic.Layer;k.layers.overtop=new Kinetic.Layer;var Ba=new Kinetic.Layer({listening:!1});k.layers.timer=new Kinetic.Layer({listening:!1});var Xa,db,Ga,gb,Ya,Ha,P,Ra,ta,Ea,Sa,Ca=[],Ka=new Map,Va=new Map,ua,Ia,ob,O,M,ya,Ma,n,la,Ja,va,Za,ab;this.overPlayArea=function(a){return a.x>=ua.getX()&&a.y>=ua.getY()&&a.x<=ua.getX()+ua.getWidth()&&
a.y<=ua.getY()+ua.getHeight()};this.buildUI=function(){var a,c;var d=k.stage.getLayers();for(c=0;c<d.length;c++)d[c].remove();d=new Kinetic.Image({x:0,y:0,width:w,height:u,image:k.ImageLoader.get("background")});ja.add(d);Ia=new Kinetic.Rect({x:.8*w,y:.6*u,width:.2*w,height:.4*u});Ma=new Kinetic.Rect({x:.8*w,y:.6*u,width:.19*w,height:.39*u,stroke:"#df1c2d",strokeWidth:.005*w,cornerRadius:.01*w,visible:!1});k.layers.UI.add(Ma);n=new Kinetic.Rect({x:.8*w,y:.6*u,width:.19*w,height:.39*u,stroke:"yellow",
strokeWidth:.004*w,cornerRadius:.01*w,visible:!1,opacity:.75});k.layers.UI.add(n);var e=new Kinetic.Rect({x:.8*w,y:.6*u,width:.19*w,height:.39*u,fill:"black",opacity:.2,cornerRadius:.01*w});ja.add(e);d=new Kinetic.Image({x:.82*w,y:.62*u,width:.15*w,height:.35*u,opacity:.2,image:k.ImageLoader.get("trashcan")});ja.add(d);var l=.2,x=.235,z=.098;k.lobby.settings.showBGAUI&&(x=l=.01,z=.25);d=new Kinetic.Group({x:l*w,y:x*u});k.layers.UI.add(d);e=new Kinetic.Rect({x:0,y:0,width:.4*w,height:z*u,fill:"black",
opacity:.3,cornerRadius:.01*u,listening:!0});d.add(e);e.on("click tap",function(){k.elements.msgLogGroup.show();k.elements.stageFade.show();k.layers.overtop.draw();k.elements.stageFade.on("click tap",function(){k.elements.stageFade.off("click tap");k.elements.msgLogGroup.hide();k.elements.stageFade.hide();k.layers.overtop.draw()})});c=3;k.lobby.settings.showBGAUI&&(c=8);k.elements.messagePrompt=new X({align:"center",fontSize:.028*u,fontFamily:"Verdana",fill:"#d8d5ef",shadowColor:"black",shadowBlur:10,
shadowOffset:{x:0,y:0},shadowOpacity:.9,listening:!1,x:.01*w,y:.003*u,width:.38*w,height:(z-.003)*u,maxLines:c});d.add(k.elements.messagePrompt);k.elements.stageFade=new Kinetic.Rect({x:0,y:0,width:w,height:u,opacity:.3,fill:"black",visible:!1});k.layers.overtop.add(k.elements.stageFade);k.elements.msgLogGroup=new I;k.layers.overtop.add(k.elements.msgLogGroup);d=.66;c=.81;k.lobby.settings.showBGAUI&&(d=.168,c=.81);la=new Kinetic.Group({x:d*w,y:c*u});k.layers.UI.add(la);e=new Kinetic.Rect({x:0,y:0,
width:.13*w,height:.18*u,fill:"black",opacity:.2,cornerRadius:.01*w});la.add(e);c=new Kinetic.Text({x:.01*w,y:.01*u,width:.11*w,height:.03*u,fontSize:.026*u,fontFamily:"Verdana",align:"left",text:"Placeholder text",fill:"#d8d5ef",shadowColor:"black",shadowBlur:10,shadowOffset:{x:0,y:0},shadowOpacity:.9});d=c.clone().setText("0").setWidth(.03*w).align("right");Ha=c.clone({text:"Turn",x:.03*w,y:.01*u});la.add(Ha);P=d.clone({text:"1",x:.07*w,y:.01*u});la.add(P);gb=c.clone({text:"Score",x:.03*w,y:.045*
u});la.add(gb);Ya=d.clone({text:"0",x:.07*w,y:.045*u});la.add(Ya);db=c.clone({text:"Clues",x:.03*w,y:.08*u});la.add(db);Ga=d.clone({text:"8",x:.07*w,y:.08*u});la.add(Ga);for(a=0;3>a;a++){var y=new Kinetic.Rect({x:(.01+.04*a)*w,y:.115*u,width:.03*w,height:.053*u,fill:"black",opacity:.6,cornerRadius:.003*w});la.add(y)}a=.623;y=.9;k.lobby.settings.showBGAUI&&(a=.01,y=.72);Ra=new Kinetic.Text({x:a*w,y:y*u,width:.03*w,height:.03*u,fontSize:.03*u,fontFamily:"Verdana",align:"center",text:"\ud83d\udc40",
fill:"yellow",shadowColor:"black",shadowBlur:10,shadowOffset:{x:0,y:0},shadowOpacity:.9,visible:!1});k.layers.UI.add(Ra);Ra.on("mousemove",function(){k.activeHover=this;var a=this.attrs.x+this.getWidth()/2;$("#tooltip-spectators").css("left",a);$("#tooltip-spectators").css("top",this.attrs.y);$("#tooltip-spectators").tooltipster("open")});Ra.on("mouseout",function(){$("#tooltip-spectators").tooltipster("close")});ta=new Kinetic.Text({x:(a-.04)*w,y:(y+.034)*u,width:.11*w,height:.03*u,fontSize:.03*
u,fontFamily:"Verdana",align:"center",text:"0",fill:"#d8d5ef",shadowColor:"black",shadowBlur:10,shadowOffset:{x:0,y:0},shadowOpacity:.9,visible:!1});k.layers.UI.add(ta);var C=.623;var D=.85;k.lobby.settings.showBGAUI&&(C=a+.03,D=y);Ea=new Kinetic.Text({x:C*w,y:D*u,width:.03*w,height:.03*u,fontSize:.03*u,fontFamily:"Verdana",align:"center",text:"\ud83d\udc51",fill:"#d8d5ef",shadowColor:"black",shadowBlur:10,shadowOffset:{x:0,y:0},shadowOpacity:.9,visible:!1});k.layers.UI.add(Ea);Sa=new Kinetic.Tween({node:Ea,
scaleX:2,scaleY:2,offsetX:12,offsetY:10,duration:.5,easing:Kinetic.Easings.EaseInOut,onFinish:function(){Sa.reverse()}});Sa.anim.addLayer(k.layers.UI);Ea.on("mousemove",function(){k.activeHover=this;var a=this.attrs.x+this.getWidth()/2;$("#tooltip-leader").css("left",a);$("#tooltip-leader").css("top",this.attrs.y);$("#tooltip-leader").tooltipster("open")});Ea.on("mouseout",function(){$("#tooltip-leader").tooltipster("close")});Ea.on("click",function(a){3===a.evt.which&&k.sharedReplayLeader===k.lobby.username&&
(a="What is the number of the person that you want to pass the replay leader to?\n\n"+k.spectators.map(function(a,c){return"".concat(c+1," - ").concat(a,"\n")}).join(""),a=window.prompt(a),Number.isNaN(a)||(a=k.spectators[a-1],a!==k.lobby.username&&k.lobby.conn.send("replayAction",{type:t.REPLAY_ACTION_TYPE.LEADER_TRANSFER,name:a})))});ob=new Kinetic.Rect({x:.8*w,y:.01*u,width:.19*w,height:.51*u,fill:"black",opacity:.2,cornerRadius:.01*w});ja.add(ob);k.elements.clueLog=new E({x:.81*w,y:.02*u,width:.17*
w,height:.49*u});k.layers.UI.add(k.elements.clueLog);e=new Kinetic.Rect({x:.8*w,y:.53*u,width:.19*w,height:.06*u,fill:"black",opacity:.2,cornerRadius:.01*w});ja.add(e);a=c.clone({text:"Pace",x:.825*w,y:.54*u,fontSize:.02*u});k.layers.UI.add(a);k.elements.paceNumberLabel=d.clone({text:"-",x:.9*w,y:.54*u,fontSize:.02*u,align:"left"});k.layers.UI.add(k.elements.paceNumberLabel);c=c.clone({text:"Efficiency",x:.825*w,y:.56*u,fontSize:.02*u});k.layers.UI.add(c);k.elements.efficiencyNumberLabel=d.clone({text:"-",
x:.9*w,y:.56*u,width:.08*w,fontSize:.02*u,align:"left"});k.layers.UI.add(k.elements.efficiencyNumberLabel);6===k.variant.suits.length||k.variant.showSuitNames?(a=.04,y=.06,C=.151,c=.019):(a=.05,y=.075,C=.189,c=0);d=.183;c=.345+c;D=.015;k.variant.showSuitNames&&(c-=.018);k.lobby.settings.showBGAUI&&(d=l,c=x+z+.02,D=.006);4===k.variant.suits.length||5===k.variant.suits.length&&k.variant.showSuitNames?d+=(y+D)/2:3===k.variant.suits.length&&(d+=(y+D)/2*2);this.suitLabelTexts=[];l=0;x=!0;z=!1;var T=void 0;
try{for(var F=k.variant.suits[Symbol.iterator](),G;!(x=(G=F.next()).done);x=!0){var L=G.value,N=d+(y+D)*l;var H=new Kinetic.Image({x:N*w,y:c*u,width:y*w,height:C*u,image:k.cardImages["Card-".concat(L.name,"-0")]});ja.add(H);var Z=new m({x:N*w,y:c*u,width:y*w,height:C*u});Ka.set(L,Z);k.layers.card.add(Z);var ha=new q({x:.81*w,y:(.61+a*l)*u,width:.17*w,height:.17*u});Va.set(L,ha);k.layers.card.add(ha);if(k.variant.showSuitNames){var da=L.name;if(k.lobby.settings.showColorblindUI&&1<L.clueColors.length&&
L!==Pa.RAINBOW&&L!==Pa.RAINBOW1OE){var oa=L.clueColors.map(function(a){return a.abbreviation}).join("/");da+=" [".concat(oa,"]")}k.variant.name.startsWith("Up or Down")&&(da="");var pa=new v({x:(d-.01+(y+D)*l)*w,y:(c+.155)*u,width:.08*w,height:.051*u,fontSize:.02*u,fontFamily:"Verdana",align:"center",text:da,fill:"#d8d5ef"});Ba.add(pa);this.suitLabelTexts.push(pa)}l+=1}}catch(Oa){z=!0,T=Oa}finally{try{x||null==F.return||F.return()}finally{if(z)throw T;}}H=.183;F=.345;G=.435;k.lobby.settings.showBGAUI&&
(H=.01,F=.279,G=.4);ua=new Kinetic.Rect({x:(H-.03)*w,y:(F-.03)*u,width:(G+.06)*w,height:.249*u});Xa=new Kinetic.Rect({x:.08*w,y:.8*u,width:.075*w,height:.189*u,fill:"black",opacity:.2,cornerRadius:.006*w});ja.add(Xa);Xa.on("click",S.promptTurn);k.elements.drawDeck=new h({x:.08*w,y:.8*u,width:.075*w,height:.189*u,cardback:"deck-back",suits:k.variant.suits});k.layers.card.add(k.elements.drawDeck);k.elements.deckPlayAvailableLabel=new Kinetic.Rect({x:.08*w,y:.8*u,width:.075*w,height:.189*u,stroke:"yellow",
cornerRadius:6,strokeWidth:10,visible:!1});k.layers.UI.add(k.elements.deckPlayAvailableLabel);var Qa={2:[{x:.19,y:.77,w:.42,h:.189,rot:0},{x:.19,y:.01,w:.42,h:.189,rot:0}],3:[{x:.19,y:.77,w:.42,h:.189,rot:0},{x:.01,y:.71,w:.41,h:.189,rot:-78},{x:.705,y:0,w:.41,h:.189,rot:78}],4:[{x:.23,y:.77,w:.34,h:.189,rot:0},{x:.015,y:.7,w:.34,h:.189,rot:-78},{x:.23,y:.01,w:.34,h:.189,rot:0},{x:.715,y:.095,w:.34,h:.189,rot:78}],5:[{x:.23,y:.77,w:.34,h:.189,rot:0},{x:.03,y:.77,w:.301,h:.18,rot:-90},{x:.025,y:.009,
w:.34,h:.189,rot:0},{x:.445,y:.009,w:.34,h:.189,rot:0},{x:.77,y:.22,w:.301,h:.18,rot:90}]},La={2:[],3:[],4:[],5:[]};H={x:.44,y:.04,w:.34,h:.16,spacing:.24};for(F=2;5>=F;F++)for(G=H.x,L=H.y,Z=H.w,ha=H.spacing,4<=F&&(G+=.03,Z-=.07),5===F&&(L-=.03,ha-=.042),da=0;da<F;da++)La[F].push({x:G,y:L+ha*da,w:Z,h:H.h,rot:0});F=H.y;G=H.h;L=H.rot;H=H.spacing;for(Z=0;4>Z;Z++)La[4].push({x:.47,y:F+H*Z,w:.27,h:G,rot:L});var Da={2:[{x:.185,y:.762,w:.43,h:.205,rot:0},{x:.185,y:.002,w:.43,h:.205,rot:0}],3:[{x:.185,y:.762,
w:.43,h:.205,rot:0},{x:.005,y:.718,w:.42,h:.205,rot:-78},{x:.708,y:-.008,w:.42,h:.205,rot:78}],4:[{x:.225,y:.762,w:.35,h:.205,rot:0},{x:.01,y:.708,w:.35,h:.205,rot:-78},{x:.225,y:.002,w:.35,h:.205,rot:0},{x:.718,y:.087,w:.35,h:.205,rot:78}],5:[{x:.225,y:.762,w:.35,h:.205,rot:0},{x:.026,y:.775,w:.311,h:.196,rot:-90},{x:.02,y:.001,w:.35,h:.205,rot:0},{x:.44,y:.001,w:.35,h:.205,rot:0},{x:.774,y:.215,w:.311,h:.196,rot:90}]},fa={2:[{x:.18,y:.97,w:.44,h:.02},{x:.18,y:.21,w:.44,h:.02}],3:[{x:.18,y:.97,w:.44,
h:.02},{x:.01,y:.765,w:.12,h:.02},{x:.67,y:.765,w:.12,h:.02}],4:[{x:.22,y:.97,w:.36,h:.02},{x:.01,y:.74,w:.13,h:.02},{x:.22,y:.21,w:.36,h:.02},{x:.66,y:.74,w:.13,h:.02}],5:[{x:.22,y:.97,w:.36,h:.02},{x:.025,y:.775,w:.116,h:.02},{x:.015,y:.199,w:.36,h:.02},{x:.435,y:.199,w:.36,h:.02},{x:.659,y:.775,w:.116,h:.02}]},Ta={2:[],3:[],4:[],5:[]};for(H=2;5>=H;H++)for(F=0;F<H;F++)Ta[H].push({x:La[H][F].x+-.01,y:La[H][F].y+.17,w:La[H][F].w+.02,h:.02});var Y=k.playerNames.length,Wa=function(a){var c=!1;0===a&&
(c=!0);k.lobby.settings.showBGAUI&&(c=!0);k.lobby.settings.reverseHands&&(c=!c);return c};H=function(a){var c=a-k.playerUs;0>c&&(c+=Y);var d=Qa;k.lobby.settings.showBGAUI&&(d=La);var f=!1;a!==k.playerUs&&(f=!0);k.lobby.settings.showBGAUI&&(f=!1);k.elements.playerHands[a]=new q({x:d[Y][c].x*w,y:d[Y][c].y*u,width:d[Y][c].w*w,height:d[Y][c].h*u,rotationDeg:d[Y][c].rot,align:"center",reverse:Wa(c),invertCards:f});k.layers.card.add(k.elements.playerHands[a]);k.lobby.settings.showBGAUI||(e=new Kinetic.Rect({x:Da[Y][c].x*
w,y:Da[Y][c].y*u,width:Da[Y][c].w*w,height:Da[Y][c].h*u,rotationDeg:Da[Y][c].rot,cornerRadius:.01*Da[Y][c].w*w,opacity:.4,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:Da[Y][c].w*w,y:0},fillLinearGradientColorStops:[0,"rgba(0,0,0,0)",.9,"white"]}),Wa(c)&&e.setFillLinearGradientColorStops([1,"rgba(0,0,0,0)",.1,"white"]),ja.add(e));d=fa;k.lobby.settings.showBGAUI&&(d=Ta);Ca[a]=new B({x:d[Y][c].x*w,y:d[Y][c].y*u,width:d[Y][c].w*w,height:d[Y][c].h*u,name:k.playerNames[a],playerNum:a});
k.layers.UI.add(Ca[a]);if(0<k.characterAssignments.length){f=.03*w;var g=.03*u;c=new Kinetic.Text({width:f,height:g,x:d[Y][c].x*w-f/2,y:d[Y][c].y*u-g/2,fontSize:.03*u,fontFamily:"Verdana",align:"center",text:ca[k.characterAssignments[a]].emoji,fill:"yellow",shadowColor:"black",shadowBlur:10,shadowOffset:{x:0,y:0},shadowOpacity:.9});k.layers.UI.add(c);c.on("mousemove",function(){k.activeHover=this;var c=this.getWidth()/2+this.attrs.x,d=$("#tooltip-character-assignment-".concat(a));d.css("left",c);
d.css("top",this.attrs.y);var e=ca[k.characterAssignments[a]];c=k.characterMetadata[a];e="<b>".concat(e.name,"</b>:<br />").concat(e.description);e.includes("[random color]")?e=e.replace("[random color]",k.variant.clueColors[c].name.toLowerCase()):e.includes("[random number]")?e=e.replace("[random number]",c):e.includes("[random suit]")&&(e=e.replace("[random suit]",k.variant.suits[c].name));d.tooltipster("instance").content(e);d.tooltipster("open")});c.on("mouseout",function(){$("#tooltip-character-assignment-".concat(a)).tooltipster("close")})}};
for(F=0;F<Y;F++)H(F);H=.1;F=.54;k.lobby.settings.showBGAUI&&(H=d-.102,F=c+.22);O=new Kinetic.Group({x:H*w,y:F*u,width:.55*w,height:.27*u});k.elements.clueTargetButtonGroup=new g;k.elements.clueTargetButtonGroup.selectNextTarget=function(){for(var a=0,c=0;c<this.list.length;c++)if(this.list[c].pressed){a=(c+1)%this.list.length;break}this.list[a].dispatchEvent(new MouseEvent("click"))};k.elements.clueButtonGroup=new g;k.elements.rankClueButtons=[];k.elements.suitClueButtons=[];d=.26*w-.044*(Y-2)*w;
for(c=0;c<Y-1;c++){var R=(k.playerUs+c+1)%Y;R=new p({x:d,y:0,width:.08*w,height:.025*u,text:k.playerNames[R],targetIndex:R});O.add(R);k.elements.clueTargetButtonGroup.add(R);d+=.0875*w}c=5;k.variant.name.startsWith("Multi-Fives")&&(c=4);for(G=1;G<=c;G++)d=.134+.025*(5-c),R=new Q({x:(d+.049*G)*w,y:.027*u,width:.04*w,height:.071*u,number:G,clue:new bb(aa.RANK,G)}),k.elements.rankClueButtons.push(R),O.add(R),k.elements.clueButtonGroup.add(R);d=.158+.025*(6-k.variant.clueColors.length);c=0;G=!0;L=!1;
Z=void 0;try{for(var ba=k.variant.clueColors[Symbol.iterator](),xa;!(G=(xa=ba.next()).done);G=!0){var Ua=xa.value;R=new r({x:(d+.049*c)*w,y:.1*u,width:.04*w,height:.071*u,color:Ua.hexCode,text:Ua.abbreviation,clue:new bb(aa.COLOR,Ua)});O.add(R);k.elements.suitClueButtons.push(R);k.elements.clueButtonGroup.add(R);c+=1}}catch(Oa){L=!0,Z=Oa}finally{try{G||null==ba.return||ba.return()}finally{if(L)throw Z;}}k.elements.giveClueButton=new f({x:.183*w,y:.172*u,width:.236*w,height:.051*u,text:"Give Clue"});
O.add(k.elements.giveClueButton);k.elements.giveClueButton.on("click tap",this.giveClue);O.hide();k.layers.UI.add(O);R=.275;ba=.56;k.lobby.settings.showBGAUI&&(R=H+.178,ba=F);ya=new Kinetic.Rect({x:R*w,y:ba*u,width:.25*w,height:.15*u,cornerRadius:.01*w,fill:"black",opacity:.5,visible:!1});k.layers.UI.add(ya);M=new Kinetic.Text({x:(R-.125)*w,y:(ba+.025)*u,width:.5*w,height:.19*u,fontFamily:"Verdana",fontSize:.08*u,strokeWidth:1,text:"No Clues",align:"center",fill:"#df2c4d",stroke:"black",visible:!1});
k.layers.UI.add(M);k.replay||!k.timed&&!k.lobby.settings.showTimerInUntimed||(R=.155,ba=.565,Ua=xa=.592,k.lobby.settings.showBGAUI&&(ba=R=.31,xa=.77,Ua=.885),k.elements.timer1=new K.TimerDisplay({x:R*w,y:xa*u,width:.08*w,height:.051*u,fontSize:.03*u,cornerRadius:.005*u,spaceH:.01*u,label:"You",visible:!k.spectating}),k.layers.timer.add(k.elements.timer1),k.elements.timer2=new K.TimerDisplay({x:ba*w,y:Ua*u,width:.08*w,height:.051*u,fontSize:.03*u,labelFontSize:.02*u,cornerRadius:.005*u,spaceH:.01*
u,label:"Current\nPlayer",visible:!1}),k.layers.timer.add(k.elements.timer2));K.stop();R=.15;ba=.51;xa=.5;k.lobby.settings.showBGAUI&&(R=.01,ba=.49,xa=.4);k.elements.replayArea=new Kinetic.Group({x:R*w,y:ba*u,width:xa*w,height:.27*u});Ja=new Kinetic.Rect({x:0,y:.0425*u,width:xa*w,height:.01*u,fill:"black",cornerRadius:.005*u,listening:!1});k.elements.replayArea.add(Ja);e=new Kinetic.Rect({x:0,y:0,width:xa*w,height:.05*u,opacity:0});e.on("click",S.barClick);k.elements.replayArea.add(e);k.elements.replayShuttle=
new Kinetic.Rect({x:0,y:.0325*u,width:.03*w,height:.03*u,fill:"#0000cc",cornerRadius:.01*w,draggable:!0,dragBoundFunc:S.barDrag});k.elements.replayShuttle.on("dragend",function(){k.layers.card.draw();k.layers.UI.draw()});k.elements.replayArea.add(k.elements.replayShuttle);k.elements.replayShuttleShared=new Kinetic.Rect({x:0,y:.0325*u,width:.03*w,height:.03*u,cornerRadius:.01*w,fill:"#d1d1d1",visible:!k.useSharedTurns});k.elements.replayShuttleShared.on("click tap",function(){S.goto(k.sharedReplayTurn,
!0)});k.elements.replayArea.add(k.elements.replayShuttleShared);S.adjustShuttles();ba=.1;k.lobby.settings.showBGAUI&&(ba=.05);R=new f({x:ba*w,y:.07*u,width:.06*w,height:.08*u,image:"replay-back-full"});R.on("click tap",S.backFull);k.elements.replayArea.add(R);R=new f({x:(ba+.08)*w,y:.07*u,width:.06*w,height:.08*u,image:"replay-back"});R.on("click tap",S.back);k.elements.replayArea.add(R);R=new f({x:(ba+.16)*w,y:.07*u,width:.06*w,height:.08*u,image:"replay-forward"});R.on("click tap",S.forward);k.elements.replayArea.add(R);
R=new f({x:(ba+.24)*w,y:.07*u,width:.06*w,height:.08*u,image:"replay-forward-full"});R.on("click tap",S.forwardFull);k.elements.replayArea.add(R);Za=new f({x:(ba+.05)*w,y:.17*u,width:.2*w,height:.06*u,text:"Exit Replay",visible:!k.replay&&!k.sharedReplay});Za.on("click tap",S.exitButton);k.elements.replayArea.add(Za);k.elements.toggleSharedTurnButton=new sa({x:(ba+.05)*w,y:.17*u,width:.2*w,height:.06*u,text:"Pause Shared Turns",alternateText:"Use Shared Turns",initialState:!k.useSharedTurns,visible:!1});
k.elements.toggleSharedTurnButton.on("click tap",S.toggleSharedTurns);k.elements.replayArea.add(k.elements.toggleSharedTurnButton);k.elements.replayArea.hide();k.layers.UI.add(k.elements.replayArea);va=new f({x:.01*w,y:.8*u,width:.06*w,height:.06*u,image:"replay",visible:!1});va.on("click tap",function(){k.inReplay?S.exit():S.enter()});k.layers.UI.add(va);if(!k.replay||k.sharedReplay)k.elements.chatButton=new f({x:.01*w,y:.87*u,width:.06*w,height:.06*u,text:"Chat"}),k.layers.UI.add(k.elements.chatButton),
k.elements.chatButton.on("click tap",function(){k.game.chat.toggle()});ab=new f({x:.01*w,y:.94*u,width:.06*w,height:.05*u,text:"Lobby"});k.layers.UI.add(ab);ab.on("click tap",function(){ab.off("click tap");k.lobby.conn.send("gameUnattend");K.stop();k.game.hide()});k.inReplay&&k.elements.replayArea.show();k.stage.add(ja);k.stage.add(Ba);k.stage.add(k.layers.UI);k.stage.add(k.layers.timer);k.stage.add(k.layers.card);k.stage.add(k.layers.overtop)};this.giveClue=function(){if(k.elements.giveClueButton.getEnabled()&&
!(1E3>Date.now()-k.accidentalClueTimer)){var a=k.elements.clueTargetButtonGroup.getPressed();if(a){var c=k.elements.clueButtonGroup.getPressed();c&&(k.lobby.ui.showClueMatch(a.targetIndex,{}),k.accidentalClueTimer=Date.now(),a={type:"action",data:{type:e.CLUE,target:a.targetIndex,clue:Qa(c.clue,k.variant)}},d.endTurn(a))}}};this.reset=function(){k.elements.messagePrompt.setMultiText("");k.elements.msgLogGroup.reset();var a=k.variant.suits,c=!0,d=!1,e=void 0;try{for(var f=a[Symbol.iterator](),g;!(c=
(g=f.next()).done);c=!0){var h=g.value;Ka.get(h).removeChildren();Va.get(h).removeChildren()}}catch(wa){d=!0,e=wa}finally{try{c||null==f.return||f.return()}finally{if(d)throw e;}}for(a=0;a<k.playerNames.length;a++)k.elements.playerHands[a].removeChildren();k.deck=[];k.postAnimationLayout=null;k.elements.clueLog.clear();k.elements.messagePrompt.reset();k.elements.drawDeck.setCount(0);for(a=0;a<k.elements.strikes.length;a++)k.elements.strikes[a].remove();k.elements.strikes=[];k.animateFast=!0};this.saveReplay=
function(a){var c=a.data;k.replayLog.push(a);"turn"===c.type&&(k.replayMax=c.num);"gameOver"===c.type&&(k.replayMax+=1);!k.replay&&0<k.replayMax&&va.show();k.inReplay&&(S.adjustShuttles(),k.layers.UI.draw())};this.replayAdvanced=function(){k.animateFast=!1;k.inReplay&&S.goto(0);k.layers.card.draw();k.layers.UI.draw()};this.showConnected=function(a){if(k.ready){for(var c=0;c<a.length;c++)Ca[c].setConnected(a[c]);k.layers.UI.draw()}};(function(){var a=new Kinetic.Layer,c=new Kinetic.Text({fill:"#d8d5ef",
stroke:"#747278",strokeWidth:1,text:"Loading...",align:"center",x:0,y:.7*u,width:w,height:.05*u,fontFamily:"Arial",fontStyle:"bold",fontSize:.05*u});a.add(c);var d=new Kinetic.Text({fill:"#d8d5ef",stroke:"#747278",strokeWidth:1,text:"0 / 0",align:"center",x:0,y:.8*u,width:w,height:.05*u,fontFamily:"Arial",fontStyle:"bold",fontSize:.05*u});a.add(d);k.ImageLoader.progressCallback=function(c,e){d.setText("".concat(c,"/").concat(e));a.draw()};k.stage.add(a)})();this.handleNotify=function(a){null!==z.vars.editing&&
(z.vars.actionOccured=!0);k.activeHover&&(k.activeHover.dispatchEvent(new MouseEvent("mouseout")),k.activeHover=null);var c=a.type;if("text"===c)this.setMessage(a);else if("draw"===c){-1===a.suit&&delete a.suit;-1===a.rank&&delete a.rank;var e=k.variant.suits[a.suit];k.learnedCards[a.order]||(k.learnedCards[a.order]={possibleSuits:k.variant.suits.slice(),possibleRanks:k.variant.ranks.slice()});k.deck[a.order]=new y({suit:e,rank:a.rank,order:a.order,suits:k.variant.suits.slice(),ranks:k.variant.ranks.slice(),
holder:a.who});e=new D;e.add(k.deck[a.order]);var f=k.elements.drawDeck.cardback.getAbsolutePosition();e.setAbsolutePosition(f);e.setRotation(-k.elements.playerHands[a.who].getRotation());f=k.elements.drawDeck.cardback.getWidth()/T;e.setScale({x:f,y:f});k.elements.playerHands[a.who].add(e);k.elements.playerHands[a.who].moveToTop();!k.lobby.settings.speedrunPreplay||a.who!==k.playerUs||k.replay||k.spectating||k.learnedCards[a.order].revealed||(e.setDraggable(!0),e.on("dragend.play",Ta))}else if("drawSize"===
c)k.deckSize=a.size,k.elements.drawDeck.setCount(a.size);else if("play"===c||"discard"===c){var g=k.variant.suits[a.which.suit];e=k.deck[a.which.order];f=e.parent;k.lobby.ui.showClueMatch(-1);var h=k.learnedCards[a.which.order];h.suit=g;h.rank=a.which.rank;h.possibleSuits=[g];h.possibleRanks=[a.which.rank];h.revealed=!0;e.showOnlyLearned=!1;e.trueSuit=g;e.trueRank=a.which.rank;h=f.getAbsolutePosition();f.setRotation(f.parent.getRotation());e.suitPips.hide();e.rankPips.hide();f.remove();f.setAbsolutePosition(h);
k.elements.clueLog.checkExpiry();if("play"===c)e.isPlayed=!0,e.turnPlayed=k.turn-1,Ka.get(g).add(f),Ka.get(g).moveToTop(),e.isClued()||L.updateEfficiency(1);else if("discard"===c){e.isDiscarded=!0;e.turnDiscarded=k.turn-1;Va.get(g).add(f);c=!0;g=!1;h=void 0;try{for(var m=Va[Symbol.iterator](),l;!(c=(l=m.next()).done);c=!0){var p=l.value;p[1]&&p[1].moveToTop()}}catch(Na){g=!0,h=Na}finally{try{c||null==m.return||m.return()}finally{if(g)throw h;}}m=!1;do{l=f.getZIndex();if(!l)break;a.which.rank<f.parent.children[l-
1].children[0].trueRank?f.moveDown():m=!0}while(!m);e.isClued()&&L.updateEfficiency(-1)}e.setBareImage();e.hideClues()}else if("reveal"===c)e=k.variant.suits[a.which.suit],f=k.deck[a.which.order],m=k.learnedCards[a.which.order],m.suit=e,m.rank=a.which.rank,m.possibleSuits=[e],m.possibleRanks=[a.which.rank],m.revealed=!0,f.showOnlyLearned=!1,f.trueSuit=e,f.trueRank=a.which.rank,f.setBareImage(),f.hideClues(),f.suitPips.hide(),f.rankPips.hide(),k.animateFast||k.layers.card.draw();else if("clue"===c){k.cluesSpentPlusStrikes+=
1;L.updateEfficiency(0);f=Wa(a.clue,k.variant);k.lobby.ui.showClueMatch(-1);for(e=0;e<a.list.length;e++)m=k.deck[a.list[e]],m.isClued()?L.updateEfficiency(0):L.updateEfficiency(1),l=void 0,l=0===f.type?G.POSITIVE:f.value.hexCode,m.setIndicator(!0,l),m.cluedBorder.show(),m.applyClue(f,!0),m.setBareImage();m=[];for(l=0;l<k.elements.playerHands[a.target].children.length;l++)p=k.elements.playerHands[a.target].children[l].children[0],e=p.order,0>a.list.indexOf(e)&&(m.push(e),p.applyClue(f,!1),p.setBareImage());
e=a.clue.type===aa.RANK?f.value.toString():f.value.name;a=new C({width:k.elements.clueLog.getWidth(),height:.017*u,giver:k.playerNames[a.giver],target:k.playerNames[a.target],clueName:e,list:a.list,neglist:m,turn:a.turn});k.elements.clueLog.add(a);k.elements.clueLog.checkExpiry()}else if("status"===c)k.clues=a.clues,k.variant.name.startsWith("Clue Starved")&&(k.clues/=2),k.score=a.score,k.maxScore=a.maxScore,Ga.setText(k.clues.toString()),1>k.clues||8===k.clues?Ga.setFill("#df1c2d"):1<=k.clues&&2>
k.clues?Ga.setFill("#ef8c1d"):2<=k.clues&&3>k.clues?Ga.setFill("#efef1d"):Ga.setFill("#d8d5ef"),8===k.clues?(Ma.show(),n.hide()):a.doubleDiscard?(Ma.hide(),n.show()):(Ma.hide(),n.hide()),Ya.setText(k.score),L.updatePace(),L.updateEfficiency(0),k.animateFast||k.layers.UI.draw();else if("stackDirections"===c){if(k.variant.name.startsWith("Up or Down"))for(e=0;e<a.directions.length;e++)f=a.directions[e],m=void 0,m=0===f?"":1===f?"Up":2===f?"Down":3===f?"Finished":"Unknown",this.suitLabelTexts[e].setText(m),
Ba.draw()}else if("strike"===c)k.cluesSpentPlusStrikes+=1,L.updateEfficiency(0),e=new Kinetic.Image({x:(.015+.04*(a.num-1))*w,y:.125*u,width:.02*w,height:.036*u,image:k.ImageLoader.get("x"),opacity:0}),e.turn=k.turn,e.on("click",function(){k.replay?S.checkDisableSharedTurns():S.enter();S.goto(this.turn+1,!0)}),la.add(e),k.elements.strikes[a.num-1]=e,k.animateFast?e.setOpacity(1):(new Kinetic.Tween({node:e,opacity:1,duration:k.animateFast?.001:1,runonce:!0})).play();else if("turn"===c){k.turn=a.num;
k.ourTurn=a.who===k.playerUs;k.ourTurn||O.hide();for(e=0;e<k.playerNames.length;e++)Ca[e].setActive(a.who===e);k.animateFast||k.layers.UI.draw();P.setText("".concat(k.turn+1));null!==k.queuedAction&&k.ourTurn&&setTimeout(function(){d.sendMsg(k.queuedAction);d.stopAction();k.queuedAction=null},250)}else if("gameOver"===c){for(a=0;a<k.playerNames.length;a++)Ca[a].off("mousemove");k.elements.timer1&&k.elements.timer1.hide();k.layers.timer.draw();K.stop();k.replay||(k.replay=!0,k.replayTurn=k.replayMax,
k.sharedReplayTurn=k.replayTurn,va.hide());k.inReplay||S.enter();k.animateFast||k.layers.UI.draw()}else if("reorder"===c){f=k.elements.playerHands[a.target];m=[];l=f.children.length;for(p=0;p<l;p++)e=a.handOrder[p],e=k.deck[e].parent,m.push(e),e.remove();for(a=0;a<l;a++)f.add(m[a])}else"boot"===c&&(K.stop(),k.game.hide())};this.handleSpectators=function(a){if(Ra){k.spectators=a.names;var c=0<a.names.length;Ra.setVisible(c);ta.setVisible(c);c?(ta.setText(a.names.length),a=a.names.map(function(a){return"<li>".concat(a,
"</li>")}).join(""),c="<strong>",c=k.replay?c+"Shared Replay Viewers":c+"Spectators",c+=':</strong><ol class="game-tooltips-ol">'.concat(a,"</ol>"),$("#tooltip-spectators").tooltipster("instance").content(c)):$("#tooltip-spectators").tooltipster("close");k.sharedReplay&&(a="<strong>Leader:</strong> ".concat(k.sharedReplayLeader),k.spectators.includes(k.sharedReplayLeader)||(a+=" (away)"),$("#tooltip-leader").tooltipster("instance").content(a));k.layers.UI.batchDraw()}};this.handleNote=function(a){z.set(a.order,
a.notes,!1);var c=k.deck[a.order];c&&(0<a.notes.length?(c.noteGiven.show(),c.noteGiven.rotated||(c.noteGiven.rotate(15),c.noteGiven.rotated=!0)):c.noteGiven.hide(),k.layers.card.batchDraw())};this.handleNotes=function(a){for(var c=0;c<a.notes.length;c++){var d=a.notes[c];z.set(c,d,!1);var e=k.deck[c];e&&(null!==d&&""!==d&&(e.note=d),null!==d&&""!==d&&(e.noteGiven.show(),k.spectating&&!e.noteGiven.rotated&&(e.noteGiven.rotate(15),e.noteGiven.rotated=!0)))}k.layers.card.batchDraw()};this.handleReplayLeader=
function(a){k.sharedReplay=!0;Za.hide();k.sharedReplayLeader=a.name;Ea.show();a="<strong>Leader:</strong> ".concat(k.sharedReplayLeader);k.spectators.includes(k.sharedReplayLeader)||(a+=" (away)");$("#tooltip-leader").tooltipster("instance").content(a);Sa.play();k.elements.toggleSharedTurnButton.show();k.layers.UI.draw()};this.handleReplayTurn=function(a){k.sharedReplayTurn=a.turn;S.adjustShuttles();k.useSharedTurns?S.goto(k.sharedReplayTurn):k.elements.replayShuttleShared.getLayer().batchDraw()};
this.handleReplayIndicator=function(a){if(a=k.deck[a.order]){var c=!(a.indicatorArrow.visible()&&a.indicatorArrow.getFill()===G.REPLAY_LEADER);k.lobby.ui.showClueMatch(-1);a.setIndicator(c,G.REPLAY_LEADER)}};this.stopAction=function(){O.hide();M.hide();ya.hide();Ma.hide();n.hide();k.lobby.ui.showClueMatch(-1);k.elements.clueTargetButtonGroup.off("change");k.elements.clueButtonGroup.off("change");if(!k.lobby.settings.speedrunPreplay)for(var a=k.elements.playerHands[k.playerUs],c=0;c<a.children.length;c++){var d=
a.children[c];d.off("dragend.play");d.setDraggable(!1)}k.elements.drawDeck.cardback.setDraggable(!1);k.elements.deckPlayAvailableLabel.setVisible(!1)};this.endTurn=function(a){k.ourTurn?(d.sendMsg(a),d.stopAction(),k.savedAction=null):k.queuedAction=a};this.handleAction=function(a){k.savedAction=a;if(!k.inReplay){a.canClue?O.show():(M.show(),ya.show(),k.animateFast||k.layers.UI.draw());k.layers.UI.draw();2===k.playerNames.length&&k.elements.clueTargetButtonGroup.list[0].setPressed(!0);k.elements.playerHands[k.playerUs].moveToTop();
if(!k.lobby.settings.speedrunPreplay)for(var c=k.elements.playerHands[k.playerUs],d=0;d<c.children.length;d++){var e=c.children[d];e.setDraggable(!0);e.on("dragend.play",Ta)}k.deckPlays&&(k.elements.drawDeck.cardback.setDraggable(a.canBlindPlayDeck),k.elements.deckPlayAvailableLabel.setVisible(a.canBlindPlayDeck),a.canBlindPlayDeck&&k.elements.drawDeck.moveToTop());a=function(){var a=k.elements.clueTargetButtonGroup.getPressed(),c=k.elements.clueButtonGroup.getPressed();a&&c?(a=a.targetIndex,c=k.lobby.ui.showClueMatch(a,
c.clue)||k.emptyClues||k.variant.name.startsWith("Color Blind")&&c.clue.type===aa.COLOR||"Blind Spot"===k.characterAssignments[k.playerUs]&&a===(k.playerUs+1)%k.playerNames.length||"Oblivious"===k.characterAssignments[k.playerUs]&&a===(k.playerUs-1+k.playerNames.length)%k.playerNames.length,k.elements.giveClueButton.setEnabled(c)):k.elements.giveClueButton.setEnabled(!1)};k.elements.clueTargetButtonGroup.on("change",a);k.elements.clueButtonGroup.on("change",a)}};var Ta=function(){var a=this.getAbsolutePosition();
a.x+=this.getWidth()*this.getScaleX()/2;a.y+=this.getHeight()*this.getScaleY()/2;d.overPlayArea(a)?(d.endTurn({type:"action",data:{type:e.PLAY,target:this.children[0].order}}),k.ourTurn&&this.setDraggable(!1)):a.x>=Ia.getX()&&a.y>=Ia.getY()&&a.x<=Ia.getX()+Ia.getWidth()&&a.y<=Ia.getY()+Ia.getHeight()&&8!==d.currentClues?(d.endTurn({type:"action",data:{type:e.DISCARD,target:this.children[0].order}}),k.ourTurn&&this.setDraggable(!1)):k.elements.playerHands[k.playerUs].doLayout()};this.setMessage=function(a){k.elements.msgLogGroup.addMessage(a.text);
k.elements.messagePrompt.setMultiText(a.text);k.animateFast||(k.layers.UI.draw(),k.layers.overtop.draw())};this.destroy=function(){H.destroy();K.stop();k.stage.destroy()}}var f=d("./button"),g=d("./buttonGroup"),h=d("./cardDeck"),l=d("./cardDraw"),m=d("./cardStack"),q=d("./cardLayout"),p=d("./clueRecipientButton"),r=d("./colorButton"),t=d("../../constants"),v=d("./fitText"),k=d("./globals"),x=d("./globalsInit"),y=d("./card"),C=d("./clueEntry"),E=d("./clueLog"),B=d("./nameFrame"),I=d("./msgLog"),D=
d("./layoutChild"),N=d("./loader"),H=d("./keyboard"),X=d("./multiFitText"),Q=d("./numberButton"),z=d("./notes"),S=d("./replay"),L=d("./stats"),sa=d("./toggleButton"),K=d("./timer");a.prototype.handleMessage=function(a,c){var d={};d.type=a;d.data=c;if("init"===a){k.playerNames=c.names;k.variant=t.VARIANTS[c.variant];k.playerUs=c.seat;k.spectating=c.spectating;k.replay=c.replay;k.sharedReplay=c.sharedReplay;k.timed=c.timed;k.baseTime=c.baseTime;k.timePerTurn=c.timePerTurn;k.deckPlays=c.deckPlays;k.emptyClues=
c.emptyClues;k.characterAssignments=c.characterAssignments;k.characterMetadata=c.characterMetadata;if(k.inReplay=k.replay)k.replayTurn=-1;k.ImageLoader.start()}else"advanced"===a?this.replayAdvanced():"connected"===a?this.showConnected(c.list):"notify"===a?(this.saveReplay(d),k.inReplay&&"reveal"!==c.type&&"boot"!==c.type||this.handleNotify(c)):"action"===a?(k.lastAction=c,this.handleAction.call(this,c),k.animateFast||k.lobby.settings.sendTurnNotify&&k.lobby.sendNotify("It's your turn","turn")):"spectators"===
a?this.handleSpectators.call(this,c):"clock"===a?K.update(c):"note"===a?this.handleNote.call(this,c):"notes"===a?this.handleNotes.call(this,c):"replayLeader"===a?this.handleReplayLeader.call(this,c):"replayTurn"===a?this.handleReplayTurn.call(this,c):"replayIndicator"===a?k.sharedReplayLeader!==k.lobby.username&&this.handleReplayIndicator.call(this,c):"replayMorph"===a?k.sharedReplayLeader!==k.lobby.username&&this.handleNotify({type:"reveal",which:{order:c.order,rank:c.rank,suit:c.suit}}):"replaySound"===
a&&k.sharedReplayLeader!==k.lobby.username&&k.game.sounds.play(c.sound)};a.prototype.sendMsg=function(a){k.lobby.conn.send(a.type,a.data)};a.prototype.updateChatLabel=function(){var a="Chat";0<k.lobby.chatUnread&&(a+=" (".concat(k.lobby.chatUnread,")"));k.elements.chatButton.setText(a);k.layers.UI.draw()};a.prototype.toggleChat=function(){k.game.chat.toggle()};a.prototype.globals=k;e.exports=a},{"../../constants":3,"./button":9,"./buttonGroup":10,"./card":11,"./cardDeck":12,"./cardDraw":13,"./cardLayout":14,
"./cardStack":15,"./clueEntry":16,"./clueLog":17,"./clueRecipientButton":18,"./colorButton":19,"./fitText":20,"./globals":21,"./globalsInit":22,"./keyboard":23,"./layoutChild":24,"./loader":25,"./msgLog":26,"./multiFitText":27,"./nameFrame":28,"./notes":29,"./numberButton":30,"./replay":31,"./stats":32,"./timer":33,"./toggleButton":34}],36:[function(d,e,c){d={debug:!0,fadeTime:350,browserIsFirefox:-1<navigator.userAgent.toLowerCase().indexOf("firefox"),username:null,password:null,conn:null,userList:{},
tableList:{},historyList:{},historyDetailList:[],historyClicked:!1,totalGames:0,randomName:"",settings:{sendTurnNotify:!1,sendTurnSound:!0,sendTimerSound:!0,sendChatNotify:!1,sendChatSound:!1,showBGAUI:!1,showColorblindUI:!1,showTimerInUntimed:!1,reverseHands:!1,speedrunPreplay:!1,speedrunHotkeys:!1},gameID:null,game:{},init:{},state:{activeIndex:0,deck:[]},currentScreen:"login",errorOccured:!1,ui:null,chatUnread:0};e.exports=d;window.globals=d},{}],37:[function(d,e,c){var a=d("../globals"),f=d("../constants"),
g=d("../misc");$(document).ready(function(){for(var a=Object.keys(f.VARIANTS),c=0;c<a.length;c++){var d=a[c];d=new Option(d,d);$("#create-game-variant").append($(d))}$("#create-game-timed").change(function(){$("#create-game-timed").prop("checked")?($("#create-game-timed-label").removeClass("col-3"),$("#create-game-timed-label").addClass("col-2"),$("#create-game-timed-option-1").show(),$("#create-game-timed-option-2").show(),$("#create-game-timed-option-3").show(),$("#create-game-timed-option-4").show()):
($("#create-game-timed-label").addClass("col-3"),$("#create-game-timed-label").removeClass("col-2"),$("#create-game-timed-option-1").hide(),$("#create-game-timed-option-2").hide(),$("#create-game-timed-option-3").hide(),$("#create-game-timed-option-4").hide());$("#nav-buttons-games-create-game").tooltipster("reposition")});$("#create-game-tooltip").on("keypress",function(a){"Enter"===a.key&&(a.preventDefault(),$("#create-game-submit").click())});$("#create-game-submit").on("click",h)});var h=function(c){c.preventDefault();
c=$("#create-game-name").val();var d=$("#create-game-variant").val();localStorage.setItem("createTableVariant",d);var e=document.getElementById("create-game-timed").checked;localStorage.setItem("createTableTimed",e);var f=$("#base-time-minutes").val();localStorage.setItem("baseTimeMinutes",f);var h=$("#time-per-turn-seconds").val();localStorage.setItem("timePerTurnSeconds",h);var l=document.getElementById("create-game-deck-plays").checked;localStorage.setItem("createTableDeckPlays",l);var v=document.getElementById("create-game-empty-clues").checked;
localStorage.setItem("createTableEmptyClues",v);var k=document.getElementById("create-game-character-assignments").checked;localStorage.setItem("createTableCharacterAssignments",k);var x=$("#create-game-password").val();localStorage.setItem("createTablePassword",x);""!==x&&(x=hex_sha256("Hanabi game password ".concat(x)));var y=document.getElementById("create-game-alert-waiters").checked;localStorage.setItem("createTableAlertWaiters",y);a.conn.send("gameCreate",{name:c,variant:d,timed:e,baseTime:Math.round(60*
f),timePerTurn:parseInt(h,10),deckPlays:l,emptyClues:v,characterAssignments:k,password:x,alertWaiters:y});g.closeAllTooltips()};c.ready=function(){$("#create-game-name").val(a.randomName);a.conn.send("getName");a.username.startsWith("test")&&$("#create-game-name").val("test game");var c=localStorage.getItem("createTableVariant");"string"!==typeof c&&(c="No Variant");$("#create-game-variant").val(c);try{var d=JSON.parse(localStorage.getItem("createTableTimed"))}catch(k){d=!1}"boolean"!==typeof d&&
(d=!1);$("#create-game-timed").prop("checked",d);$("#create-game-timed").change();c=localStorage.getItem("baseTimeMinutes");if(null===c||0>c)c=2;$("#base-time-minutes").val(c);try{var e=JSON.parse(localStorage.getItem("timePerTurnSeconds"))}catch(k){e=20}if("number"!==typeof e||0>e)e=20;$("#time-per-turn-seconds").val(e);try{var f=JSON.parse(localStorage.getItem("createTableDeckPlays"))}catch(k){f=!1}"boolean"!==typeof f&&(f=!1);$("#create-game-deck-plays").prop("checked",f);try{var g=JSON.parse(localStorage.getItem("createTableEmptyClues"))}catch(k){g=
!1}"boolean"!==typeof g&&(g=!1);$("#create-game-empty-clues").prop("checked",g);try{var h=JSON.parse(localStorage.getItem("createTableCharacterAssignments"))}catch(k){h=!1}"boolean"!==typeof h&&(h=!1);$("#create-game-character-assignments").prop("checked",h);e=localStorage.getItem("createTablePassword");$("#create-game-password").val(e);try{var v=JSON.parse(localStorage.getItem("createTableAlertWaiters"))}catch(k){v=!1}"boolean"!==typeof v&&(v=!1);$("#create-game-alert-waiters").prop("checked",v);
setTimeout(function(){$("#create-game-name").focus()},1)}},{"../constants":3,"../globals":36,"../misc":49}],38:[function(d,e,c){var a=d("../globals"),f=d("../constants"),g=d("./main");$(document).ready(function(){$("#lobby-history-show-more").on("click",function(c){c.preventDefault();a.historyClicked=!0;a.conn.send("historyGet",{offset:Object.keys(a.historyList).length,amount:10})})});c.show=function(){$("#lobby-history").show();$("#lobby-top-half").hide();$("#lobby-separator").hide();$("#lobby-bottom-half").hide();
g.nav.show("history");g.history.draw()};c.hide=function(){$("#lobby-history").hide();$("#lobby-history-details").hide();$("#lobby-top-half").show();$("#lobby-separator").show();$("#lobby-bottom-half").show();g.nav.show("games")};c.draw=function(){var c=$("#lobby-history-table-tbody");c.html("");var d=Object.keys(a.historyList).map(function(a){return parseInt(a,10)});if(0===d.length)$("#lobby-history-no").show(),$("#lobby-history").addClass("align-center-v"),$("#lobby-history-table-container").hide();
else{$("#lobby-history-no").hide();$("#lobby-history").removeClass("align-center-v");$("#lobby-history-table-container").show();d.sort();d.reverse();for(var e=0;e<d.length;e++){var g=a.historyList[d[e]],v=f.VARIANTS[g.variant].maxScore,k=$("<tr>");$("<td>").html("#".concat(d[e])).appendTo(k);$("<td>").html(g.numPlayers).appendTo(k);$("<td>").html("".concat(g.score,"/").concat(v)).appendTo(k);$("<td>").html(g.variant).appendTo(k);v=m.format(new Date(g.datetime));$("<td>").html(v).appendTo(k);v=h(d[e],
"Watch Replay","replayCreate",!1);$("<td>").html(v).appendTo(k);v=h(d[e],"Share Replay","sharedReplayCreate",!0);$("<td>").html(v).appendTo(k);v=l(d[e],g.numSimilar);$("<td>").html(v).appendTo(k);$("<td>").html(g.otherPlayerNames).appendTo(k);k.appendTo(c)}10>d.length?$("#lobby-history-show-more").hide():$("#lobby-history-show-more").show()}};var h=function(c,d,e,f){var h=$("<button>").attr("type","button").addClass("button fit margin0");"Watch Replay"===d?d='<i class="fas fa-eye lobby-button-icon"></i>':
"Share Replay"===d&&(d='<i class="fas fa-users lobby-button-icon"></i>');h.html(d);h.addClass("history-table");h.addClass("enter-history-game");h.attr("id","replay-".concat(c));h.on("click",function(d){d.preventDefault();a.gameID=c;a.conn.send(e,{gameID:a.gameID});f&&g.history.hide()});return h},l=function(c,d){var e=$("<button>").attr("type","button").addClass("button fit margin0");e.html('<i class="fas fa-chart-bar lobby-button-icon"></i>&nbsp; '.concat(d-1));0===d-1&&e.addClass("disabled");e.attr("id",
"history-details-".concat(c));e.on("click",function(d){d.preventDefault();a.gameID=c;a.conn.send("historyDetails",{gameID:a.gameID});g.history.showDetails()});return e};c.showDetails=function(){$("#lobby-history").hide();$("#lobby-history-details").show();g.nav.show("history-details");a.historyDetailList=[]};c.hideDetails=function(){$("#lobby-history").show();$("#lobby-history-details").hide();g.nav.show("history")};c.drawDetails=function(){var c=$("#lobby-history-details-table-tbody");if(a.historyDetailList.length){c.html("");
var d=a.historyDetailList.filter(function(c){return c.id in a.historyList}).map(function(c){return a.historyList[c.id].variant}).map(function(a){return f.VARIANTS[a]})[0];if(void 0!==d)for(var e=0;e<a.historyDetailList.length;e++){var g=a.historyDetailList[e],l=$("<tr>"),k="#".concat(g.id);g.you&&(k="<strong>".concat(k,"</strong>"));$("<td>").html(k).appendTo(l);k="".concat(g.score,"/").concat(d.maxScore);g.you&&(k="<strong>".concat(k,"</strong>"));$("<td>").html(k).appendTo(l);k=m.format(new Date(g.datetime));
g.you&&(k="<strong>".concat(k,"</strong>"));$("<td>").html(k).appendTo(l);k=h(g.id,"Watch Replay","replayCreate",!1);$("<td>").html(k).appendTo(l);k=h(g.id,"Share Replay","sharedReplayCreate",!1);$("<td>").html(k).appendTo(l);k=g.otherPlayerNames;g.you&&(k="<strong>".concat(a.username,", ").concat(k,"</strong>"));$("<td>").html(k).appendTo(l);l.appendTo(c)}}else c.text("Loading...")};var m=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"2-digit",day:"2-digit"})},{"../constants":3,"../globals":36,
"./main":41}],39:[function(d,e,c){var a=d("../globals");$(document).keydown(function(c){"lobby"===a.currentScreen&&(c.altKey&&"c"===c.key?$("#nav-buttons-games-create-game").click():c.altKey&&"h"===c.key?$("#nav-buttons-games-history").click():c.altKey&&"o"===c.key?$("#nav-buttons-games-sign-out").click():c.altKey&&"s"===c.key?$("#nav-buttons-game-start").click():c.altKey&&"l"===c.key?$("#nav-buttons-pregame-leave").click():c.altKey&&"r"===c.key?$("#nav-buttons-pregame-unattend").is(":visible")?$("#nav-buttons-pregame-unattend").click():
$("#nav-buttons-history-return").is(":visible")?$("#nav-buttons-history-return").click():$("#nav-buttons-history-details-return").is(":visible")&&$("#nav-buttons-history-details-return").click():c.altKey&&"w"===c.key?$('a.nav-buttons-history-by-id[data-replayType="replayCreate"]').click():c.altKey&&"e"===c.key&&$('a.nav-buttons-history-by-id[data-replayType="sharedReplayCreate"]').click())})},{"../globals":36}],40:[function(d,e,c){var a=d("../globals"),f=d("../websocket"),g=d("./main");$(document).ready(function(){$("#login-button").click(function(a){a.preventDefault();
$("#login-form").submit()});$("#login-form").on("keypress",function(a){"Enter"===a.key&&(a.preventDefault(),$("#login-form").submit())});$("#login-form").submit(h);$("#title-discord").tooltipster({theme:"tooltipster-shadow",delay:0,content:"Discord is a voice and text chat application that you can run in abrowser.<br />If the server is down, you can probably find out why in theHanabi server / chat room.",contentAsHTML:!0});a.browserIsFirefox&&"true"!==localStorage.getItem("acceptedFirefoxWarning")&&
($("#sign-in").hide(),$("#firefox-warning").show());$("#firefox-warning-button").click(function(){localStorage.setItem("acceptedFirefoxWarning","true");$("#firefox-warning").hide();$("#sign-in").show()});a.browserIsFirefox&&"true"!==localStorage.getItem("acceptedFirefoxWarning")||(a.username=localStorage.getItem("hanabiuser"),a.password=localStorage.getItem("hanabipass"),a.username&&($("#login-username").val(a.username),$("#login-password").focus()),a.username&&a.password&&(console.log("Automatically logging in from cookie credentials."),
m()))});var h=function(c){c.preventDefault();c=$("#login-username").val();var d=$("#login-password").val();c?d?(d=hex_sha256("Hanabi password ".concat(d)),localStorage.setItem("hanabiuser",c),localStorage.setItem("hanabipass",d),a.username=c,a.password=d,m()):l("You must provide a password."):l("You must provide a username.")},l=function(c){setTimeout(function(){$("#login-ajax").hide();$("#login-button").removeClass("disabled");$("#login-alert").html(c);$("#login-alert").fadeIn(a.fadeTime)},0)},m=
function(){$("#login-button").addClass("disabled");$("#login-explanation").hide();$("#login-ajax").show();var c="".concat(window.location.protocol,"//").concat(window.location.hostname);""!==window.location.port&&(c+=":".concat(window.location.port));c+="/login";var d=$.ajax({url:c,type:"POST",data:{username:a.username,password:a.password}});console.log("Sent a login request to: ".concat(c));d.done(function(){f.set()});d.fail(function(a){l("Login failed: ".concat(0===a.readyState?"A network error occured. The server might be down!":
""===a.responseText?"An unknown error occured.":a.responseText))})};c.hide=function(c){$("#login").hide();c?$("#tutorial").fadeIn(a.fadeTime):(a.currentScreen="lobby",$("#lobby").show(),$("#lobby-history").hide(),g.nav.show("games"),g.users.draw(),g.tables.draw(),$("#lobby-chat-input").focus())}},{"../globals":36,"../websocket":52,"./main":41}],41:[function(d,e,c){c.createGame=d("./createGame");c.history=d("./history");c.keyboard=d("./keyboard");c.login=d("./login");c.nav=d("./nav");c.pregame=d("./pregame");
c.settings=d("./settings");c.tables=d("./tables");d("./tutorial");c.users=d("./users");window.lobby=c},{"./createGame":37,"./history":38,"./keyboard":39,"./login":40,"./nav":42,"./pregame":43,"./settings":44,"./tables":45,"./tutorial":46,"./users":47}],42:[function(d,e,c){var a=d("../globals"),f=d("../misc"),g=d("../modals"),h=d("./main");$(document).ready(function(){l();$("#nav-buttons-games-create-game").tooltipster("option","functionReady",h.createGame.ready);$("#nav-buttons-games-history").on("click",
function(a){a.preventDefault();h.history.show()});$("#nav-buttons-games-sign-out").on("click",function(a){a.preventDefault();localStorage.removeItem("hanabiuser");localStorage.removeItem("hanabipass");window.location.reload()});$("#nav-buttons-pregame-start").on("click",function(c){c.preventDefault();$("#nav-buttons-pregame-start").hasClass("disabled")||a.conn.send("gameStart")});$("#nav-buttons-pregame-unattend").on("click",function(c){c.preventDefault();h.pregame.hide();a.conn.send("gameUnattend")});
$("#nav-buttons-pregame-leave").on("click",function(c){c.preventDefault();a.conn.send("gameLeave")});$(".nav-buttons-history-by-id").on("click",function(c){c.preventDefault();var d=c.currentTarget.getAttribute("data-display");d=window.prompt("What is the ID of the game you want to ".concat(d,"?"));null!==d&&a.conn.send(c.currentTarget.getAttribute("data-replayType"),{gameID:parseInt(d,10)})});$("#nav-buttons-history-return").on("click",function(a){a.preventDefault();h.history.hide()});$("#nav-buttons-history-details-return").on("click",
function(a){a.preventDefault();h.history.hideDetails()})});var l=function(){var c=["create-game","resources","settings"],d={theme:"tooltipster-shadow",trigger:"click",interactive:!0,delay:0,plugins:["sideTip","scrollableTip"],functionBefore:function(){$("#lobby").fadeTo(a.fadeTime,.4)}},e=function(){for(var d=0,e=0;e<c.length;e++)$("#nav-buttons-games-".concat(c[e])).tooltipster("status").open&&(d+=1);1>=d&&$("#lobby").fadeTo(a.fadeTime,1)};$(document).keydown(function(a){"Escape"===a.key&&(a.preventDefault(),
f.closeAllTooltips(),g.closeAll())});for(var h=0;h<c.length;h++)$("#nav-buttons-games-".concat(c[h])).tooltipster(d).tooltipster("instance").on("close",e)};c.show=function(a){for(var c=["games","pregame","history","history-details"],d=0;d<c.length;d++)$("#nav-buttons-".concat(c[d])).hide();"nothing"!==a&&$("#nav-buttons-".concat(a)).show()}},{"../globals":36,"../misc":49,"../modals":50,"./main":41}],43:[function(d,e,c){var a=d("../globals"),f=d("../constants"),g=d("../misc"),h=d("./main");c.show=
function(){$("#lobby-pregame").show();$("#lobby-games").hide();$("#lobby-chat-container").removeClass("col-8");$("#lobby-chat-container").addClass("col-4");$("#lobby-chat-pregame-container").show();$("#lobby-chat-pregame-text").html("");var a=document.getElementById("lobby-chat-text");a.scrollTop=a.scrollHeight;a=document.getElementById("lobby-chat-pregame-text");a.scrollTop=a.scrollHeight;h.nav.show("pregame");$("#nav-buttons-pregame-start").addClass("disabled")};c.hide=function(){$("#lobby-pregame").hide();
$("#lobby-games").show();$("#lobby-chat-container").addClass("col-8");$("#lobby-chat-container").removeClass("col-4");$("#lobby-chat-pregame-container").hide();h.nav.show("games")};c.draw=function(){$("#nav-buttons-game-start").addClass("disabled");$("#lobby-pregame-name").text(a.game.name);$("#lobby-pregame-variant").text(a.game.variant);var c=$("#lobby-pregame-options-title");c.text("Options:");var d=$("#lobby-pregame-options");d.text("");if(a.game.timed){var e="Timed ("+g.timerFormatter(a.game.baseTime);
e=e+" + "+g.timerFormatter(a.game.timePerTurn);e+=")";$("<li>").html(e).appendTo(d)}a.game.deckPlays&&$("<li>").html("Bottom-deck Blind Plays").appendTo(d);a.game.emptyClues&&$("<li>").html("Empty Clues").appendTo(d);a.game.characterAssignments&&$("<li>").html("Character Assignments").appendTo(d);a.game.password&&$("<li>").html("Password-protected").appendTo(d);""===d.text()&&c.text("");c=a.game.players.length;for(d=0;5>=d;d++){e=$("#lobby-pregame-player-".concat(d+1));var h=a.game.players[d];if(h){e.show();
var r='\n            <p class="margin0 padding0p5">\n                <strong>'.concat(h.name,"</strong>\n            </p>\n        ");6===c?(e.removeClass("col-2"),e.addClass("lobby-pregame-col")):(e.addClass("col-2"),e.removeClass("lobby-pregame-col"));var t=Math.round(100*h.stats.averageScore)/100,v=100*h.stats.strikeoutRate;v=Math.round(100*v)/100;var k=5*f.VARIANTS[a.game.variant].suits.length;r+='\n            <div class="row">\n                <div class="col-10">\n                    Total games:\n                </div>\n                <div class="col-2 align-right padding0">\n                    '.concat(h.stats.numPlayedAll,
'\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-10">\n                    ...of this variant:\n                </div>\n                <div class="col-2 align-right padding0">\n                    ').concat(h.stats.numPlayed,'\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-10">\n                    Average score:\n                </div>\n                <div class="col-2 align-right padding0">\n                    ').concat(t,
'\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-10">\n                    Strikeout rate:\n                </div>\n                <div class="col-2 align-right padding0">\n                    ').concat(v,"%\n                </div>\n            </div>\n        ");1<c&&(r+='\n                <div class="row">\n                    <div class="col-10">\n                        '.concat(c,'-player best score:\n                    </div>\n                    <div class="col-2 align-right padding0">\n                        ').concat(h.stats.bestScores[c-
2].score,"\n                    </div>\n                </div>\n            "));r+='\n            <div class="row">\n                <div class="col-10">\n                    '.concat(1===c?"B":"Other b",'est scores:\n                </div>\n                <div class="col-2 align-right padding0">\n                    <i id="lobby-pregame-player-').concat(d+1,'-scores-icon" class="fas fa-chart-area green" data-tooltip-content="#lobby-pregame-player-').concat(d+1,'-tooltip"></i>\n                </div>\n            </div>\n            <div class="hidden">\n                <div id="lobby-pregame-player-').concat(d+
1,'-tooltip" class="lobby-pregame-tooltip">\n        ');for(t=2;6>=t;t++){r+='<div class="row">';r+='<div class="col-6">'.concat(t,"-player:</div>");var x=h.stats.bestScores[t-2];v=x.score;x=x.modifier;r+='<div class="col-6">';v===k&&(r+="<strong>");r+=" ".concat(v," / ").concat(k);v===k&&(r+="</strong> &nbsp; ",r=0===x?r+'<i class="fas fa-check score-modifier green"></i>':r+'<i class="fas fa-times score-modifier red"></i>');r+="</div></div>"}r+="\n                </div>\n            </div>\n        ";
h.present||(r+='<p class="lobby-pregame-player-away"><strong>AWAY</strong></p>');e.html(r);$("#lobby-pregame-player-".concat(d+1,"-scores-icon")).tooltipster({animation:"grow",contentAsHTML:!0,delay:0,theme:["tooltipster-shadow","tooltipster-shadow-big"]})}else e.html(""),e.hide()}}},{"../constants":3,"../globals":36,"../misc":49,"./main":41}],44:[function(d,e,c){function a(){for(var a=0;a<h.length;a++){var c=h[a][1];if(h[a][0]===$(this).attr("id")){a=$(this).is(":checked");f.settings[c]=a;localStorage.setItem(c,
a);console.log('Wrote a "'.concat(c,'" cookie of: ').concat(a));break}}f.settings.sendTurnNotify&&g.test()}var f=d("../globals"),g=d("../notifications"),h=[["send-turn-notification","sendTurnNotify"],["send-turn-sound","sendTurnSound"],["send-timer-sound","sendTimerSound"],["show-bga-ui","showBGAUI"],["show-colorblind-ui","showColorblindUI"],["show-timer-in-untimed","showTimerInUntimed"],["reverse-hands","reverseHands"],["speedrun-preplay","speedrunPreplay"],["speedrun-hotkeys","speedrunHotkeys"]];
$(document).ready(function(){for(var c=0;c<h.length;c++){var d=h[c][0],e=h[c][1],g=localStorage.getItem(e);"undefined"===typeof g||"string"!==typeof g?(g=f.settings[e],localStorage.setItem(e,g),console.log('Wrote a brand new "'.concat(e,'" cookie of: ').concat(g))):(g="true"===g,f.settings[e]=g);$("#".concat(d)).attr("checked",g);$("#".concat(d)).change(a)}})},{"../globals":36,"../notifications":51}],45:[function(d,e,c){var a=d("../globals"),f=d("../misc"),g=d("../modals"),h=d("./main");c.draw=function(){var c=
$("#lobby-games-table-tbody");c.html("");if(0===Object.keys(a.tableList).length)$("#lobby-games-no").show(),$("#lobby-games").addClass("align-center-v"),$("#lobby-games-table-container").hide();else{$("#lobby-games-no").hide();$("#lobby-games").removeClass("align-center-v");$("#lobby-games-table-container").show();for(var d=Object.values(a.tableList),e=0;e<d.length;e++){var g=d[e],h=$("<tr>");$("<td>").html(g.name).appendTo(h);$("<td>").html(g.numPlayers).appendTo(h);$("<td>").html(g.variant).appendTo(h);
var y="No";g.timed&&(y="".concat(f.timerFormatter(g.baseTime)," + ").concat(f.timerFormatter(g.timePerTurn)));$("<td>").html(y).appendTo(h);y=g.sharedReplay?"Shared Replay":g.running&&g.joined?g.ourTurn?"<strong>Your Turn</strong>":"Waiting":g.running?"Running":"Not Started";"Not Started"!==y&&(y+=" (".concat(g.progress,"%)"));$("<td>").html(y).appendTo(h);y=$("<button>").attr("type","button").addClass("button small margin0");g.sharedReplay||!g.joined&&g.running?(y.html('<i class="fas fa-eye lobby-button-icon"></i>'),
y.attr("id","spectate-".concat(g.id)),y.on("click",l(g))):g.joined?(y.html('<i class="fas fa-play lobby-button-icon"></i>'),y.attr("id","resume-".concat(g.id)),y.on("click",q(g))):(y.html('<i class="fas fa-sign-in-alt lobby-button-icon"></i>'),y.attr("id","join-".concat(g.id)),6<=g.numPlayers&&y.addClass("disabled"),y.on("click",m(g)));$("<td>").html(y).appendTo(h);y="n/a";g.joined&&(g.owned||g.running)&&!g.sharedReplay&&(y=$("<button>").attr("type","button").addClass("button small margin0"),y.html('<i class="fas fa-times lobby-button-icon"></i>'),
y.attr("id","abandon-".concat(g.id)),y.on("click",p(g)));$("<td>").html(y).appendTo(h);$("<td>").html(g.players).appendTo(h);$("<td>").html(g.spectators).appendTo(h);h.appendTo(c)}}};var l=function(c){return function(d){d.preventDefault();a.gameID=c.id;a.conn.send("gameSpectate",{gameID:c.id});h.tables.draw()}},m=function(c){return function(d){d.preventDefault();c.password?g.passwordShow(c.id):(a.gameID=c.id,a.conn.send("gameJoin",{gameID:c.id}),h.tables.draw())}},q=function(c){return function(d){d.preventDefault();
a.gameID=c.id;a.conn.send("gameReattend",{gameID:c.id});h.tables.draw()}},p=function(c){return function(d){d.preventDefault();if(!c.running||window.confirm("Are you sure? This will cancel the game for all players."))a.gameID=null,a.conn.send("gameAbandon",{gameID:c.id})}}},{"../globals":36,"../misc":49,"../modals":50,"./main":41}],46:[function(d,e,c){var a=d("../globals"),f=d("./login");$(document).ready(function(){$("#tutorial-yes").on("click",function(){$("#tutorial-1").fadeOut(a.fadeTime,function(){$("#tutorial-2").fadeIn(a.fadeTime)})});
$("#tutorial-no").on("click",function(){$("#tutorial").fadeOut(a.fadeTime,function(){f.hide(!1)})});$("#tutorial-2-yes").on("click",function(){$("#tutorial-2").fadeOut(a.fadeTime,function(){$("#tutorial-2-1").fadeIn(a.fadeTime)})});$("#tutorial-2-no").on("click",function(){$("#tutorial-2").fadeOut(a.fadeTime,function(){$("#tutorial-2-2").fadeIn(a.fadeTime)})});$("#tutorial-2-1-ok").on("click",function(){$("#tutorial-2-1").fadeOut(a.fadeTime,function(){$("#tutorial-3").fadeIn(a.fadeTime)})});$("#tutorial-2-2-ok").on("click",
function(){$("#tutorial-2-2").fadeOut(a.fadeTime,function(){$("#tutorial-3").fadeIn(a.fadeTime)})});$("#tutorial-3-yes").on("click",function(){$("#tutorial-3").fadeOut(a.fadeTime,function(){$("#tutorial-3-1").fadeIn(a.fadeTime)})});$("#tutorial-3-no").on("click",function(){$("#tutorial-3").fadeOut(a.fadeTime,function(){$("#tutorial-4").fadeIn(a.fadeTime)})});$("#tutorial-3-1-ok").on("click",function(){$("#tutorial-3-1").fadeOut(a.fadeTime,function(){$("#tutorial-5").fadeIn(a.fadeTime)})});$("#tutorial-4-casual").on("click",
function(){$("#tutorial-4").fadeOut(a.fadeTime,function(){$("#tutorial-4-1").fadeIn(a.fadeTime)})});$("#tutorial-4-expert").on("click",function(){$("#tutorial-4").fadeOut(a.fadeTime,function(){$("#tutorial-4-2").fadeIn(a.fadeTime)})});$("#tutorial-4-1-lobby").on("click",function(){$("#tutorial-4-1").fadeOut(a.fadeTime,function(){f.hide(!1)})});$("#tutorial-4-2-ok").on("click",function(){$("#tutorial-4-2").fadeOut(a.fadeTime,function(){$("#tutorial-4-3").fadeIn(a.fadeTime)})});$("#tutorial-4-2-lobby").on("click",
function(){$("#tutorial-4-2").fadeOut(a.fadeTime,function(){f.hide(!1)})});$("#tutorial-4-3-ok").on("click",function(){$("#tutorial-4-3").fadeOut(a.fadeTime,function(){$("#tutorial-4-4").fadeIn(a.fadeTime)})});$("#tutorial-4-4-ok").on("click",function(){$("#tutorial-4-4").fadeOut(a.fadeTime,function(){$("#tutorial-5").fadeIn(a.fadeTime)})});$("#tutorial-5-lobby").on("click",function(){$("#tutorial-5").fadeOut(a.fadeTime,function(){f.hide(!1)})})})},{"../globals":36,"./login":40}],47:[function(d,e,
c){var a=d("../globals");c.draw=function(){$("#lobby-users-num").text(Object.keys(a.userList).length);var c=$("#lobby-users-table-tbody");c.html("");for(var d=Object.values(a.userList),e=0;e<d.length;e++){var l=d[e],m=$("<tr>"),q=l.name;q='<a href="/scores/'.concat(q,'" target="_blank" rel="noopener noreferrer">').concat(q,"</a>");l.name===a.username&&(q="<strong>".concat(q,"</strong>"));$("<td>").html(q).appendTo(m);l=l.status;$("<td>").html(l).appendTo(m);m.appendTo(c)}}},{"../globals":36}],48:[function(d,
e,c){d("./game/main");d("./lobby/main");d("./modals")},{"./game/main":6,"./lobby/main":41,"./modals":50}],49:[function(d,e,c){$(document).ready(function(){jQuery.expr.filters.offscreen=function(a){a=a.getBoundingClientRect();return 1>a.top||a.bottom>window.innerHeight-5||1>a.left||a.right>window.innerWidth-5}});c.closeAllTooltips=function(){var a=$.tooltipster.instances();$.each(a,function(a,c){c.status().open&&c.close()})};c.timerFormatter=function(a){a||(a=0);var c=new Date;c.setHours(0,0,0,a);
a=c.getMinutes();c=c.getSeconds();c=10>c?"0".concat(c):c;return"".concat(a,":").concat(c)}},{}],50:[function(d,e,c){var a=d("./globals"),f=d("./misc"),g=d("./lobby/main"),h=d("./game/main"),l=["password"];$(document).ready(function(){for(var c=0;c<l.length;c++)$("#".concat(l[c],"-modal-cancel")).click(q);$("#password-modal-password").on("keypress",function(a){"Enter"===a.key&&(a.preventDefault(),$("#password-modal-submit").click())});$("#password-modal-submit").click(m);$("#warning-modal-button").click(function(){$("#warning-modal").fadeOut(a.fadeTime);
$("#lobby").is(":visible")&&$("#lobby").fadeTo(a.fadeTime,1);$("#game").is(":visible")&&$("#game").fadeTo(a.fadeTime,1)});$("#error-modal-button").click(function(){window.location.reload()})});c.passwordShow=function(c){$("#lobby").fadeTo(a.fadeTime,.25);f.closeAllTooltips();$("#password-modal-id").val(c);$("#password-modal").fadeIn(a.fadeTime);$("#password-modal-password").focus()};var m=function(c){c.preventDefault();$("#password-modal").fadeOut(a.fadeTime);$("#lobby").fadeTo(a.fadeTime,1);c=parseInt($("#password-modal-id").val(),
10);var d=$("#password-modal-password").val();d=hex_sha256("Hanabi game password ".concat(d));a.conn.send("gameJoin",{gameID:c,password:d})};c.warningShow=function(c){$("#lobby").is(":visible")&&$("#lobby").fadeTo(a.fadeTime,.25);$("#game").is(":visible")&&$("#game").fadeTo(a.fadeTime,.25);f.closeAllTooltips();h.chat.hide();$("#warning-modal-description").html(c);$("#warning-modal").fadeIn(a.fadeTime)};c.errorShow=function(c){a.errorOccured||(a.errorOccured=!0,$("#lobby").is(":visible")&&$("#lobby").fadeTo(a.fadeTime,
.1),$("#game").is(":visible")&&$("#game").fadeTo(a.fadeTime,.1),f.closeAllTooltips(),h.chat.hide(),g.nav.show("nothing"),$("#error-modal-description").html(c),$("#error-modal").fadeIn(a.fadeTime))};var q=function(){for(var c=0;c<l.length;c++)$("#".concat(l[c],"-modal")).fadeOut(a.fadeTime);$("#lobby").fadeTo(a.fadeTime,1)};c.closeAll=q},{"./game/main":6,"./globals":36,"./lobby/main":41,"./misc":49}],51:[function(d,e,c){c.test=function(){"Notification"in window&&"default"===Notification.permission&&
Notification.requestPermission()};c.send=function(a,c){"Notification"in window&&"granted"===Notification.permission&&new Notification("Hanabi: ".concat(a),{tag:c})}},{}],52:[function(d,e,c){var a=d("../lib/golem"),f=d("./globals"),g=d("./modals"),h=d("./chat"),l=d("./lobby/main"),m=d("./game/main");c.set=function(){var c="ws";"https:"===window.location.protocol&&(c+="s");c=c+"://"+window.location.hostname;""!==window.location.port&&(c=c+":"+window.location.port);c+="/ws";console.log("Connecting to websocket URL:",
c);f.conn=new a.Connection(c,!0);f.conn.on("open",function(){console.log("WebSocket connection established.")});f.conn.on("close",function(){console.log("WebSocket connection disconnected / closed.");g.errorShow("Disconnected from the server. Either your Internet hiccuped or the server restarted.")});f.conn.on("socketError",function(a){console.error("WebSocket error:",a);$("#loginbox").is(":visible")&&l.login.formError("Failed to connect to the WebSocket server. The server might be down!")});q();
f.conn.send=function(a,c){"undefined"===typeof c&&(c={});f.debug&&(console.log("%cSent ".concat(a,":"),"color: green;"),console.log(c));f.conn.emit(a,c)};window.onerror=function(a,c,d,e){if("localhost"!==window.location.hostname)try{f.conn.emit("clientError",{message:a,url:c,lineno:d,colno:e})}catch(x){console.error("Failed to transmit the error to the server:",x)}}};var q=function(){f.conn.on("hello",function(a){f.username=a.username;f.totalGames=a.totalGames;$("#nav-buttons-history-game-count").html(f.totalGames);
l.login.hide(a.firstTimeUser)});f.conn.on("user",function(a){f.userList[a.id]=a;l.users.draw()});f.conn.on("userLeft",function(a){delete f.userList[a.id];l.users.draw()});f.conn.on("table",function(a){a.baseTime*=1E3;a.timePerTurn*=1E3;f.tableList[a.id]=a;l.tables.draw()});f.conn.on("tableGone",function(a){delete f.tableList[a.id];l.tables.draw()});f.conn.on("chat",function(a){h.add(a,!0);"game"!==a.room||null===f.ui||$("#game-chat-modal").is(":visible")||(f.ui.globals.spectating&&!f.ui.globals.sharedReplay?
f.ui.toggleChat():(f.chatUnread+=1,f.ui.updateChatLabel()))});f.conn.on("chatList",function(a){var c=!0,d=!1,e=void 0;try{for(var g=a.list[Symbol.iterator](),l;!(c=(l=g.next()).done);c=!0)h.add(l.value)}catch(y){d=!0,e=y}finally{try{c||null==g.return||g.return()}finally{if(d)throw e;}}null===f.ui||$("#game-chat-modal").is(":visible")||(f.chatUnread+=a.unread,f.ui.updateChatLabel())});f.conn.on("joined",function(a){f.gameID=a.gameID;l.tables.draw();l.pregame.show()});f.conn.on("left",function(){f.gameID=
null;l.tables.draw();l.pregame.hide()});f.conn.on("game",function(a){f.game=a;f.game.baseTime*=1E3;f.game.timePerTurn*=1E3;l.pregame.draw()});f.conn.on("tableReady",function(a){a.ready?$("#nav-buttons-pregame-start").removeClass("disabled"):$("#nav-buttons-pregame-start").addClass("disabled")});f.conn.on("gameStart",function(a){a.replay||l.pregame.hide();m.show(a.replay)});f.conn.on("gameHistory",function(a){var c=!0,d=!1,e=void 0;try{for(var g=a[Symbol.iterator](),h;!(c=(h=g.next()).done);c=!0){var m=
h.value;f.historyList[m.id]=m;m.incrementNumGames&&(f.totalGames+=1,$("#nav-buttons-history-game-count").html(f.totalGames))}}catch(C){d=!0,e=C}finally{try{c||null==g.return||g.return()}finally{if(d)throw e;}}f.historyClicked&&(f.historyClicked=!1,l.history.draw())});f.conn.on("historyDetail",function(a){f.historyDetailList.push(a);l.history.drawDetails()});f.conn.on("sound",function(a){f.settings.sendTurnSound&&m.sounds.play(a.file)});f.conn.on("name",function(a){f.randomName=a.name});f.conn.on("warning",
function(a){console.warn(a.warning);g.warningShow(a.warning)});f.conn.on("error",function(a){console.error(a.error);f.conn||f.conn.close();g.errorShow(a.error)});m.commands.init()}},{"../lib/golem":1,"./chat":2,"./game/main":6,"./globals":36,"./lobby/main":41,"./modals":50}]},{},[48]);
