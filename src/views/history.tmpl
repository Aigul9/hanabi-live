{{define "profile"}}

{{ $length := len .History }}
{{if eq $length 0}}
<ul>
  <li>No games played.</li>
</ul>
{{else}}
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th># of Players</th>
      <th>Score</th>
      <th>Variant</th>
      <th>Date</th>
      <th>Other Players</th>
      <th>Other Scores</th>
    </tr>
  </thead>
  <tbody>
    {{range $index, $results := .History}}
      <tr>
        <td><a href="/replay/{{.ID}}">{{.ID}}</a></td>
        <td>{{.NumPlayers}}</td>
        <td>{{.Score}}</td>
        <td>{{.Options.Variant}}</td>
        <td>{{.DatetimeFinished}}</td>
        <td>
          <!-- From: https://stackoverflow.com/questions/21305865/golang-separating-items-with-comma-in-template -->
          <a href="/history/{{range $index2, $results2 := .PlayerNames}}{{if $index2}}/{{end}}{{$results2}}{{end}}">
            {{range $index2, $results2 := .PlayerNames}}{{if $index2}}, {{end}}{{$results2}}{{end}}
          </a>
        </td>
        <td>{{.NumSimilar}}</td>
      </tr>
    {{- end -}}
  </tbody>
</tabke>
{{end}}

{{end}}
